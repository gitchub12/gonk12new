{
  "summary": {
    "totalFiles": 80,
    "originalSize": 1783657,
    "optimizedSize": 262333,
    "tokensSaved": 1521324,
    "reductionPercentage": "85.3"
  },
  "fileResults": [
    {
      "path": "e:\\gonk\\session_narrative.md",
      "originalSize": 13628,
      "condensedSize": 5042,
      "content": "# Session Narrative\r\n\r\n## Current Session (2025-11-18) - MAJOR PERFORMANCE OPTIMIZATION\r\n\r\n### ðŸš€ COMPREHENSIVE PERFORMANCE OVERHAUL - BUGS FIXED âœ…\r\n\r\n### âŒ CRITICAL COMPRESSION BUGS DISCOVERED & FIXED\r\n\r\n**EMERGENCY FIX COMPLETED**: V1 compression algorithm had catastrophic data loss bugs. All levels restored, V2 created.\r\n\r\n#### Bug #1: Fake Defaults for Sparse Layers\r\n**Symptom**: Floater/dangler textures appearing everywhere, walls missing\r\n\r\n#### Bug #2: Properties Lost\r\n**Symptom**: wall2/wall3 (level2/level3 properties) missing from walls\r\n\r\n#### Bug #3: Size Property Lost\r\n**Symptom**: floor_38.png tiles at wrong size\r\n\r\n#### Bug #4: Elevation Corruption\r\n**Symptom**: Random elevation drops, terrain incorrect\r\n\r\n\r\n\r\n\r\n\r\n### ðŸš€ ORIGINAL PERFORMANCE OPTIMIZATIONS (KEPT) âœ…\r\n\r\n#### Critical Furniture Scale Bug Fix\r\n**FIXED**: Furniture was rendering at **DOUBLE** the intended size\r\n\r\n#### New Configuration System\r\n**Created**: Centralized configuration files for all hardcoded values\r\n\r\n\r\n#### Ragdoll Pooling System (70% Performance Improvement)\r\n**Implemented**: Object pooling for NPC death ragdolls\r\n\r\n\r\n#### Furniture Culling & LOD\r\n**Implemented**: Distance-based furniture visibility culling\r\n\r\n\r\n#### Nameplate Optimization\r\n**Implemented**: Batched nameplate billboard updates\r\n\r\n\r\n#### Level Compression System (90% File Size Reduction)\r\n**Created**: Sparse level format with texture registry\r\n\r\n\r\n\r\n#### Overall Performance Gains (Estimated)\r\n| Optimization | FPS Gain | Memory Savings | Load Time |\r\n\r\n### Files Created This Session\r\n- `data/physics_config.json` âœ…\r\n\r\n### Files Modified This Session\r\n- `furniture.js` - Fixed scale bug\r\n\r\n### Next Steps\r\n1. Run `node tools/convert_all_levels.js` to compress all level files\r\n\r\n\r\n## Previous Session (2025-11-16) - Branch: claude/review-game-concept-docs-01QCxeUXkeJrWfSkQTnDXLWC\r\n\r\n### Branch Consolidation Complete\r\nSuccessfully merged multiple feature branches:\r\n\r\n\r\n### Completed This Session\r\n\r\n#### 1. Furniture System - BufferGeometry Fix âœ…\r\n**Fixed**: `Cannot read properties of undefined (reading '0')` at furniture.js:198\r\n\r\n#### 2. Skybox System - Auto-Detection âœ…\r\n**Fixed**: Skybox folders now auto-detect as animated skyboxes\r\n\r\n#### 3. NPC Spawner System - Enhanced Editor UI âœ…\r\n**Implemented**: Full NPC spawner palette with 5 types and level-based scaling\r\n\r\n\r\n### Remaining Issues\r\n\r\n#### 1. Skybox h2 folder failing to load animated textures\r\n```\r\nenvironment_and_physics.js:663 Failed to load animated skybox 'h2'. Using fallback color.\r\n```\r\n\r\n#### 2. CRITICAL: Clone NPCs Broken - No Longer Spawning\r\nClone faction NPCs that were working as level-placed NPCs are now failing with \"Missing skin texture\" errors:\r\n```\r\nFailed to create Gonk mesh for 104th Wolfpack Battalion/Sinker (1) P1: Missing skin texture.\r\nFailed to create Gonk mesh for 501st Legion/Rex (2) Cold Assault: Missing skin texture.\r\n```\r\n\r\n#### 3. CRITICAL: Low-Grade Spawners Not Working\r\nSpawners at low levels (1-2) don't spawn NPCs at all. Door opens but no NPCs emerge:\r\n```\r\n[Spawner 1] ENEMY Spawner: Opened at 11.0 seconds...\r\n[Spawner 1] NPC CREATION FAILED: NPC count did not increase (45 -> 45)\r\n```\r\n\r\n#### 4. TO DO: Faction-Specific Panel Overlay for Spawners\r\nNeed to add a panel overlay on top of the spawner image to show which faction's NPCs will emerge. This creates visual distinction for different faction spawners and allows the same elevator/door animation while maintaining faction identity.\r\n\r\n#### 5. Spawner Visibility Issue\r\nSpawner (and broken version) is still visible when viewed from behind the plane. FrontSide rendering should hide it but isn't working correctly with concave geometry.\r\n\r\n### What Works Now\r\n- âœ… Furniture auto-discovery: 190 models found in models/block/\r\n\r\n### Known Limitations\r\n\r\n## Previous Session Summary (2025-11-15)\r\n\r\n### Minecraft Model System\r\n- Created modular external model system in `/data/models/`\r\n\r\n### Character Upgrade System\r\n- Column-based exponential cost formula (2^column)\r\n\r\n### Map Screen (M Key)\r\n- Ship chain layout with L/R variants\r\n\r\n\r\n## Technical Debt\r\n\r\n### HIGH Priority\r\n\r\n- [ ] Skybox texture loading (blocking proper environment)\r\n\r\n### MEDIUM Priority\r\n- [ ] NPC minecraftModel property not applied consistently\r\n\r\n### LOW Priority\r\n- [ ] Performance optimization for 100+ NPCs\r\n\r\n\r\n## Code Architecture Notes\r\n\r\n### Furniture System Flow\r\n1. `FurnitureLoader.discoverModels()` - Fetches list from models/block/ directory\r\n\r\n### THREE.js r128 BufferGeometry UV Access\r\n```javascript\r\n// OLD (broken):\r\ngeometry.faceVertexUvs[0][faceIndex] = [uvs...]\r\n\r\n// NEW (correct):\r\nconst uvAttribute = geometry.attributes.uv;\r\nuvAttribute.setXY(vertexIndex, u, v);\r\ngeometry.attributes.uv.needsUpdate = true;\r\n```\r\n\r\n### BoxGeometry Face Vertex Order (THREE.js r128)\r\n- 6 faces, 4 vertices each = 24 vertices total\r\n\r\n\r\n## Next Steps\r\n\r\n\r\n2. **Immediate**: Resolve skybox texture loading\r\n\r\n\r\n\r\n## Session History\r\n\r\n- Session 1: Faction physics system, conversation system, basic game loop\r\n",
      "compressionRatio": 0.36997358379806283,
      "extractionMethod": "markdown_summarization"
    },
    {
      "path": "e:\\gonk\\.claude\\settings.local.json",
      "originalSize": 224,
      "condensedSize": 224,
      "content": "{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(cat:*)\",\n      \"Bash(node:*)\",\n      \"Bash(mkdir -p:*)\",\n      \"WebSearch\",\n      \"WebFetch(domain:mcreator.net)\",\n      \"allow all\"\n    ],\n    \"deny\": [],\n    \"ask\": []\n  }\n}\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\appraisals.json",
      "originalSize": 832,
      "condensedSize": 832,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/appraisals.json. Phrases for Ally Pre-Conversation Appraisal.\",\r\n  \"descriptors\": {\r\n    \"1-15\": [\"dear friends\", \"great allies\", \"super chill\", \"trusted partners\", \"family\"],\r\n    \"16-30\": [\"friendly\", \"allies\", \"cool\", \"good people\", \"safe\"],\r\n    \"31-50\": [\"known to us\", \"neutrals\", \"on the fence\", \"unknowns\", \"civilians\"],\r\n    \"51-70\": [\"not friendly\", \"dangerous\", \"known killers\", \"risky\", \"trouble\"],\r\n    \"71+\": [\"murderous scum\", \"hostile\", \"deadly\", \"enemies\", \"targets\"]\r\n  },\r\n  \"templates\": [\r\n    \"A(n) {faction}, they are {descriptor}, I'll handle it.\",\r\n    \"{faction} ahead. They are {descriptor}. Let me talk.\",\r\n    \"Heads up, {faction}. They're {descriptor}. Watch my back.\",\r\n    \"Target identified: {faction}. Status: {descriptor}. I'm on it.\"\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\h1_greetings.json",
      "originalSize": 2811,
      "condensedSize": 2811,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/h1_greetings.json. Friendly greetings.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Good to see you! Sector's clear.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"security\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Welcome back, troopers. Need a resupply?\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"from_faction\": [\"clones\", \"imperials\"], \"to_faction\": [\"clones\", \"imperials\"] },\r\n    { \"text\": \"Brothers! The fight goes well.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"clones\"], \"to_faction\": [\"clones\"] },\r\n    { \"text\": \"Ah, the heroes of the hour. What brings you here?\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"My scanners picked you up. Good to see allies.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"security\", \"from_faction\": [\"droids\", \"player_droid\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"The Force is strong with this group.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Vod! (Brother/Sister) It is good to see you.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"mandalorians\"] },\r\n    { \"text\": \"More biomass for the cause... welcome.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"takers\"], \"to_faction\": [\"takers\"] },\r\n    { \"text\": \"At ease. You look like you've had a long rotation.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"suspicion\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Hey! Found anything good down here?\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"from_faction\": [\"aliens\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You made it past the sentries? Impressive work.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"security\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Beep trill! (Happy greeting)\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Need a hand with anything?\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You look like you know what you're doing.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"suspicion\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Stand tall, soldier. The Empire prevails.\", \"type\": [\"greeting\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"from_faction\": [\"imperials\"], \"to_faction\": [\"imperials\", \"clones\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\h1_replies.json",
      "originalSize": 3068,
      "condensedSize": 3068,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/h1_replies.json. Friendly Replies.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Just doing our duty. Keep up the good work.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"earnest\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We're hunting for high-value targets. Wish us luck.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Everything is secure here. You guys are doing great.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"security\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Good to see you too. Stay sharp.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"style\": \"diplomatic\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We found some supplies, but we're keeping the good stuff.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"deceptive\", \"from_faction\": [\"aliens\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"This is the Way.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"style\": \"earnest\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"mandalorians\"] },\r\n    { \"text\": \"For the Republic!\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"style\": \"earnest\", \"from_faction\": [\"clones\"], \"to_faction\": [\"clones\"] },\r\n    { \"text\": \"Just taking a stroll. Lovely ship you have here.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\", \"sith\"] },\r\n    { \"text\": \"My circuits are pleased to encounter you.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"style\": \"diplomatic\", \"from_faction\": [\"droids\", \"player_droid\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We're on a secret mission... looking for snacks.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"deflection\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Yeah, we're the best there is. Don't forget it.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"suspicion\", \"style\": \"intimidation\", \"from_faction\": [\"mandalorians\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Nothing to worry about. Just clearing the trash.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Your vigilance is noted and appreciated.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"security\", \"style\": \"diplomatic\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Fight the good fight, friend.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"generic\", \"style\": \"earnest\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We are just passing through. Peace be with you.\", \"type\": [\"reply\"], \"attitude\": \"h1\", \"topic\": \"purpose\", \"style\": \"diplomatic\", \"from_faction\": [\"aliens\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\h1_responses.json",
      "originalSize": 1301,
      "condensedSize": 1301,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/h1_responses.json. Good Outcomes.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Very well. You may pass.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Glad to see friendly faces. Stay safe.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I like your style. Go on.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"mandalorians\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Documentation accepted. Proceed.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"droids\", \"imperials\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You're alright. Get out of here before I change my mind.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"The Force is with you. Go.\", \"type\": [\"response\"], \"attitude\": \"h1\", \"topic\": \"none\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Here, take this. We found it earlier.\", \"type\": [\"response\"], \"attitude\": \"h2\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\i1_greetings.json",
      "originalSize": 3644,
      "condensedSize": 3644,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/i1_greetings.json. Neutral openers.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Halt. State your business.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Identification, please.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"security\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You there. What is your purpose in this sector?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Hold it. Scanner check.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"security\", \"from_faction\": [\"clones\", \"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I don't recognize you. Explain.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"suspicion\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You look lost. Do you require assistance?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"droids\", \"aliens\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"This area is for authorized personnel only.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"security\", \"from_faction\": [\"imperials\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Haven't seen you down here before.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"suspicion\", \"from_faction\": [\"aliens\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Move along if you have no business here.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Beep boop? (Querying directive)\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Utinni! (Checking pockets)\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"suspicion\", \"from_faction\": [\"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Looking for trade? Or looking for trouble?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"takers\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Trooper, did you authorize these... guests?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"security\", \"from_faction\": [\"imperials\"], \"to_faction\": [\"clones\", \"imperials\"] },\r\n    { \"text\": \"Strange company you keep.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"suspicion\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Wait. Are those blasters regulation?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"security\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"The air scrubbers are offline again. Are you maintenance?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"aliens\", \"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Watch your step. The Takers are restless.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"suspicion\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You have a bounty on you? No? Then keep moving.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Greetings. Do not impede the workflow.\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"purpose\", \"from_faction\": [\"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Can I help you?\", \"type\": [\"greeting\"], \"attitude\": \"i1\", \"topic\": \"generic\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\i1_replies.json",
      "originalSize": 6257,
      "condensedSize": 6257,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/i1_replies.json. Ally responses based on Skill (Charm/Lie).\",\r\n  \"phrases\": [\r\n    { \"text\": \"Just passing through, officer. No trouble here.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"diplomatic\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We are looking for the turbolift. Can you direct us?\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"deflection\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Apologies. We took a wrong turn.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"diplomatic\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We're independent contractors. Inspecting the conduit.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"bluff\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"imperials\", \"clones\"] },\r\n    { \"text\": \"Standard patrol. Stand down.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"imperials\", \"clones\"] },\r\n    { \"text\": \"Officer, you look fantastic. New armor polish?\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\", \"mandalorians\"] },\r\n    { \"text\": \"We are merely humble travelers admiring your ship.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\", \"sith\"] },\r\n    { \"text\": \"Back off. You don't want to mess with us.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"intimidation\", \"from_faction\": [\"mandalorians\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Classified operation. Clear the lane.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"intimidation\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Do not worry. We are leaving immediately.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"earnest\", \"from_faction\": [\"droids\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I am a droid. I have no hostile intent.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"earnest\", \"from_faction\": [\"droids\", \"player_droid\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Looking for scrap. Very boring. You wouldn't be interested.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"deflection\", \"from_faction\": [\"aliens\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We heard a noise and came to investigate.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"My directives prevent me from answering that.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"deflection\", \"from_faction\": [\"droids\", \"player_droid\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Is that a new blaster model? Impressive.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"mandalorians\", \"clones\"] },\r\n    { \"text\": \"The Lieutenant sent us. Go ask him if you want to verify.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\"] },\r\n    { \"text\": \"We're hunting a fugitive. Have you seen a Wookiee?\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"deceptive\", \"from_faction\": [\"mandalorians\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We are just hungry. Looking for the mess hall.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"earnest\", \"from_faction\": [\"aliens\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Out of the way. Official business.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"intimidation\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Maintenance request 88-B. We're fixing the lights.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"bluff\", \"from_faction\": [\"droids\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We aren't the ones you are looking for.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"deceptive\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\"] },\r\n    { \"text\": \"Just delivering supplies to the bridge.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We mean you no harm, friend.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"diplomatic\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Checking radiation levels. You might want to step back.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You look tired. Long shift?\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"generic\", \"style\": \"flattery\", \"from_faction\": [\"any\"], \"to_faction\": [\"imperials\", \"clones\"] },\r\n    { \"text\": \"Who are we? Who are YOU?\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"suspicion\", \"style\": \"deflection\", \"from_faction\": [\"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Don't worry about it.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"generic\", \"style\": \"deflection\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We're just looking for a way off this rock.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"earnest\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Bounty Guild. Move.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"purpose\", \"style\": \"intimidation\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Roger Roger.\", \"type\": [\"reply\"], \"attitude\": \"neutral\", \"topic\": \"generic\", \"style\": \"earnest\", \"from_faction\": [\"droids\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\i1_responses.json",
      "originalSize": 1978,
      "condensedSize": 1978,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/i1_responses.json. Neutral Gauge Outcomes.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Fine. Move along.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I suppose that makes sense. Go.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Keep your heads down.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"clones\", \"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Hmph. Don't cause trouble.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"imperials\", \"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Just don't block the corridor.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I'll be watching you.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Whatever. Just go.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Your story holds up... for now.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Clear the area.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Proceed.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Okay. Safe travels.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Don't make me regret this.\", \"type\": [\"response\"], \"attitude\": \"i1\", \"topic\": \"none\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\m1_greetings.json",
      "originalSize": 1869,
      "condensedSize": 1869,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/m1_greetings.json. Hostile openers.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Halt! You look like trouble.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Get back! This area is restricted.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"security\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You! Give me one reason not to blast you.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"mandalorians\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Rebel scum. I can smell you from here.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"rebels\"] },\r\n    { \"text\": \"Clankers. I hate clankers.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"clones\"], \"to_faction\": [\"droids\", \"player_droid\"] },\r\n    { \"text\": \"Imperial dogs. Get out of our sector.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"imperials\"] },\r\n    { \"text\": \"Fresh meat for the grinder.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Stop! Hands where I can see them!\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"security\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I don't know you. And I don't like you.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You are not welcome here.\", \"type\": [\"greeting\"], \"attitude\": \"m1\", \"topic\": \"purpose\", \"from_faction\": [\"mandalorians\", \"aliens\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\m1_replies.json",
      "originalSize": 3186,
      "condensedSize": 3186,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/m1_replies.json. Hostile Replies. High tension attempts to de-escalate or counter-threaten.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Whoa! Easy with that blaster. We're leaving.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"diplomatic\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You shoot us, you answer to Lord Vader. Do it.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"intimidation\", \"from_faction\": [\"imperials\", \"sith\"], \"to_faction\": [\"imperials\", \"clones\"] },\r\n    { \"text\": \"We aren't worth the ammo, friend.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"diplomatic\", \"from_faction\": [\"rebels\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Touch us and this entire deck blows. Dead man's switch.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"rebels\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Back off. Now.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"intimidation\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We are simply lost. Point your weapon elsewhere.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"purpose\", \"style\": \"diplomatic\", \"from_faction\": [\"droids\", \"aliens\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I wouldn't do that if I were you. Look behind you.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"deceptive\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Bounty Guild target. Interfere and you're next.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"purpose\", \"style\": \"intimidation\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We're just cleaning up the mess YOU made.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"purpose\", \"style\": \"deflection\", \"from_faction\": [\"aliens\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Command will hear of this insubordination.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"intimidation\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"imperials\", \"clones\"] },\r\n    { \"text\": \"Don't look at us. We're just shadows.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"deceptive\", \"from_faction\": [\"takers\", \"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"We surrender! ... Just kidding.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"bluff\", \"from_faction\": [\"rebels\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Calm down. We are on the same side... mostly.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"diplomatic\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Your fear is delicious.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"suspicion\", \"style\": \"intimidation\", \"from_faction\": [\"sith\", \"takers\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"This is a restricted zone? We didn't see the sign.\", \"type\": [\"reply\"], \"attitude\": \"m1\", \"topic\": \"security\", \"style\": \"deflection\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversations\\m1_responses.json",
      "originalSize": 1357,
      "condensedSize": 1357,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/conversations/m1_responses.json. Bad/Combat Outcomes.\",\r\n  \"phrases\": [\r\n    { \"text\": \"Lies! Open fire!\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"I knew it! Blast them!\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Wrong answer.\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Take them down!\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"imperials\", \"clones\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Your parts will serve us well.\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"takers\", \"droids\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"You have failed me.\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"sith\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"This is the Way... to your death.\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"mandalorians\"], \"to_faction\": [\"any\"] },\r\n    { \"text\": \"Die, scum!\", \"type\": [\"response\"], \"attitude\": \"m1\", \"outcome\": \"combat\", \"from_faction\": [\"any\"], \"to_faction\": [\"any\"] }\r\n  ]\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\1_aliens.json",
      "originalSize": 51324,
      "condensedSize": 5181,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/1_aliens.json - Faction: aliens\",\n  \"base_type_defaults\": {\n    \"aliens_generic\": {\n      \"threat\": 1,\n      \"health\": 60,\n      \"melee_damage\": 5.5,\n      \"attack_cooldown\": 2.7,\n      \"attack_range\": 1.65,\n      \"accuracy\": 66,\n      \"perception_radius\": 27.5,\n      \"aggro\": 0.55,\n      \"speed\": 0.028,\n      \"collision_radius\": 0.5,\n      \"weight\": 88,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 88,\n      \"technical_understanding\": 33,\n      \"force_sensitivity\": 5.5,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0,\n      \"lie_attack\": 40,\n      \"lie_defense\": 40,\n      \"charm_attack\": 40,\n      \"...(more keys)\": \"2 additional properties\"\n    },\n    \"halfpints\": {\n      \"threat\": 1,\n      \"health\": 55,\n      \"melee_damage\": 2.2,\n      \"attack_cooldown\": 2.7,\n      \"attack_range\": 1.32,\n      \"accuracy\": 66,\n      \"perception_radius\": 22,\n      \"aggro\": 0.22,\n      \"speed\": 0.028,\n      \"collision_radius\": 0.3,\n      \"weight\": 33,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 33,\n      \"technical_understanding\": 11,\n      \"force_sensitivity\": 27.5,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0,\n      \"lie_attack\": 40,\n      \"lie_defense\": 30,\n      \"charm_attack\": 40,\n      \"...(more keys)\": \"1 additional properties\"\n    },\n    \"wookiee\": {\n      \"threat\": 1,\n      \"health\": 70,\n      \"melee_damage\": 11.2,\n      \"attack_cooldown\": 1.8,\n      \"attack_range\": 2.52,\n      \"accuracy\": 119,\n      \"perception_radius\": 42,\n      \"aggro\": 0.7,\n      \"speed\": 0.035,\n      \"collision_radius\": 0.6,\n      \"weight\": 168,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 210,\n      \"technical_understanding\": 56,\n      \"force_sensitivity\": 14,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0.75,\n      \"lie_attack\": 40,\n      \"lie_defense\": 40,\n      \"charm_attack\": 40,\n      \"...(more keys)\": \"1 additional properties\"\n    }\n  },\n  \"aliens_generic\": {\n    \"name\": \"Generic Aliens\",\n    \"baseType\": \"humanoid\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/generic/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(29 more items)\"\n    ]\n  },\n  \"gamorrean\": {\n    \"name\": \"Gamorrean\",\n    \"baseType\": \"gamorrean\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/gamorrean/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"gungan\": {\n    \"name\": \"Gungan\",\n    \"baseType\": \"gungan\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/gungan/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"moncalamari\": {\n    \"name\": \"Mon Calamari\",\n    \"baseType\": \"moncalamari\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/moncalamari/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  },\n  \"wookiee\": {\n    \"name\": \"Wookiee\",\n    \"baseType\": \"wookiee\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/wookiee/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(15 more items)\"\n    ]\n  },\n  \"halfpints\": {\n    \"name\": \"Half-Pints\",\n    \"baseType\": \"halfpint\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/halfpints/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(14 more items)\"\n    ]\n  },\n  \"hutt\": {\n    \"name\": \"Hutt\",\n    \"baseType\": \"hutt\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/hutt/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  },\n  \"quarterpints\": {\n    \"name\": \"Quarter-Pints\",\n    \"baseType\": \"quarterpint\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/humanoid/quarterpints/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  },\n  \"beasts\": {\n    \"name\": \"Alien Beasts\",\n    \"baseType\": \"beasts\",\n    \"minecraftModel\": \"humanoid\",\n    \"faction\": \"aliens\",\n    \"macroCategory\": \"Aliens\",\n    \"path\": \"aliens/beasts/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  }\n}",
      "compressionRatio": 0.10094692541501052,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\2_clones.json",
      "originalSize": 138051,
      "condensedSize": 1787,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/factionJSONs/2_clones.json - Faction: clones\",\n  \"base_type_defaults\": {\n    \"clone\": {\n      \"threat\": 1,\n      \"health\": 55,\n      \"melee_damage\": 5.5,\n      \"attack_cooldown\": 2.7,\n      \"attack_range\": 16.5,\n      \"accuracy\": 77,\n      \"perception_radius\": 33,\n      \"aggro\": 0.55,\n      \"speed\": 0.03,\n      \"collision_radius\": 0.5,\n      \"weight\": 88,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 88,\n      \"technical_understanding\": 82.5,\n      \"force_sensitivity\": 1.1,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0,\n      \"lie_attack\": 30,\n      \"lie_defense\": 50,\n      \"charm_attack\": 40,\n      \"...(more keys)\": \"3 additional properties\"\n    },\n    \"501st\": {\n      \"threat\": 4,\n      \"health\": 70,\n      \"melee_damage\": 6,\n      \"attack_cooldown\": 1.8,\n      \"attack_range\": 21,\n      \"accuracy\": 98,\n      \"perception_radius\": 42,\n      \"aggro\": 0.7,\n      \"speed\": 0.038,\n      \"collision_radius\": 0.5,\n      \"weight\": 112,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 112,\n      \"technical_understanding\": 105,\n      \"force_sensitivity\": 1.4,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0.75,\n      \"lie_attack\": 30,\n      \"lie_defense\": 50,\n      \"charm_attack\": 40,\n      \"...(more keys)\": \"3 additional properties\"\n    }\n  },\n  \"clones\": {\n    \"name\": \"Clones\",\n    \"baseType\": \"clone\",\n    \"faction\": \"clones\",\n    \"macroCategory\": \"Clones\",\n    \"path\": \"clones/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(283 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.012944491528493094,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\3_rebels.json",
      "originalSize": 27953,
      "condensedSize": 2887,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/factionJSONs/3_rebels.json - Faction: rebels\",\n  \"base_type_defaults\": {\n    \"human_female\": {\n      \"threat\": 3,\n      \"health\": 65,\n      \"melee_damage\": 3.9,\n      \"attack_cooldown\": 2.1,\n      \"attack_range\": 1.95,\n      \"accuracy\": 78,\n      \"perception_radius\": 32.5,\n      \"aggro\": 0.52,\n      \"speed\": 0.036,\n      \"collision_radius\": 0.45,\n      \"weight\": 91,\n      \"soundSet\": \"female\",\n      \"weight_lift\": 97.5,\n      \"technical_understanding\": 91,\n      \"force_sensitivity\": 6.5,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0.5,\n      \"default_weapon\": \"pistol_dh17_rebel.png\"\n    },\n    \"human_male\": {\n      \"threat\": 3,\n      \"health\": 65,\n      \"melee_damage\": 5.2,\n      \"attack_cooldown\": 2.1,\n      \"attack_range\": 1.95,\n      \"accuracy\": 78,\n      \"perception_radius\": 32.5,\n      \"aggro\": 0.52,\n      \"speed\": 0.036,\n      \"collision_radius\": 0.5,\n      \"weight\": 110.5,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 104,\n      \"technical_understanding\": 91,\n      \"force_sensitivity\": 6.5,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0.5,\n      \"default_weapon\": \"pistol_dh17_rebel.png\"\n    },\n    \"rebelnonhuman\": {\n      \"threat\": 2,\n      \"health\": 50,\n      \"melee_damage\": 4,\n      \"attack_cooldown\": 2.5,\n      \"attack_range\": 1.8,\n      \"accuracy\": 70,\n      \"perception_radius\": 30,\n      \"aggro\": 0.5,\n      \"speed\": 0.03,\n      \"collision_radius\": 0.4,\n      \"weight\": 80,\n      \"soundSet\": \"...(truncated)\",\n      \"weight_lift\": 90,\n      \"technical_understanding\": 80,\n      \"force_sensitivity\": 5,\n      \"special_moves\": \"...(truncated)\",\n      \"jump_strength\": 0.4,\n      \"default_weapon\": \"pistol_dl44_han.png\"\n    }\n  },\n  \"human_female\": {\n    \"name\": \"Females\",\n    \"baseType\": \"human_female\",\n    \"faction\": \"rebels\",\n    \"macroCategory\": \"Rebels\",\n    \"path\": \"humans/females/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(16 more items)\"\n    ]\n  },\n  \"human_male\": {\n    \"name\": \"Males\",\n    \"baseType\": \"human_male\",\n    \"faction\": \"rebels\",\n    \"macroCategory\": \"Rebels\",\n    \"path\": \"humans/males/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(19 more items)\"\n    ]\n  },\n  \"rebelnonhumans\": {\n    \"name\": \"Non-Humans\",\n    \"baseType\": \"rebelnonhuman\",\n    \"faction\": \"rebels\",\n    \"macroCategory\": \"Rebels\",\n    \"path\": \"humans/rebelnonhumans/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  }\n}",
      "compressionRatio": 0.10328050656459056,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\4_mandolorians.json",
      "originalSize": 21198,
      "condensedSize": 558,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/4_mandolorians.json - Faction: mandalorians\",\n  \"mandalorian\": {\n    \"name\": \"Mandalorians\",\n    \"baseType\": \"mandalorian\",\n    \"faction\": \"mandalorians\",\n    \"macroCategory\": \"Mandalorians\",\n    \"path\": \"mandolorians/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(20 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.026323238041324654,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\5_sith.json",
      "originalSize": 54053,
      "condensedSize": 498,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/5_sith.json - Faction: sith\",\n  \"darth\": {\n    \"name\": \"Sith\",\n    \"baseType\": \"darth\",\n    \"faction\": \"sith\",\n    \"macroCategory\": \"Sith\",\n    \"path\": \"sith/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(68 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.009213179657003311,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\6_imperials.json",
      "originalSize": 19234,
      "condensedSize": 1059,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/factionJSONs/6_imperials.json - Faction: imperials\",\n  \"imperial_officer\": {\n    \"name\": \"Imperial Officers\",\n    \"baseType\": \"stormtrooper\",\n    \"faction\": \"imperials\",\n    \"macroCategory\": \"Imperials\",\n    \"path\": \"stormtrooper/stormtrooper/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(11 more items)\"\n    ]\n  },\n  \"stormtrooper\": {\n    \"name\": \"Troopers\",\n    \"baseType\": \"stormtrooper\",\n    \"faction\": \"imperials\",\n    \"macroCategory\": \"Imperials\",\n    \"path\": \"stormtrooper/stormtrooper/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(28 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.055058750129978164,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\7_takers.json",
      "originalSize": 21905,
      "condensedSize": 507,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/factionJSONs/7_takers.json \",\n  \"takers\": {\n    \"name\": \"Takers\",\n    \"faction\": \"takers\",\n    \"baseType\": \"taker\",\n    \"macroCategory\": \"Takers\",\n    \"path\": \"takers/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(16 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.02314540059347181,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\factionJSONs\\8_droids.json",
      "originalSize": 53600,
      "condensedSize": 3489,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/skins/droids.json - Faction: droids\",\n  \"droid_humanoid\": {\n    \"name\": \"Humanoid Droids\",\n    \"baseType\": \"droid_humanoid\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/humanoid/generic/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(52 more items)\"\n    ]\n  },\n  \"r2d2\": {\n    \"name\": \"R2 Units\",\n    \"baseType\": \"r2d2\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/humanoid/r2d2/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"r5d4\": {\n    \"name\": \"R5 Units\",\n    \"baseType\": \"r5d4\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/humanoid/r5d4/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"irongolem\": {\n    \"name\": \"Large Droids\",\n    \"baseType\": \"irongolem\",\n    \"minecraftModel\": \"irongolem\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/irongolem/irongolem/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(13 more items)\"\n    ]\n  },\n  \"xerox\": {\n    \"name\": \"Xerox Droids\",\n    \"baseType\": \"irongolem\",\n    \"minecraftModel\": \"irongolem\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/irongolem/xerox/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  },\n  \"bb8\": {\n    \"name\": \"BB Units\",\n    \"baseType\": \"bb8\",\n    \"minecraftModel\": \"slime\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/slime/bb8/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"snowgolem\": {\n    \"name\": \"Snow Golem Droids\",\n    \"baseType\": \"snowgolem\",\n    \"minecraftModel\": \"snowgolem\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/snowgolem/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ]\n  },\n  \"gonk\": {\n    \"name\": \"Gonk Droids\",\n    \"baseType\": \"gonk\",\n    \"minecraftModel\": \"slime\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/slime/gonk/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  },\n  \"mousedroid\": {\n    \"name\": \"Mouse Droids\",\n    \"baseType\": \"mousedroid\",\n    \"minecraftModel\": \"slime\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/slime/mousedroid/\",\n    \"textures\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(3 more items)\"\n    ]\n  },\n  \"probe\": {\n    \"name\": \"Probe Droids\",\n    \"baseType\": \"probe\",\n    \"faction\": \"droids\",\n    \"macroCategory\": \"Droids\",\n    \"path\": \"droids/spider/probe/\",\n    \"textures\": [\n      \"...(truncated)\"\n    ]\n  }\n}",
      "compressionRatio": 0.06509328358208956,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\levels\\level_0_trashcompactor.json",
      "originalSize": 59256,
      "condensedSize": 1809,
      "content": "{\n  \"settings\": {\n    \"width\": 64,\n    \"height\": 128,\n    \"defaults\": {\n      \"skybox\": \"...(truncated)\"\n    }\n  },\n  \"layers\": {\n    \"floor\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(63 more items)\"\n    ],\n    \"water\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(31 more items)\"\n    ],\n    \"npcs\": [\n      \"...(truncated)\"\n    ],\n    \"wall\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(20 more items)\"\n    ],\n    \"door\": [\n      \"...(truncated)\"\n    ],\n    \"screen\": [\n      \"...(truncated)\"\n    ],\n    \"panel\": [\n      \"...(truncated)\"\n    ],\n    \"ceiling\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(49 more items)\"\n    ],\n    \"elevation\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(21 more items)\"\n    ],\n    \"spawns\": [\n      \"...(truncated)\"\n    ]\n  }\n}",
      "compressionRatio": 0.030528554070473876,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\levels\\level_1.json",
      "originalSize": 85214,
      "condensedSize": 2536,
      "content": "{\n  \"settings\": {\n    \"width\": 64,\n    \"height\": 128,\n    \"defaults\": {\n      \"skybox\": \"...(truncated)\"\n    }\n  },\n  \"layers\": {\n    \"floor\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(62 more items)\"\n    ],\n    \"floater\": [\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ],\n    \"npcs\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(40 more items)\"\n    ],\n    \"pillar\": [\n      \"...(truncated)\"\n    ],\n    \"wall\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(100 more items)\"\n    ],\n    \"door\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(40 more items)\"\n    ],\n    \"dock\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(1 more items)\"\n    ],\n    \"dangler\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\"\n    ],\n    \"elevation\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(2 more items)\"\n    ],\n    \"spawns\": [\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(truncated)\",\n      \"...(2 more items)\"\n    ]\n  }\n}",
      "compressionRatio": 0.02976036801464548,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\models\\creeper\\creeper.js",
      "originalSize": 2624,
      "condensedSize": 2624,
      "content": "// BROWSERFIREFOXHIDE data/models/creeper/creeper.js\nwindow.CreeperModel = {\n    name: 'creeper',\n    textureWidth: 64,\n    textureHeight: 32,\n    parts: {\n        head: { size: [8, 8, 8], uvOffset: [0, 0], position: [0, 18, 0], pivot: [0, 18, 0], parent: 'body' },\n        body: { size: [4, 12, 8], uvOffset: [16, 16], position: [0, 6, 0], pivot: [0, 12, 0], parent: null },\n        frontRightLeg: { size: [4, 6, 4], uvOffset: [0, 16], position: [-2, 0, -2], pivot: [-2, 6, -2], parent: 'body' },\n        frontLeftLeg: { size: [4, 6, 4], uvOffset: [0, 16], position: [2, 0, -2], pivot: [2, 6, -2], parent: 'body' },\n        backRightLeg: { size: [4, 6, 4], uvOffset: [0, 16], position: [-2, 0, 2], pivot: [-2, 6, 2], parent: 'body' },\n        backLeftLeg: { size: [4, 6, 4], uvOffset: [0, 16], position: [2, 0, 2], pivot: [2, 6, 2], parent: 'body' }\n    },\n    scale: 0.0625, animationSpeed: 1.0,\n    getUVMap: function(partName, isOverlay = false) {\n        if (isOverlay) return null;\n        const part = this.parts[partName];\n        if (!part || !part.uvOffset) return null;\n        const [width, height, depth] = part.size;\n        const [u, v] = part.uvOffset;\n        return {\n            left: [u, v + depth, depth, height], right: [u + depth + width, v + depth, depth, height],\n            top: [u + depth, v, width, depth], bottom: [u + depth + width, v, width, depth],\n            front: [u + depth, v + depth, width, height], back: [u + depth + width + depth, v + depth, width, height]\n        };\n    },\n    getGroundOffset: function(scaleY, modelScale, universalScale) { return 18 * scaleY * modelScale * universalScale; },\n    applyAnimation: function(character, animState, time, options) {\n        const parts = character.parts;\n        switch (animState) {\n            case 'walk':\n                const walk = Math.sin(time * 3);\n                if (parts.frontRightLeg) parts.frontRightLeg.rotation.x = walk * 0.6;\n                if (parts.frontLeftLeg) parts.frontLeftLeg.rotation.x = -walk * 0.6;\n                if (parts.backRightLeg) parts.backRightLeg.rotation.x = -walk * 0.6;\n                if (parts.backLeftLeg) parts.backLeftLeg.rotation.x = walk * 0.6;\n                break;\n            case 'idle':\n                if (parts.head) parts.head.rotation.y = Math.sin(time * 0.5) * 0.02;\n                break;\n            case 'attack':\n                const swell = 1.0 + Math.sin(time * 10) * 0.1;\n                Object.values(parts).forEach(p => p && p.scale && p.scale.set(swell, swell, swell));\n                break;\n        }\n    }\n};\nconsole.log('Creeper model definition loaded');\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\models\\irongolem\\irongolem.js",
      "originalSize": 7573,
      "condensedSize": 7573,
      "content": "// BROWSERFIREFOXHIDE data/models/irongolem/irongolem.js\n// Iron Golem model definition with proper Minecraft UV mapping\n// Texture size: 128x128 pixels\n// Uses standard Minecraft box UV layout formula\n\nwindow.IronGolemModel = {\n    name: 'irongolem',\n    textureWidth: 128,\n    textureHeight: 128,\n\n    // IMPORTANT: Parts are in MINECRAFT PIXEL UNITS (not game units!)\n    // The gonk_models.js will scale by: modelDef.scale * config.scale * universalScaleModifier(0.3)\n    // With scale=0.0625: 0.0625 * 1.0 * 0.3 = 0.01875 (converts MC pixels to game units)\n    // Iron Golem total height = ~41 pixels, so 41 * 0.01875 â‰ˆ 0.77 game units (too small)\n    // With scale=0.15: 0.15 * 1.0 * 0.3 = 0.045 â†’ 41 * 0.045 â‰ˆ 1.85 game units (good size)\n    parts: {\n        body: {\n            size: [18, 12, 11],            // ACTUAL: 18 wide x 12 tall x 11 deep (counted from texture)\n            pixelSize: [18, 12, 11],       // Same as size for UV mapping\n            uvOffset: [0, 40],\n            position: [0, 25, 0],          // Body center Y position in MC pixels\n            pivot: [0, 0, 0],              // Pivot at center of body\n            parent: null\n        },\n        nose: {\n            size: [2, 4, 2],               // Nose sticks out front\n            pixelSize: [2, 4, 2],\n            uvOffset: [24, 0],             // Nose UV position\n            position: [0, 2, 5],           // Front of head (positive Z is front in THREE.js)\n            pivot: [0, 0, 0],\n            parent: 'head'\n        },\n        head: {\n            size: [8, 10, 8],              // Head dimensions\n            pixelSize: [8, 10, 8],\n            uvOffset: [0, 0],\n            position: [0, 6, 0],           // Position of pivot point relative to parent (body top = body half = 6)\n            pivot: [0, -5, 0],             // Pivot at bottom of head (attach to body top)\n            parent: 'body'\n        },\n        waist: {\n            size: [9, 5, 6],               // Waist/crotch area - smaller than body\n            pixelSize: [9, 5, 6],\n            uvOffset: [0, 70],\n            // FORMULA: Parent bottom edge is at -parentHeight/2 = -6\n            // We want 0.5 pixel overlap, so position.y = -6 + 0.5 = -5.5\n            // Pivot at top of waist (2.5 from center), so mesh will extend down from there\n            position: [0, -5.5, 0],\n            pivot: [0, 2.5, 0],            // Pivot at top of waist\n            parent: 'body'\n        },\n        rightArm: {\n            size: [4, 30, 6],              // Very long arms!\n            pixelSize: [4, 30, 6],\n            uvOffset: [60, 21],\n            position: [-11, 6, 0],         // Right side of body (body half width 9 + arm half 2)\n            pivot: [0, 15, 0],             // Pivot at top (shoulder joint)\n            parent: 'body'\n        },\n        leftArm: {\n            size: [4, 30, 6],\n            pixelSize: [4, 30, 6],\n            uvOffset: [60, 58],\n            position: [11, 6, 0],          // Left side of body\n            pivot: [0, 15, 0],             // Pivot at top (shoulder joint)\n            parent: 'body'\n        },\n        rightLeg: {\n            size: [6, 16, 5],              // Legs\n            pixelSize: [6, 16, 5],\n            uvOffset: [37, 0],\n            // FORMULA: Waist partGroup origin at 19.5, mesh offset by -2.5, so waist center at 17\n            // Waist bottom at 17 - 2.5 = 14.5\n            // Leg pivot should be at waist bottom + 0.5 overlap = 15\n            // Position relative to waist partGroup (19.5) = 15 - 19.5 = -4.5\n            position: [-3, -4.5, 0],\n            pivot: [0, 8, 0],              // Pivot at top (hip joint)\n            parent: 'waist'\n        },\n        leftLeg: {\n            size: [6, 16, 5],\n            pixelSize: [6, 16, 5],\n            uvOffset: [60, 0],\n            position: [3, -4.5, 0],        // Under waist, left side\n            pivot: [0, 8, 0],              // Pivot at top (hip joint)\n            parent: 'waist'\n        }\n    },\n\n    scale: 0.15,  // Scales MC pixels to game units: 0.15 * 0.3 = 0.045 per pixel\n    animationSpeed: 2.0,\n\n    // UV mapping using standard Minecraft box UV layout formula\n    // For a box with pixel size [width, height, depth] at uvOffset [u, v]:\n    // Layout on texture (horizontally): left | front | right | back\n    // Layout on texture (vertically): top/bottom above front/right\n    getUVMap: function(partName, isOverlay = false) {\n        // Iron Golem has no overlay layer\n        if (isOverlay) return null;\n\n        const part = this.parts[partName];\n        if (!part || !part.uvOffset || !part.pixelSize) return null;\n\n        // Use pixel dimensions for UV mapping, not game-unit dimensions\n        const [width, height, depth] = part.pixelSize;\n        const [u, v] = part.uvOffset;\n\n        // Standard Minecraft box UV layout formula\n        // Maps pixel coordinates [x, y, w, h] for each face\n        return {\n            left:   [u, v + depth, depth, height],                         // -X face\n            right:  [u + depth + width, v + depth, depth, height],         // +X face\n            top:    [u + depth, v, width, depth],                          // +Y face\n            bottom: [u + depth + width, v, width, depth],                  // -Y face\n            front:  [u + depth, v + depth, width, height],                 // +Z face\n            back:   [u + depth + width + depth, v + depth, width, height]  // -Z face\n        };\n    },\n\n    // Calculate ground offset (how high model stands)\n    getGroundOffset: function(scaleY, modelScale, universalScale) {\n        // CALCULATION: Trace from character.group origin to feet bottom\n        // Body partGroup at Y=25, waist partGroup at 25-5.5=19.5\n        // Leg partGroup at 19.5-4.5=15, leg mesh offset by -8, so leg center at 15-8=7\n        // Leg bottom at 7-8=-1\n        // Feet are at Y=-1 (below group origin), so we LIFT by 1 pixel\n        return 1 * scaleY * modelScale * universalScale;\n    },\n\n    // Custom animation for iron golem (slower, heavier movement)\n    applyAnimation: function(character, animState, time, options) {\n        const parts = character.parts;\n\n        switch (animState) {\n            case 'walk':\n                const walk = Math.sin(time * 0.8); // Slower walk\n                if (parts.rightLeg) parts.rightLeg.rotation.x = walk * 0.4;\n                if (parts.leftLeg) parts.leftLeg.rotation.x = -walk * 0.4;\n                if (parts.rightArm) parts.rightArm.rotation.x = -walk * 0.3;\n                if (parts.leftArm) parts.leftArm.rotation.x = walk * 0.3;\n                break;\n            case 'idle':\n                const sway = Math.sin(time * 0.2) * 0.03;\n                if (parts.rightArm) parts.rightArm.rotation.z = sway;\n                if (parts.leftArm) parts.leftArm.rotation.z = -sway;\n                if (parts.head) parts.head.rotation.y = Math.sin(time * 0.3) * 0.1;\n                break;\n            case 'attack':\n            case 'melee':\n                const attackProgress = Math.min(character.animTime / 0.8, 1.0);\n                const swingAngle = Math.sin(attackProgress * Math.PI) * -1.5; // Big overhead swing\n                if (parts.rightArm) parts.rightArm.rotation.x = swingAngle;\n                if (parts.leftArm) parts.leftArm.rotation.x = swingAngle;\n                if (parts.body) parts.body.rotation.x = Math.sin(attackProgress * Math.PI) * 0.3;\n                break;\n            default:\n                // Reset to default pose\n                break;\n        }\n    }\n};\n\nconsole.log('Iron Golem model definition loaded');\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\models\\pig\\pig.js",
      "originalSize": 5267,
      "condensedSize": 5267,
      "content": "// BROWSERFIREFOXHIDE data/models/pig/pig.js\r\n// Pig model definition with proper Minecraft UV mapping\r\n// Texture size: 64x32 pixels (classic Minecraft mob format)\r\n\r\nwindow.PigModel = {\r\n    name: 'pig',\r\n    textureWidth: 64,\r\n    textureHeight: 32,\r\n\r\n    parts: {\r\n        head: {\r\n            size: [8, 8, 8],\r\n            position: [0, 8, -7],\r\n            pivot: [0, 12, -6],\r\n            parent: 'body'\r\n        },\r\n        snout: {\r\n            // Pig's distinctive nose\r\n            size: [4, 3, 1],\r\n            position: [0, 7, -11],\r\n            pivot: [0, 9, -11],\r\n            parent: 'head'\r\n        },\r\n        body: {\r\n            size: [10, 16, 8],\r\n            position: [0, 5.5, 0],\r\n            pivot: [0, 13, 0],\r\n            parent: null,\r\n            rotation: [Math.PI / 2, 0, 0] // Body is horizontal\r\n        },\r\n        rightFrontLeg: {\r\n            size: [4, 6, 4],\r\n            position: [-3, 0, -5],\r\n            pivot: [-3, 6, -5],\r\n            parent: null\r\n        },\r\n        leftFrontLeg: {\r\n            size: [4, 6, 4],\r\n            position: [3, 0, -5],\r\n            pivot: [3, 6, -5],\r\n            parent: null\r\n        },\r\n        rightBackLeg: {\r\n            size: [4, 6, 4],\r\n            position: [-3, 0, 7],\r\n            pivot: [-3, 6, 7],\r\n            parent: null\r\n        },\r\n        leftBackLeg: {\r\n            size: [4, 6, 4],\r\n            position: [3, 0, 7],\r\n            pivot: [3, 6, 7],\r\n            parent: null\r\n        }\r\n    },\r\n\r\n    scale: 0.0625,\r\n    animationSpeed: 3.0,\r\n\r\n    // UV mapping for Pig texture (64x32)\r\n    // Standard Minecraft pig layout\r\n    getUVMap: function(partName, isOverlay = false) {\r\n        if (isOverlay) return null;\r\n\r\n        const uvMaps = {\r\n            head: {\r\n                right:  [0, 8, 8, 8],\r\n                left:   [16, 8, 8, 8],\r\n                top:    [8, 0, 8, 8],\r\n                bottom: [16, 0, 8, 8],\r\n                front:  [8, 8, 8, 8],\r\n                back:   [24, 8, 8, 8]\r\n            },\r\n            snout: {\r\n                // Snout UV on pig texture\r\n                right:  [16, 17, 1, 3],\r\n                left:   [21, 17, 1, 3],\r\n                top:    [17, 16, 4, 1],\r\n                bottom: [21, 16, 4, 1],\r\n                front:  [17, 17, 4, 3],\r\n                back:   [22, 17, 4, 3]\r\n            },\r\n            body: {\r\n                // Body is rotated 90 degrees in model space\r\n                right:  [28, 8, 8, 16],\r\n                left:   [52, 8, 8, 16],\r\n                top:    [36, 8, 10, 8],   // Actually back when rotated\r\n                bottom: [46, 8, 10, 8],   // Actually belly when rotated\r\n                front:  [36, 16, 10, 8],\r\n                back:   [56, 16, 10, 8]\r\n            },\r\n            rightFrontLeg: {\r\n                right:  [0, 20, 4, 6],\r\n                left:   [8, 20, 4, 6],\r\n                top:    [4, 16, 4, 4],\r\n                bottom: [8, 16, 4, 4],\r\n                front:  [4, 20, 4, 6],\r\n                back:   [12, 20, 4, 6]\r\n            },\r\n            leftFrontLeg: {\r\n                // Same UV as right (mirrored in geometry)\r\n                right:  [0, 20, 4, 6],\r\n                left:   [8, 20, 4, 6],\r\n                top:    [4, 16, 4, 4],\r\n                bottom: [8, 16, 4, 4],\r\n                front:  [4, 20, 4, 6],\r\n                back:   [12, 20, 4, 6]\r\n            },\r\n            rightBackLeg: {\r\n                right:  [0, 20, 4, 6],\r\n                left:   [8, 20, 4, 6],\r\n                top:    [4, 16, 4, 4],\r\n                bottom: [8, 16, 4, 4],\r\n                front:  [4, 20, 4, 6],\r\n                back:   [12, 20, 4, 6]\r\n            },\r\n            leftBackLeg: {\r\n                right:  [0, 20, 4, 6],\r\n                left:   [8, 20, 4, 6],\r\n                top:    [4, 16, 4, 4],\r\n                bottom: [8, 16, 4, 4],\r\n                front:  [4, 20, 4, 6],\r\n                back:   [12, 20, 4, 6]\r\n            }\r\n        };\r\n\r\n        return uvMaps[partName] || null;\r\n    },\r\n\r\n    getGroundOffset: function(scaleY, modelScale, universalScale) {\r\n        return 6 * scaleY * modelScale * universalScale;\r\n    },\r\n\r\n    applyAnimation: function(character, animState, time, options) {\r\n        const parts = character.parts;\r\n\r\n        switch (animState) {\r\n            case 'walk':\r\n                const walk = Math.sin(time * 2);\r\n                if (parts.rightFrontLeg) parts.rightFrontLeg.rotation.x = walk * 0.6;\r\n                if (parts.leftFrontLeg) parts.leftFrontLeg.rotation.x = -walk * 0.6;\r\n                if (parts.rightBackLeg) parts.rightBackLeg.rotation.x = -walk * 0.6;\r\n                if (parts.leftBackLeg) parts.leftBackLeg.rotation.x = walk * 0.6;\r\n                if (parts.head) parts.head.rotation.y = Math.sin(time) * 0.1;\r\n                break;\r\n            case 'idle':\r\n                // Pig looks around, ears twitch\r\n                const look = Math.sin(time * 0.5) * 0.3;\r\n                if (parts.head) {\r\n                    parts.head.rotation.y = look;\r\n                    parts.head.rotation.x = Math.sin(time * 0.8) * 0.05;\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n};\r\n\r\nconsole.log('Pig model definition loaded');\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\models\\slime\\slime.js",
      "originalSize": 4596,
      "condensedSize": 4596,
      "content": "// BROWSERFIREFOXHIDE data/models/slime/slime.js\n// Slime model definition with proper Minecraft UV mapping\n// Texture size: 64x32 pixels\n// Uses standard Minecraft box UV layout formula\n\nwindow.SlimeModel = {\n    name: 'slime',\n    textureWidth: 64,\n    textureHeight: 32,\n\n    // Parts in game units (Minecraft pixels * 0.07)\n    parts: {\n        slimeOuter: {\n            size: [0.56, 0.56, 0.56],      // 8x8x8 pixels * 0.07\n            pixelSize: [8, 8, 8],\n            uvOffset: [0, 0],\n            position: [0, 0.28, 0],         // Center of slime\n            pivot: [0, 0, 0],\n            parent: null,\n            transparent: true\n        },\n        slimeInner: {\n            size: [0.42, 0.42, 0.42],      // 6x6x6 pixels * 0.07\n            pixelSize: [6, 6, 6],\n            uvOffset: [0, 16],\n            position: [0, 0, 0],            // Same center as outer\n            pivot: [0, 0, 0],\n            parent: 'slimeOuter'\n        },\n        rightEye: {\n            size: [0.14, 0.14, 0.14],      // 2x2x2 pixels * 0.07\n            pixelSize: [2, 2, 2],\n            uvOffset: [32, 0],\n            position: [-0.105, 0.07, -0.245],  // Front right\n            pivot: [0, 0, 0],\n            parent: 'slimeOuter'\n        },\n        leftEye: {\n            size: [0.14, 0.14, 0.14],      // 2x2x2 pixels * 0.07\n            pixelSize: [2, 2, 2],\n            uvOffset: [32, 0],\n            position: [0.105, 0.07, -0.245],   // Front left\n            pivot: [0, 0, 0],\n            parent: 'slimeOuter'\n        },\n        mouth: {\n            size: [0.07, 0.07, 0.07],      // 1x1x1 pixels * 0.07\n            pixelSize: [1, 1, 1],\n            uvOffset: [32, 4],\n            position: [0, -0.07, -0.245],      // Front center lower\n            pivot: [0, 0, 0],\n            parent: 'slimeOuter'\n        }\n    },\n\n    scale: 1.0,  // Already in game units\n    animationSpeed: 1.5,\n\n    getUVMap: function(partName, isOverlay = false) {\n        if (isOverlay) return null;\n        const part = this.parts[partName];\n        if (!part || !part.uvOffset || !part.pixelSize) return null;\n        const [width, height, depth] = part.pixelSize;  // Use pixel dimensions\n        const [u, v] = part.uvOffset;\n        return {\n            left:   [u, v + depth, depth, height],\n            right:  [u + depth + width, v + depth, depth, height],\n            top:    [u + depth, v, width, depth],\n            bottom: [u + depth + width, v, width, depth],\n            front:  [u + depth, v + depth, width, height],\n            back:   [u + depth + width + depth, v + depth, width, height]\n        };\n    },\n\n    getGroundOffset: function(scaleY, modelScale, universalScale) {\n        return 0.0;  // Position already accounts for ground placement\n    },\n\n    applyAnimation: function(character, animState, time, options) {\n        const parts = character.parts;\n        const baseY = 0.28;  // Base Y position in game units\n        switch (animState) {\n            case 'walk':\n            case 'jump':\n                const jumpPhase = time % 2.0;\n                let scaleY = 1.0, scaleXZ = 1.0, yOffset = 0;\n                if (jumpPhase < 0.2) {\n                    const t = jumpPhase / 0.2;\n                    scaleY = 1.0 - t * 0.5;\n                    scaleXZ = 1.0 + t * 0.3;\n                } else if (jumpPhase < 0.6) {\n                    const t = (jumpPhase - 0.2) / 0.4;\n                    scaleY = 0.5 + t * 0.3;\n                    scaleXZ = 1.3 - t * 0.2;\n                    yOffset = Math.sin(t * Math.PI) * 0.56;  // Jump height in game units\n                } else if (jumpPhase < 0.8) {\n                    const t = (jumpPhase - 0.6) / 0.2;\n                    scaleY = 0.8 - t * 0.3;\n                    scaleXZ = 1.1 + t * 0.2;\n                } else {\n                    const t = (jumpPhase - 0.8) / 0.2;\n                    scaleY = 0.5 + t * 0.5;\n                    scaleXZ = 1.3 - t * 0.3;\n                }\n                if (parts.slimeOuter) {\n                    parts.slimeOuter.scale.set(scaleXZ, scaleY, scaleXZ);\n                    parts.slimeOuter.position.y = baseY + yOffset;\n                }\n                break;\n            case 'idle':\n                const wobble = Math.sin(time * 2) * 0.05;\n                if (parts.slimeOuter) {\n                    parts.slimeOuter.scale.set(1.0 + wobble, 1.0 - wobble, 1.0 + wobble);\n                }\n                break;\n            default:\n                if (parts.slimeOuter) parts.slimeOuter.scale.set(1, 1, 1);\n                break;\n        }\n    }\n};\nconsole.log('Slime model definition loaded');\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\models\\snowgolem\\snowgolem.js",
      "originalSize": 3969,
      "condensedSize": 3969,
      "content": "// BROWSERFIREFOXHIDE data/models/snowgolem/snowgolem.js\n// Snow Golem model - 64x64 texture\nwindow.SnowGolemModel = {\n    name: 'snowgolem',\n    textureWidth: 64,\n    textureHeight: 64,\n    // Parts in game units (Minecraft pixels * 0.07)\n    parts: {\n        body: {\n            size: [0.84, 0.84, 0.84],      // 12x12x12 pixels * 0.07\n            pixelSize: [12, 12, 12],\n            uvOffset: [0, 16],\n            position: [0, 0.98, 0],         // Middle body section\n            pivot: [0, 0, 0],\n            parent: null\n        },\n        head: {\n            size: [0.56, 0.56, 0.56],      // 8x8x8 pixels * 0.07\n            pixelSize: [8, 8, 8],\n            uvOffset: [0, 0],\n            position: [0, 0.70, 0],         // On top of body\n            pivot: [0, -0.28, 0],           // Pivot at bottom of head\n            parent: 'body'\n        },\n        bottomBody: {\n            size: [0.98, 0.70, 0.98],      // 14x10x14 pixels * 0.07\n            pixelSize: [14, 10, 14],\n            uvOffset: [0, 36],\n            position: [0, -0.77, 0],        // Below body\n            pivot: [0, 0.35, 0],            // Pivot at top\n            parent: 'body'\n        },\n        rightArm: {\n            size: [0.14, 0.84, 0.14],      // 2x12x2 pixels * 0.07 (stick arms!)\n            pixelSize: [2, 12, 2],\n            uvOffset: [32, 0],\n            position: [-0.49, 0.35, 0],     // Right side of body\n            pivot: [0, 0.42, 0],            // Pivot at top (shoulder)\n            parent: 'body'\n        },\n        leftArm: {\n            size: [0.14, 0.84, 0.14],      // 2x12x2 pixels * 0.07 (stick arms!)\n            pixelSize: [2, 12, 2],\n            uvOffset: [32, 0],\n            position: [0.49, 0.35, 0],      // Left side of body\n            pivot: [0, 0.42, 0],            // Pivot at top (shoulder)\n            parent: 'body'\n        }\n    },\n    scale: 1.0,  // Already in game units\n    animationSpeed: 1.2,\n    getUVMap: function(partName, isOverlay = false) {\n        if (isOverlay) return null;\n        const part = this.parts[partName];\n        if (!part || !part.uvOffset || !part.pixelSize) return null;\n        const [width, height, depth] = part.pixelSize;  // Use pixel dimensions\n        const [u, v] = part.uvOffset;\n        return {\n            left:   [u, v + depth, depth, height],\n            right:  [u + depth + width, v + depth, depth, height],\n            top:    [u + depth, v, width, depth],\n            bottom: [u + depth + width, v, width, depth],\n            front:  [u + depth, v + depth, width, height],\n            back:   [u + depth + width + depth, v + depth, width, height]\n        };\n    },\n    getGroundOffset: function(scaleY, modelScale, universalScale) {\n        return 0.0;  // Position already accounts for ground placement\n    },\n    applyAnimation: function(character, animState, time, options) {\n        const parts = character.parts;\n        switch (animState) {\n            case 'walk':\n                const bob = Math.abs(Math.sin(time * 3)) * 0.5;\n                if (parts.body) parts.body.position.y = 8 + bob;\n                const armSwing = Math.sin(time * 3) * 0.3;\n                if (parts.rightArm) parts.rightArm.rotation.x = armSwing;\n                if (parts.leftArm) parts.leftArm.rotation.x = -armSwing;\n                break;\n            case 'idle':\n                const sway = Math.sin(time * 0.5) * 0.05;\n                if (parts.head) parts.head.rotation.y = sway;\n                if (parts.rightArm) parts.rightArm.rotation.z = -0.1 + Math.sin(time * 0.3) * 0.05;\n                if (parts.leftArm) parts.leftArm.rotation.z = 0.1 - Math.sin(time * 0.3) * 0.05;\n                break;\n            case 'attack':\n                const throwAnim = Math.sin(time * 8) * 1.2;\n                if (parts.rightArm) parts.rightArm.rotation.x = throwAnim;\n                break;\n            default:\n                break;\n        }\n    }\n};\nconsole.log('Snow Golem model definition loaded');\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\0_globals.json",
      "originalSize": 227,
      "condensedSize": 227,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/0_globals.json \",\n  \"defaults\": {\n    \"scale_x\": 1,\n    \"scale_y\": 1,\n    \"scale_z\": 1,\n    \"y_offset\": 0,\n    \"speed_multiplier\": 1,\n    \"flyspeed\": 0,\n    \"permanent_ally\": false\n  }\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\editor_config.json",
      "originalSize": 3059,
      "condensedSize": 3059,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/editor_config.json - Editor UI configuration and asset paths\",\r\n\r\n  \"furnitureIconPatterns\": [\r\n    \"/data/furniture/textures/blocks/${modelKey}pic.png\",\r\n    \"/data/furniture/textures/items/${modelKey}pic.png\",\r\n    \"/data/furniture/textures/blocks/${modelKey}_pic.png\",\r\n    \"/data/furniture/textures/items/${modelKey}_pic.png\"\r\n  ],\r\n\r\n  \"layerIcons\": {\r\n    \"assets\": \"/data/pngs/icons for UI/crate.png\",\r\n    \"spawns\": \"/data/pngs/icons for UI/spawn/hologonk_1.png\",\r\n    \"wall\": \"/data/pngs/icons for UI/wallsicon.png\",\r\n    \"door\": \"/data/pngs/icons for UI/dooricon.png\",\r\n    \"dock\": \"/data/pngs/icons for UI/dockicon.png\",\r\n    \"panel\": \"/data/pngs/icons for UI/panelicon.png\",\r\n    \"screen\": \"/data/pngs/icons for UI/screenicon.png\",\r\n    \"elevation\": \"/data/pngs/icons for UI/elevationicon.png\",\r\n    \"skybox\": \"/data/pngs/icons for UI/skyboxicon.png\",\r\n    \"ceiling\": \"/data/pngs/icons for UI/ceilingicon.png\",\r\n    \"pillar\": \"/data/pngs/icons for UI/pillaricon.png\",\r\n    \"enemy_spawn_points\": \"/data/pngs/icons for UI/NPCspawnericon.png\"\r\n  },\r\n\r\n  \"factionIcons\": {\r\n    \"Takers\": \"/data/pngs/icons for UI/factions/takersicon.png\",\r\n    \"Imperials\": \"/data/pngs/icons for UI/stormiesicon.png\",\r\n    \"Sith\": \"/data/pngs/icons for UI/factions/darthsicon.png\",\r\n    \"Clones\": \"/data/pngs/factions/clones/i1/clone_1.png\",\r\n    \"Droids\": \"/data/pngs/icons for UI/droidicon.png\",\r\n    \"Mandalorians\": \"/data/pngs/factions/mandalorians/i1/mando_1.png\",\r\n    \"Aliens\": \"/data/pngs/icons for UI/aliensicon.png\",\r\n    \"Rebels\": \"/data/pngs/icons for UI/humanicon.png\"\r\n  },\r\n\r\n  \"brushIcons\": {\r\n    \"1\": \"singlebrushicon\",\r\n    \"2\": \"2x2brushicon\",\r\n    \"3\": \"3x3brushicon\",\r\n    \"4\": \"4x4brushicon\"\r\n  },\r\n\r\n  \"toolIcons\": {\r\n    \"angle\": \"/data/pngs/icons for UI/angleicon.png\",\r\n    \"grid\": \"/data/pngs/icons for UI/gridicon.png\",\r\n    \"spawn_arrow\": \"/data/pngs/icons for UI/spawn_arrow.png\",\r\n    \"crate\": \"/data/pngs/icons for UI/crate.png\"\r\n  },\r\n\r\n  \"defaultTextures\": {\r\n    \"floor\": \"/data/pngs/floor/floor_2.png\",\r\n    \"ceiling\": \"/data/pngs/ceiling/ceiling_1.png\",\r\n    \"elevationside_default\": \"/data/pngs/elevationsides/eside_default.png\",\r\n    \"ceilingside_default\": \"/data/pngs/ceilingsides/cside_default.png\",\r\n    \"wall2_default\": \"/data/pngs/wall/wall2/w2_default.png\",\r\n    \"wall3_default\": \"/data/pngs/wall/wall3/wall3_default.png\"\r\n  },\r\n\r\n  \"styleWallMappings\": {\r\n    \"wall2\": {\r\n      \"imperialstyle\": \"/data/pngs/wall/wall2/imperialwall2.png\",\r\n      \"neutralstyle\": \"/data/pngs/wall/wall2/neutralwall2.png\",\r\n      \"rebelstyle\": \"/data/pngs/wall/wall2/rebelwall2.png\"\r\n    },\r\n    \"wall3\": {\r\n      \"imperialstyle\": \"/data/pngs/wall/wall3/imperialwall3.png\",\r\n      \"neutralstyle\": \"/data/pngs/wall/wall3/neutralwall3.png\",\r\n      \"rebelstyle\": \"/data/pngs/wall/wall3/rebelwall3.png\"\r\n    }\r\n  },\r\n\r\n  \"furnitureIconOverrides\": {\r\n    \"whitewallovals\": \"whiteovalspic.png\",\r\n    \"whitewallpanel\": \"whitewallpanelpic.png\",\r\n    \"yellowempirelight\": \"yellowempirelightpic.png\"\r\n  }\r\n}\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\end_of_level_perks.json",
      "originalSize": 1079,
      "condensedSize": 1079,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/end_of_level_perks.json\",\n  \"perks\": [\n    {\n      \"id\": \"heal_self_for_wire\",\n      \"type\": \"heal\",\n      \"target\": \"player\",\n      \"title\": \"Pay for Treatment\",\n      \"description\": \"Heal to full. Cost: 1 Wire per 2% health restored. Must be able to afford the full amount.\"\n    },\n    {\n      \"id\": \"heal_top_allies\",\n      \"type\": \"heal\",\n      \"target\": \"allies\",\n      \"title\": \"Field Triage\",\n      \"description\": \"Heal your two most-injured allies to full health for free.\"\n    },\n    {\n      \"id\": \"temp_speed_boost\",\n      \"type\": \"buff\",\n      \"target\": \"player\",\n      \"stat\": \"speed\",\n      \"modifier\": 1.10,\n      \"duration\": 3,\n      \"title\": \"Fleet Footed\",\n      \"description\": \"Increase your movement speed by 10% for the next 3 ships.\"\n    },\n    {\n      \"id\": \"repair_damaged_node\",\n      \"type\": \"special\",\n      \"target\": \"player\",\n      \"title\": \"Repair Node Damaged by DroidSlayer\",\n      \"description\": \"Repair the upgrade node that was damaged by the DroidSlayer, allowing you to purchase it again.\"\n    }\n  ]\n}\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\faction_attitudes.json",
      "originalSize": 438,
      "condensedSize": 438,
      "content": "{\n  \"_comment\": \"Defines the numerical thresholds for relationship attitudes. The system checks from HIGHEST threshold to LOWEST. The first threshold a score is GREATER THAN OR EQUAL TO is the attitude it gets. Score is 0 (friendly) to 100 (hostile).\",\n  \"attitudes\": [\n    {\n      \"name\": \"m1\",\n      \"threshold\": 75\n    },\n    {\n      \"name\": \"i1\",\n      \"threshold\": 25\n    },\n    {\n      \"name\": \"h1\",\n      \"threshold\": 0\n    }\n  ]\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\faction_config.json",
      "originalSize": 7258,
      "condensedSize": 7258,
      "content": "{\r\n  \"_comment\": \"data/faction_config.json Centralized configuration for all NPC-usable weapons. Non-listed weapons inherit category defaults. DPS balanced to 10 standard, 25 max.\",\r\n  \"factions\": {\r\n    \"player_droid\": {\r\n      \"name\": \"Gonk Pope\",\r\n      \"homePosition\": {\r\n        \"x\": 55,\r\n        \"y\": 6\r\n      },\r\n      \"isStatic\": true,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.2,\r\n      \"homeRadius\": 0,\r\n      \"pushForces\": {\r\n        \"aliens\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    },\r\n    \"rebels\": {\r\n      \"name\": \"Rebels\",\r\n      \"homePosition\": {\r\n        \"x\": 90,\r\n        \"y\": 46\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.29,\r\n      \"homeRadius\": 3,\r\n      \"pushForces\": {\r\n        \"droids\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 22,\r\n          \"radius\": 47\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 15,\r\n          \"radius\": 8\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 28,\r\n          \"radius\": 47\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    },\r\n    \"droids\": {\r\n      \"name\": \"Droids\",\r\n      \"homePosition\": {\r\n        \"x\": 40,\r\n        \"y\": 0\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.2,\r\n      \"homeRadius\": 3,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 38,\r\n          \"radius\": 30\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"sith\": {\r\n          \"radius\": 10,\r\n          \"strength\": 13\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    },\r\n    \"clones\": {\r\n      \"name\": \"Clones\",\r\n      \"homePosition\": {\r\n        \"x\": 40,\r\n        \"y\": 85\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.2,\r\n      \"homeRadius\": 3,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 38,\r\n          \"radius\": 30\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 24,\r\n          \"radius\": 8\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 45,\r\n          \"radius\": 17\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 35,\r\n          \"radius\": 18\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    },\r\n    \"imperials\": {\r\n      \"name\": \"Imperials\",\r\n      \"homePosition\": {\r\n        \"x\": 8,\r\n        \"y\": 49\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.33,\r\n      \"homeRadius\": 2,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 22,\r\n          \"radius\": 49\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 24,\r\n          \"radius\": 8\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 56,\r\n          \"radius\": 15\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 15,\r\n          \"radius\": 7\r\n        }\r\n      }\r\n    },\r\n    \"aliens\": {\r\n      \"name\": \"Aliens\",\r\n      \"homePosition\": {\r\n        \"x\": 85,\r\n        \"y\": 70\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.2,\r\n      \"homeRadius\": 3,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 15,\r\n          \"radius\": 8\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 38,\r\n          \"radius\": 30\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 38,\r\n          \"radius\": 8\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 24,\r\n          \"radius\": 10\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"player_droid\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    },\r\n    \"mandalorians\": {\r\n      \"name\": \"Mandalorians\",\r\n      \"homePosition\": {\r\n        \"x\": 70,\r\n        \"y\": 85\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.22,\r\n      \"homeRadius\": 5,\r\n      \"pushForces\": {\r\n        \"imperials\": {\r\n          \"strength\": 56,\r\n          \"radius\": 15\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 30,\r\n          \"radius\": 23\r\n        },\r\n        \"rebels\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 24,\r\n          \"radius\": 10\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 26,\r\n          \"radius\": 14\r\n        }\r\n      }\r\n    },\r\n    \"takers\": {\r\n      \"name\": \"Takers\",\r\n      \"homePosition\": {\r\n        \"x\": 5,\r\n        \"y\": 100\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.2,\r\n      \"homeRadius\": 4,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 45,\r\n          \"radius\": 17\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 45,\r\n          \"radius\": 38\r\n        },\r\n        \"aliens\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"sith\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 26,\r\n          \"radius\": 14\r\n        }\r\n      }\r\n    },\r\n    \"sith\": {\r\n      \"name\": \"Sith\",\r\n      \"homePosition\": {\r\n        \"x\": 25,\r\n        \"y\": 30\r\n      },\r\n      \"isStatic\": false,\r\n      \"mass\": 1,\r\n      \"elasticity\": 0.1,\r\n      \"homeRadius\": 2,\r\n      \"pushForces\": {\r\n        \"rebels\": {\r\n          \"strength\": 28,\r\n          \"radius\": 60\r\n        },\r\n        \"clones\": {\r\n          \"strength\": 35,\r\n          \"radius\": 8\r\n        },\r\n        \"mandalorians\": {\r\n          \"strength\": 30,\r\n          \"radius\": 23\r\n        },\r\n        \"droids\": {\r\n          \"strength\": 13,\r\n          \"radius\": 10\r\n        },\r\n        \"takers\": {\r\n          \"strength\": 10,\r\n          \"radius\": 10\r\n        },\r\n        \"imperials\": {\r\n          \"strength\": 15,\r\n          \"radius\": 10\r\n        }\r\n      }\r\n    }\r\n  }\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\furniture.json",
      "originalSize": 984,
      "condensedSize": 984,
      "content": "{\n  \"_comment\": \"This file is a template to procedurally generate new levels.\",\n  \"__ahk_meta__\": {\n    \"hidden_command\": \"BROWSERFIREFOXHIDE\",\n    \"filename\": \"data/furniture.json\"\n  },\n  \"_config\": {\n    \"modelPath\": \"data/furniture/\",\n    \"texturePath\": \"data/furniture/\",\n    \"textureNamespace\": \"chronokillers_star_wars\"\n  },\n  \"models\": {\n    \"holotable\": {\n      \"file\": \"holo_table.json\",\n      \"scale\": 0.063\n    }\n  },\n  \"instances\": [\n    {\n      \"model\": \"holotable\",\n      \"position\": [\n        -10,\n        0,\n        0\n      ],\n      \"rotation\": [\n        0,\n        0,\n        0\n      ]\n    },\n    {\n      \"model\": \"holotable\",\n      \"position\": [\n        10,\n        0,\n        5\n      ],\n      \"rotation\": [\n        0,\n        45,\n        0\n      ],\n      \"scale\": 1.5\n    },\n    {\n      \"model\": \"holotable\",\n      \"position\": [\n        0,\n        0,\n        -10\n      ],\n      \"rotation\": [\n        0,\n        -90,\n        0\n      ],\n      \"scale\": 0.8\n    }\n  ]\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\level_links.json",
      "originalSize": 101,
      "condensedSize": 101,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/level_links.json \",\n  \"L01-SP-A\": null,\n  \"L01-SP-B\": null\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\npc_names.json",
      "originalSize": 72626,
      "condensedSize": 3335,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/npc_names.json \",\n  \"droidF\": [\n    \"C\",\n    \"R2\",\n    \"R3\",\n    \"R4\",\n    \"R5\",\n    \"BB\",\n    \"C1\",\n    \"C2\",\n    \"K-2\",\n    \"L3\",\n    \"...(18 more items)\"\n  ],\n  \"droidL\": [\n    \"-3PO\",\n    \"-14\",\n    \"-70\",\n    \"-A4-D\",\n    \"-9D9\",\n    \"-1B\",\n    \"-6\",\n    \"-7\",\n    \"-13\",\n    \"-9\",\n    \"...(89 more items)\"\n  ],\n  \"stormtrooperF\": [\n    \"TK\",\n    \"FN\",\n    \"AD\",\n    \"FT\",\n    \"SE\",\n    \"BW\",\n    \"BJ\",\n    \"OH\",\n    \"GO\",\n    \"ME\",\n    \"...(25 more items)\"\n  ],\n  \"stormtrooperL\": [\n    \"-421\",\n    \"-450\",\n    \"-462\",\n    \"-2187\",\n    \"-2199\",\n    \"-2003\",\n    \"-2000\",\n    \"-2112\",\n    \"-1044\",\n    \"-1728\",\n    \"...(88 more items)\"\n  ],\n  \"wookieeF\": [\n    \"Chew\",\n    \"Gro\",\n    \"Rowr\",\n    \"Worr\",\n    \"Borr\",\n    \"Karr\",\n    \"Trro\",\n    \"Garr\",\n    \"Rrow\",\n    \"Carr\",\n    \"...(89 more items)\"\n  ],\n  \"wookieeL\": [\n    \"bacca\",\n    \"'wrr\",\n    \"rrw\",\n    \"'rrw\",\n    \"rrh\",\n    \"'rrh\",\n    \"rhh\",\n    \"'rhh\",\n    \"wrh\",\n    \"'wrh\",\n    \"...(87 more items)\"\n  ],\n  \"maleF\": [\n    \"A'rtan\",\n    \"A'Sharad\",\n    \"Aban\",\n    \"Abran\",\n    \"Abric\",\n    \"Ace\",\n    \"Adon-larr\",\n    \"Adrenas\",\n    \"Aero\",\n    \"Afyon\",\n    \"...(446 more items)\"\n  ],\n  \"maleL\": [\n    \" \",\n    \" Aabe\",\n    \" Abias\",\n    \" Ablund\",\n    \" Acib\",\n    \" Accu\",\n    \" Acharon\",\n    \" Achelon\",\n    \" Acoi\",\n    \" Adare\",\n    \"...(373 more items)\"\n  ],\n  \"gamorreanF\": [\n    \"Du\",\n    \"Dug\",\n    \"Dag\",\n    \"Dak\",\n    \"Dok\",\n    \"Dol\",\n    \"Dur\",\n    \"Duk\",\n    \"Dum\",\n    \"Duz\",\n    \"...(90 more items)\"\n  ],\n  \"gamorreanL\": [\n    \"rk\",\n    \"rkh\",\n    \"kr\",\n    \"zrk\",\n    \"gz\",\n    \"drk\",\n    \"sk\",\n    \"frk\",\n    \"vr\",\n    \"gth\",\n    \"...(79 more items)\"\n  ],\n  \"darthF\": [\n    \"Darth\",\n    \"Lord\",\n    \"Lady\",\n    \"Master\",\n    \"Empress\",\n    \"Supreme\",\n    \"Vizier\",\n    \"Regent\",\n    \"Sheev\",\n    \"Savage\",\n    \"...(89 more items)\"\n  ],\n  \"darthL\": [\n    \" Vader\",\n    \" Ren\",\n    \" Maul\",\n    \" Bane\",\n    \" Revan\",\n    \" Malak\",\n    \" Sion\",\n    \" Traya\",\n    \" Krayt\",\n    \" Zannah\",\n    \"...(87 more items)\"\n  ],\n  \"gunganF\": [\n    \"Jar-Jar\",\n    \"Rugor\",\n    \"Roos\",\n    \"Lyonie\",\n    \"Rish\",\n    \"Been\",\n    \"Teers\",\n    \"Lunker\",\n    \"Peppi\",\n    \"Augara\",\n    \"...(88 more items)\"\n  ],\n  \"gunganL\": [\n    \" Binks\",\n    \" Nass\",\n    \" Tarpals\",\n    \" Loo\",\n    \" Bow\",\n    \" Jowil\",\n    \" Pert\",\n    \" Ceel\",\n    \" Gallo\",\n    \" Rogoe\",\n    \"...(90 more items)\"\n  ],\n  \"humanoidF\": [\n    \"Xel\",\n    \"Haro\",\n    \"Keto\",\n    \"Dro\",\n    \"Zev\",\n    \"Yor\",\n    \"Jaxu\",\n    \"Nyra\",\n    \"Nyr\",\n    \"Veke\",\n    \"...(89 more items)\"\n  ],\n  \"humanoidL\": [\n    \" Leks\",\n    \" Duoc\",\n    \" Kuy\",\n    \" Ywro\",\n    \" Hyr\",\n    \" Jif\",\n    \" Pyi\",\n    \" Foawa\",\n    \" Xjyd\",\n    \" Mak\",\n    \"...(89 more items)\"\n  ],\n  \"mandoF\": [\n    \"Grogu\",\n    \"Adrik\",\n    \"Akaan\",\n    \"Akaavi\",\n    \"Alrich\",\n    \"Aran\",\n    \"Arla\",\n    \"Atin\",\n    \"Axe\",\n    \"Baltan\",\n    \"...(192 more items)\"\n  ],\n  \"mandoL\": [\n    \" Ori'dush\",\n    \" Aden\",\n    \" Alora\",\n    \" Amandra\",\n    \" Akaan\",\n    \" Akaanad\",\n    \" Akaanika\",\n    \" Alor'suli\",\n    \" Aran\",\n    \" Arani\",\n    \"...(100 more items)\"\n  ],\n  \"ewokF\": [\n    \"Arandee\",\n    \"Baga\",\n    \"Batcheela\",\n    \"Buzz\",\n    \"Chek\",\n    \"Chela\",\n    \"Chibook\",\n    \"Chim\",\n    \"Chirii\",\n    \"Chirloo\",\n    \"...(89 more items)\"\n  ],\n  \"...(more keys)\": \"11 additional properties\"\n}",
      "compressionRatio": 0.045920193869963925,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\npc_name_assigner.js",
      "originalSize": 3519,
      "condensedSize": 3519,
      "content": "// e:\\gonktest\\data\\npc_name_assigner.js\n\n/**\n * Assigns a final, randomized name to an NPC based on a clear hierarchy of rules.\n * This is the central authority for all NPC naming in the game.\n *\n * @param {object} npcData - An object containing NPC properties { name, faction, subgroup, baseType }.\n * @param {object} nameData - The full dataset from npc_names.json.\n * @returns {string} The final, generated name for the NPC.\n */\nfunction generateNpcName(npcData, nameData) {\n    // Priority 1: Manually set name in the editor.\n    // A placeholder name looks like \"factionF factionL\". We want to replace those.\n    // If the name does not look like a placeholder, use it.\n    if (npcData.name && npcData.name.trim().length > 0 && !/\\w+F \\w+L$/.test(npcData.name.trim())) {\n        return npcData.name.trim();\n    }\n\n    let nameKey = '';\n    const faction = (npcData.faction || '').toLowerCase();\n    const subgroup = (npcData.subgroup || '').toLowerCase();\n\n    // Handle subgroup aliases to ensure correct name list selection.\n    const subgroupMap = {\n        'human_female': 'female',\n        'human_male': 'male'\n    };\n    const effectiveSubgroup = subgroupMap[subgroup] || subgroup;\n\n    // Priority 2: Subgroup-based name.\n    // Check if a name list exists for the effective subgroup.\n    if (effectiveSubgroup && nameData[`${effectiveSubgroup}F`]) {\n        nameKey = effectiveSubgroup;\n    }\n    // Priority 3: Faction-based name (if subgroup naming fails or subgroup doesn't exist).\n    else if (faction) {\n        // First, try a direct mapping (e.g., faction 'droids' -> name key 'droids')\n        if (nameData[`${faction}F`]) {\n            nameKey = faction;\n        } else {\n            // If direct mapping fails, try special cases (e.g., faction 'imperials' -> name key 'stormtrooper')\n            const factionMap = {\n                'imperials': 'stormtrooper',\n                'rebels': 'male', // Default for rebels\n                'clones': 'clone',\n                'mandalorians': 'mando',\n                'sith': 'darth',\n                'takers': 'taker',\n                'aliens': 'humanoid', // Generic alien\n                'droids': 'droid'\n            };\n            const mappedKey = factionMap[faction];\n            if (mappedKey && nameData[`${mappedKey}F`]) {\n                nameKey = mappedKey;\n            }\n        }\n    }\n\n    // If we found a valid key, generate the name.\n    if (nameKey) {\n        const firstNames = nameData[`${nameKey}F`];\n        const lastNames = nameData[`${nameKey}L`] || [''];\n\n        if (!firstNames || firstNames.length === 0) {\n            const errorFaction = faction || subgroup || 'unknown';\n            return `ERR_${errorFaction.toUpperCase()}F ERR_${errorFaction.toUpperCase()}L`;\n        }\n\n        const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];\n        const lastName = lastNames.length > 0 ? lastNames[Math.floor(Math.random() * lastNames.length)] : '';\n\n        // Categories that should not have a space between first and last name.\n        const noSpaceCategories = ['droid', 'wookiee', 'gamorrean', 'stormtrooper', 'taker'];\n        if (noSpaceCategories.includes(nameKey)) {\n            return `${firstName}${lastName.trim()}`;\n        } else {\n            return `${firstName} ${lastName.trim()}`.trim();\n        }\n    }\n\n    // Priority 4: Error name as a fallback.\n    const errorFaction = faction || 'unknown';\n    return `ERR_${errorFaction.toUpperCase()}F ERR_${errorFaction.toUpperCase()}L`;\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\npc_weapons.json",
      "originalSize": 24961,
      "condensedSize": 3699,
      "content": "{\n  \"_comment\": \"Centralized configuration for all NPC-usable weapons. Non-listed weapons inherit category defaults. DPS balanced to 10 standard, 25 max.\",\n  \"_metadata_fileName_\": \"npc_weapons.json\",\n  \"_defaults\": {\n    \"categoryDefaults\": {\n      \"longarm\": \"...(truncated)\",\n      \"rifle\": \"...(truncated)\",\n      \"pistol\": \"...(truncated)\",\n      \"melee\": \"...(truncated)\",\n      \"saber\": \"...(truncated)\",\n      \"unique\": \"...(truncated)\"\n    }\n  },\n  \"long_a280c\": {\n    \"category\": \"longarm\",\n    \"drop_faction\": [\n      \"rebels\"\n    ],\n    \"tier_required\": 1,\n    \"drop_weight\": 30\n  },\n  \"long_crossbow\": {\n    \"category\": \"longarm\",\n    \"damage\": 18,\n    \"ammo_max\": 5,\n    \"attack_cooldown_mult\": 2.5,\n    \"technical_understanding\": 50,\n    \"weight\": 110,\n    \"bolt_speed_mult\": 0.7,\n    \"energy_type\": \"physical\",\n    \"bolt_color\": null,\n    \"drop_faction\": [\n      \"aliens\"\n    ],\n    \"tier_required\": 1,\n    \"drop_weight\": 20\n  },\n  \"long_ee3_mando\": {\n    \"category\": \"longarm\",\n    \"drop_faction\": [\n      \"mandalorians\"\n    ],\n    \"tier_required\": 1,\n    \"drop_weight\": 30\n  },\n  \"long_el16\": {\n    \"category\": \"longarm\"\n  },\n  \"long_f11d\": {\n    \"category\": \"longarm\",\n    \"drop_faction\": [\n      \"imperials\"\n    ],\n    \"tier_required\": 1,\n    \"drop_weight\": 30\n  },\n  \"long_f11d_phasma\": {\n    \"category\": \"longarm\",\n    \"bolt_color\": \"#ffaa00\",\n    \"technical_understanding\": 75,\n    \"weight\": 90,\n    \"drop_faction\": [\n      \"imperials\",\n      \"sith\"\n    ],\n    \"tier_required\": 1,\n    \"drop_weight\": 15\n  },\n  \"long_ionblaster\": {\n    \"category\": \"longarm\",\n    \"damage\": 8,\n    \"energy_type\": \"ion\",\n    \"bolt_color\": \"#00ccff\",\n    \"technical_understanding\": 70,\n    \"weight\": 95,\n    \"power_drain\": 0.4,\n    \"drop_weight\": 15\n  },\n  \"long_OC_lightgun\": {\n    \"category\": \"longarm\",\n    \"damage\": 14,\n    \"attack_cooldown_mult\": 0.8\n  },\n  \"long_spb50\": {\n    \"category\": \"longarm\"\n  },\n  \"long_stw48\": {\n    \"category\": \"longarm\"\n  },\n  \"long_tl50\": {\n    \"category\": \"longarm\"\n  },\n  \"long_z6\": {\n    \"category\": \"longarm\",\n    \"damage\": 15,\n    \"attack_cooldown_mult\": 0.5,\n    \"ammo_max\": 150,\n    \"weight\": 130,\n    \"technical_understanding\": 75,\n    \"power_drain\": 0.6,\n    \"drop_weight\": 10,\n    \"special_moves\": \"autofire\",\n    \"speed\": -0.005\n  },\n  \"long_z6custom\": {\n    \"category\": \"longarm\",\n    \"damage\": 15,\n    \"attack_cooldown_mult\": 0.5,\n    \"ammo_max\": 150,\n    \"weight\": 130,\n    \"technical_understanding\": 75,\n    \"power_drain\": 0.6,\n    \"drop_weight\": 10,\n    \"special_moves\": \"autofire\",\n    \"speed\": -0.005,\n    \"charm_defense\": 25\n  },\n  \"melee_amphistaff_vong\": {\n    \"category\": \"melee\",\n    \"technical_understanding\": 0,\n    \"weight\": 60,\n    \"damage\": 10,\n    \"energy_type\": \"venom\",\n    \"bolt_color\": \"#aaff00\",\n    \"power_drain\": 0.4,\n    \"drop_faction\": [\n      \"aliens\"\n    ],\n    \"drop_weight\": 20\n  },\n  \"melee_amphistaff_yuuzhanvong\": {\n    \"category\": \"melee\",\n    \"technical_understanding\": 0,\n    \"weight\": 60,\n    \"damage\": 10,\n    \"energy_type\": \"venom\",\n    \"bolt_color\": \"#aaff00\",\n    \"power_drain\": 0.4,\n    \"drop_faction\": [\n      \"aliens\"\n    ],\n    \"drop_weight\": 20\n  },\n  \"melee_axe_gamorrean\": {\n    \"category\": \"melee\",\n    \"damage\": 12,\n    \"weight\": 70,\n    \"power_drain\": 0.5,\n    \"drop_faction\": [\n      \"aliens\"\n    ],\n    \"drop_weight\": 20\n  },\n  \"melee_electrostaffdark_magnaguard\": {\n    \"category\": \"melee\",\n    \"damage\": 15,\n    \"weight\": 80,\n    \"technical_understanding\": 60,\n    \"energy_type\": \"electric\",\n    \"bolt_color\": \"#9966ff\",\n    \"power_drain\": 0.6,\n    \"drop_faction\": [\n      \"droids\"\n    ],\n    \"drop_weight\": 15,\n    \"special_moves\": \"disarm\"\n  },\n  \"...(more keys)\": \"84 additional properties\"\n}",
      "compressionRatio": 0.14819117823805136,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\physics_config.json",
      "originalSize": 740,
      "condensedSize": 740,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/physics_config.json - Physics engine configuration\",\r\n\r\n  \"collision\": {\r\n    \"player_radius\": 0.4,\r\n    \"npc_radius\": 0.4,\r\n    \"push_factor\": 0.05,\r\n    \"separation_distance\": 0.1\r\n  },\r\n\r\n  \"furniture\": {\r\n    \"scale\": 0.03125,\r\n    \"enable_collision\": true,\r\n    \"lod_distance\": 20.0,\r\n    \"cull_distance\": 50.0,\r\n    \"use_instancing\": true\r\n  },\r\n\r\n  \"ragdoll\": {\r\n    \"lifetime_frames\": 90,\r\n    \"fade_start_frame\": 30,\r\n    \"angular_velocity_min\": -0.05,\r\n    \"angular_velocity_max\": 0.05,\r\n    \"max_active_ragdolls\": 10,\r\n    \"pool_size\": 50,\r\n    \"bounce_damping\": 0.5,\r\n    \"friction\": 0.9\r\n  },\r\n\r\n  \"gravity\": {\r\n    \"npc\": -0.015,\r\n    \"player\": -0.02,\r\n    \"ragdoll\": -0.015\r\n  }\r\n}\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\rendering_config.json",
      "originalSize": 734,
      "condensedSize": 734,
      "content": "{\r\n  \"_comment\": \"BROWSERFIREFOXHIDE data/rendering_config.json - Rendering optimization settings\",\r\n\r\n  \"furniture\": {\r\n    \"enable_lod\": true,\r\n    \"lod_distance\": 20.0,\r\n    \"enable_frustum_culling\": true,\r\n    \"cull_distance\": 50.0,\r\n    \"disable_shadows_distance\": 30.0\r\n  },\r\n\r\n  \"nameplates\": {\r\n    \"update_interval_frames\": 3,\r\n    \"fade_distance\": 15.0,\r\n    \"hide_distance\": 25.0\r\n  },\r\n\r\n  \"particles\": {\r\n    \"pool_size\": 100,\r\n    \"max_active\": 50\r\n  },\r\n\r\n  \"shadows\": {\r\n    \"enabled\": true,\r\n    \"map_size\": 2048,\r\n    \"npc_cast_shadows\": true,\r\n    \"furniture_cast_shadows\": true\r\n  },\r\n\r\n  \"performance\": {\r\n    \"max_visible_npcs\": 50,\r\n    \"npc_update_distance\": 40.0,\r\n    \"ai_update_interval_frames\": 2\r\n  }\r\n}\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\data\\tab_faction_controls.js",
      "originalSize": 20865,
      "condensedSize": 222,
      "content": "// File: 289 lines condensed to 3 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE tab_faction_controls.js\r\nclass TabFactionControls {\r\n            // Symmetrical update for strength\r",
      "compressionRatio": 0.010639827462257369,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\data\\upgrade_nodes.json",
      "originalSize": 40173,
      "condensedSize": 3689,
      "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"start_zapper\",\n      \"name\": \"Zapper Arm\",\n      \"description\": \"Your basic, reliable starting weapon.\",\n      \"cost\": 0,\n      \"icon\": \"\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_vibrohammer\",\n      \"name\": \"Vibro-Hammer\",\n      \"description\": \"Start with a Vibro-Hammer.\",\n      \"cost\": 3,\n      \"icon\": \"data/gonkonlyweapons/melee/gmelee_vibrohammer.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_dt12\",\n      \"name\": \"DT-12\",\n      \"description\": \"Start with Greedo's DT-12 Blaster Pistol.\",\n      \"cost\": 5,\n      \"icon\": \"data/NPConlyweapons/pistol/pistol_dt12_greedo.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_dl44\",\n      \"name\": \"DL-44\",\n      \"description\": \"Start with Han's DL-44 Heavy Blaster Pistol.\",\n      \"cost\": 5,\n      \"icon\": \"data/NPConlyweapons/pistol/pistol_dl44_han.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_e11\",\n      \"name\": \"E-11\",\n      \"description\": \"Start with the standard E-11 Blaster Rifle.\",\n      \"cost\": 7,\n      \"icon\": \"data/NPConlyweapons/rifle/rifle_e11.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_fork\",\n      \"name\": \"Fork Rifle\",\n      \"description\": \"Start with the Fork Rifle.\",\n      \"cost\": 8,\n      \"icon\": \"data/NPConlyweapons/rifle/rifle_fork.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_ee3\",\n      \"name\": \"EE-3 Mando\",\n      \"description\": \"Start with the Mandalorian EE-3 Carbine.\",\n      \"cost\": 10,\n      \"icon\": \"data/NPConlyweapons/longarm/long_ee3_mando.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_z6\",\n      \"name\": \"Z6 Custom\",\n      \"description\": \"Start with the Z6 Custom Rotary Cannon.\",\n      \"cost\": 12,\n      \"icon\": \"data/NPConlyweapons/longarm/long_z6custom.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_eweb\",\n      \"name\": \"E-Web\",\n      \"description\": \"Start with the E-Web Heavy Blaster.\",\n      \"cost\": 15,\n      \"icon\": \"data/NPConlyweapons/unique/unique_eweb.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    {\n      \"id\": \"start_forcepike\",\n      \"name\": \"Force Pike\",\n      \"description\": \"Start with the Force Pike.\",\n      \"cost\": 18,\n      \"icon\": \"data/NPConlyweapons/unique/unique_forcepike.png\",\n      \"prerequisites\": \"...(truncated)\",\n      \"effects\": \"...(truncated)\",\n      \"branch\": \"Start\",\n      \"color\": \"#FFFFFF\",\n      \"position\": \"...(truncated)\"\n    },\n    \"...(79 more items)\"\n  ]\n}",
      "compressionRatio": 0.09182784457222512,
      "extractionMethod": "json_optimization"
    },
    {
      "path": "e:\\gonk\\data\\weapons.json",
      "originalSize": 4396,
      "condensedSize": 4396,
      "content": "{\n  \"_comment\": \"BROWSERFIREFOXHIDE data/weapons.json\",\n  \"_defaults\": {\n    \"categoryDefaults\": {\n      \"pistol\": {\n        \"energyCost\": 3,\n        \"offsets\": {\n          \"position\": {\n            \"x\": -1.45,\n            \"y\": -16.74,\n            \"z\": 9.95\n          },\n          \"rotation\": {\n            \"x\": 1.543,\n            \"y\": -1.571,\n            \"z\": 0\n          },\n          \"scale\": 70,\n          \"planes\": {\n            \"dist\": 0.002,\n            \"yaw\": 0.28,\n            \"pitch\": 0.1\n          }\n        }\n      },\n      \"rifle\": {\n        \"energyCost\": 5,\n        \"offsets\": {\n          \"position\": {\n            \"x\": -1.45,\n            \"y\": -16.74,\n            \"z\": 9.95\n          },\n          \"rotation\": {\n            \"x\": 1.543,\n            \"y\": -1.571,\n            \"z\": 0\n          },\n          \"scale\": 70,\n          \"planes\": {\n            \"dist\": 0.003,\n            \"yaw\": 0.55,\n            \"pitch\": 0.6\n          }\n        }\n      },\n      \"melee\": {\n        \"energyCost\": 0,\n        \"offsets\": {\n          \"position\": {\n            \"x\": 0.03,\n            \"y\": -20.65,\n            \"z\": 9.94\n          },\n          \"rotation\": {\n            \"x\": 1.723,\n            \"y\": -1.476,\n            \"z\": -0.042\n          },\n          \"scale\": 123,\n          \"planes\": {\n            \"dist\": 0,\n            \"yaw\": 0.6,\n            \"pitch\": 0.8\n          }\n        }\n      },\n      \"saber\": {\n        \"energyCost\": 0,\n        \"offsets\": {\n          \"position\": {\n            \"x\": 5.41,\n            \"y\": -7.61,\n            \"z\": 17.67\n          },\n          \"rotation\": {\n            \"x\": 1.543,\n            \"y\": 0.464,\n            \"z\": 0.442\n          },\n          \"scale\": 70,\n          \"planes\": {\n            \"dist\": 0,\n            \"yaw\": 0.23,\n            \"pitch\": 0.35\n          }\n        },\n        \"glow\": {\n          \"color\": \"#ff0000\",\n          \"intensity\": 2,\n          \"distance\": 4,\n          \"decay\": 2\n        }\n      },\n      \"long\": {\n        \"energyCost\": 8,\n        \"offsets\": {\n          \"position\": {\n            \"x\": -1.45,\n            \"y\": -16.74,\n            \"z\": 9.95\n          },\n          \"rotation\": {\n            \"x\": 1.543,\n            \"y\": -1.571,\n            \"z\": 0\n          },\n          \"scale\": 70,\n          \"planes\": {\n            \"dist\": 0.003,\n            \"yaw\": 0.55,\n            \"pitch\": 0.6\n          }\n        }\n      },\n      \"unique\": {\n        \"energyCost\": 5,\n        \"offsets\": {\n          \"position\": {\n            \"x\": -1.02,\n            \"y\": -8.7,\n            \"z\": 1.18\n          },\n          \"rotation\": {\n            \"x\": 1.597,\n            \"y\": -1.571,\n            \"z\": 0\n          },\n          \"scale\": 73,\n          \"planes\": {\n            \"dist\": 0.003,\n            \"yaw\": 0.5,\n            \"pitch\": 0\n          }\n        }\n      }\n    }\n  },\n  \"pistol_dl44_han\": {\n    \"technicalRequirement\": 30,\n    \"energyCost\": 4\n  },\n  \"long_z6custom\": {\n    \"category\": \"long\",\n    \"technicalRequirement\": 75,\n    \"energyCost\": 10\n  },\n  \"long_f11d_phasma\": {\n    \"category\": \"long\",\n    \"technicalRequirement\": 75,\n    \"energyCost\": 9\n  },\n  \"long_z6\": {\n    \"category\": \"long\",\n    \"technicalRequirement\": 75,\n    \"energyCost\": 8\n  },\n  \"unique_sonicgrenade\": {\n    \"category\": \"unique\",\n    \"technicalRequirement\": 60,\n    \"energyCost\": 12,\n    \"offsets\": {\n      \"position\": {\n        \"x\": -0.84,\n        \"y\": -7.8,\n        \"z\": 7.01\n      },\n      \"rotation\": {\n        \"x\": 0.553,\n        \"y\": -1.365,\n        \"z\": 0\n      },\n      \"scale\": 53,\n      \"planes\": {\n        \"dist\": 0.002,\n        \"yaw\": 0.15,\n        \"pitch\": 0\n      }\n    }\n  },\n  \"rifle_fork\": {\n    \"category\": \"rifle\",\n    \"technicalRequirement\": 5,\n    \"energyCost\": 4\n  },\n  \"saber_red\": {\n    \"category\": \"saber\",\n    \"glow\": {\n      \"color\": \"#ff0000\",\n      \"intensity\": 2.5,\n      \"distance\": 6\n    },\n    \"technicalRequirement\": 50,\n    \"forceSensitivityRequirement\": 70,\n    \"energyCost\": 0\n  },\n  \"saber_blue\": {\n    \"category\": \"saber\",\n    \"glow\": {\n      \"color\": \"#0088ff\",\n      \"intensity\": 2.5,\n      \"distance\": 6\n    },\n    \"technicalRequirement\": 50,\n    \"forceSensitivityRequirement\": 70,\n    \"energyCost\": 0\n  },\n  \"saber_green\": {\n    \"category\": \"saber\",\n    \"glow\": {\n      \"color\": \"#00ff44\",\n      \"intensity\": 2.5,\n      \"distance\": 6\n    },\n    \"technicalRequirement\": 50,\n    \"forceSensitivityRequirement\": 70,\n    \"energyCost\": 0\n  }\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\tools\\convert_all_levels_v2.js",
      "originalSize": 5315,
      "condensedSize": 5315,
      "content": "// BROWSERFIREFOXHIDE tools/convert_all_levels_v2.js\r\n/**\r\n * Batch Level Converter V2 - FIXED VERSION\r\n * Usage: node tools/convert_all_levels_v2.js\r\n */\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\n// Load the V2 compressor\r\nlet LevelCompressorV2;\r\ntry {\r\n    LevelCompressorV2 = require('./level_compressor_v2.js');\r\n} catch (e) {\r\n    console.error('Error loading level_compressor_v2.js:', e.message);\r\n    process.exit(1);\r\n}\r\n\r\nconst levelsDir = path.join(__dirname, '../data/levels');\r\nconst compressor = new LevelCompressorV2();\r\n\r\nconsole.log('='.repeat(60));\r\nconsole.log('GONK LEVEL COMPRESSION TOOL V2 (FIXED)');\r\nconsole.log('='.repeat(60));\r\nconsole.log('');\r\nconsole.log('FIXES:');\r\nconsole.log('- No fake defaults for sparse layers');\r\nconsole.log('- Preserves all properties (size, rotation, wall2/wall3)');\r\nconsole.log('- Only compresses layers with >50% coverage');\r\nconsole.log('');\r\nconsole.log('='.repeat(60));\r\nconsole.log('');\r\n\r\n// Check if levels directory exists\r\nif (!fs.existsSync(levelsDir)) {\r\n    console.error(`ERROR: Levels directory not found: ${levelsDir}`);\r\n    process.exit(1);\r\n}\r\n\r\nlet totalOriginal = 0;\r\nlet totalCompressed = 0;\r\nlet filesProcessed = 0;\r\nlet filesSkipped = 0;\r\nlet filesFailed = 0;\r\n\r\nconst levelFiles = fs.readdirSync(levelsDir)\r\n    .filter(file => file.endsWith('.json') && !file.endsWith('.backup'))\r\n    .sort();\r\n\r\nconsole.log(`Found ${levelFiles.length} level files to process\\n`);\r\n\r\nfor (const file of levelFiles) {\r\n    try {\r\n        const filePath = path.join(levelsDir, file);\r\n        const original = JSON.parse(fs.readFileSync(filePath, 'utf8'));\r\n\r\n        // Skip if already compressed (v2)\r\n        if (original.version === 2) {\r\n            console.log(`[SKIP] ${file} - already compressed (v2)`);\r\n            filesSkipped++;\r\n            continue;\r\n        }\r\n\r\n        // Compress\r\n        const compressed = compressor.compress(original);\r\n        const stats = compressor.calculateCompression(original, compressed);\r\n\r\n        console.log(`[COMPRESS] ${file}`);\r\n        console.log(`  Original:   ${(stats.originalBytes / 1024).toFixed(2)} KB`);\r\n        console.log(`  Compressed: ${(stats.compressedBytes / 1024).toFixed(2)} KB`);\r\n        console.log(`  Saved:      ${(stats.savedBytes / 1024).toFixed(2)} KB (${stats.compressionRatio})`);\r\n\r\n        // VERIFY: Decompress and check critical data\r\n        const decompressed = compressor.decompress(compressed);\r\n\r\n        // Count tiles in original vs decompressed\r\n        let originalTileCount = 0;\r\n        let decompressedTileCount = 0;\r\n\r\n        for (const layerName in original.layers) {\r\n            if (Array.isArray(original.layers[layerName])) {\r\n                originalTileCount += original.layers[layerName].length;\r\n            }\r\n        }\r\n\r\n        for (const layerName in decompressed.layers) {\r\n            if (Array.isArray(decompressed.layers[layerName])) {\r\n                decompressedTileCount += decompressed.layers[layerName].length;\r\n            }\r\n        }\r\n\r\n        if (originalTileCount !== decompressedTileCount) {\r\n            console.log(`  WARNING:    Tile count mismatch! Original: ${originalTileCount}, Decompressed: ${decompressedTileCount}`);\r\n            console.log(`  SKIPPING THIS FILE - POTENTIAL DATA LOSS DETECTED`);\r\n            filesFailed++;\r\n            continue;\r\n        }\r\n\r\n        totalOriginal += stats.originalBytes;\r\n        totalCompressed += stats.compressedBytes;\r\n\r\n        // Backup original (skip if already exists)\r\n        const backupPath = filePath + '.backup';\r\n        if (!fs.existsSync(backupPath)) {\r\n            fs.writeFileSync(backupPath, JSON.stringify(original, null, 2));\r\n            console.log(`  Backup:     ${file}.backup created`);\r\n        } else {\r\n            console.log(`  Backup:     ${file}.backup already exists`);\r\n        }\r\n\r\n        // Write compressed\r\n        fs.writeFileSync(filePath, JSON.stringify(compressed, null, 2));\r\n        console.log(`  Verified:   Tile count matches (${originalTileCount} tiles)`);\r\n        console.log(`  Status:     âœ“ Successfully compressed\\n`);\r\n\r\n        filesProcessed++;\r\n\r\n    } catch (error) {\r\n        console.error(`[ERROR] ${file}: ${error.message}\\n`);\r\n        filesFailed++;\r\n    }\r\n}\r\n\r\nconsole.log('='.repeat(60));\r\nconsole.log('COMPRESSION SUMMARY');\r\nconsole.log('='.repeat(60));\r\nconsole.log(`Files processed:  ${filesProcessed}`);\r\nconsole.log(`Files skipped:    ${filesSkipped}`);\r\nconsole.log(`Files failed:     ${filesFailed}`);\r\nconsole.log('');\r\nconsole.log(`Original size:    ${(totalOriginal / 1024).toFixed(2)} KB (${(totalOriginal / 1024 / 1024).toFixed(3)} MB)`);\r\nconsole.log(`Compressed size:  ${(totalCompressed / 1024).toFixed(2)} KB (${(totalCompressed / 1024 / 1024).toFixed(3)} MB)`);\r\nconsole.log(`Saved:            ${((totalOriginal - totalCompressed) / 1024).toFixed(2)} KB (${((totalOriginal - totalCompressed) / 1024 / 1024).toFixed(3)} MB)`);\r\nconsole.log(`Compression ratio: ${((totalCompressed / totalOriginal) * 100).toFixed(2)}%`);\r\nconsole.log('='.repeat(60));\r\nconsole.log('');\r\nconsole.log('âœ“ Conversion complete!');\r\nconsole.log('');\r\nconsole.log('IMPORTANT: Test your game before deleting .backup files!');\r\nconsole.log('To restore: Use restore_levels_from_backup.bat');\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\tools\\level_compressor_v2.js",
      "originalSize": 10500,
      "condensedSize": 1645,
      "content": "// File: 279 lines condensed to 35 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE tools/level_compressor_v2.js\r\n/**\r\n * Level Compression Utility V2 - FIXED VERSION\r\n *\r\n * CRITICAL FIXES:\r\n * 1. Never creates defaults for sparse layers (wall, floater, dangler, etc.)\r\n * 2. Only compresses true tile layers with >50% coverage\r\n * 3. Preserves ALL properties including size\r\n * 4. Decompression properly expands defaults\r\n */\r\nclass LevelCompressorV2 {\r\n        // Layers that should NEVER have defaults (always sparse)\r\n        // Layers that CAN have defaults if coverage > threshold\r\n        // Process each layer\r\n            // Pass through non-array layers unchanged\r\n            // Always keep these layers sparse (no defaults)\r\n            // For tile layers, check coverage\r\n                // Low coverage - treat as sparse (no default)\r\n                // High coverage - find default and compress with overrides\r\n            // Register texture if new\r\n            // Preserve ALL properties\r\n        // Count occurrences of each unique combination (texture + size + properties)\r\n        // Find most common combination\r\n        // Get the default item\r\n        // Register default texture\r\n        // Create overrides for non-default tiles\r\n            // Skip if matches default\r\n            // Register texture if new\r\n        // Convert defaults\r\n        // Expand layers\r\n                // Expand sparse layer - ONLY the overrides (no default fill)\r\n                    // Set defaults if not specified\r\n                // Pass through non-sparse layers\r\n// For Node.js\r\n// For browser\r",
      "compressionRatio": 0.15666666666666668,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\tools\\verify_level_integrity.js",
      "originalSize": 3222,
      "condensedSize": 3222,
      "content": "// BROWSERFIREFOXHIDE tools/verify_level_integrity.js\r\n/**\r\n * Level Integrity Checker\r\n * Verifies that all levels are properly formatted and contain expected data\r\n * Usage: node tools/verify_level_integrity.js\r\n */\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nconst levelsDir = path.join(__dirname, '../data/levels');\r\n\r\nconsole.log('='.repeat(60));\r\nconsole.log('LEVEL INTEGRITY VERIFICATION');\r\nconsole.log('='.repeat(60));\r\nconsole.log('');\r\n\r\nconst levelFiles = fs.readdirSync(levelsDir)\r\n    .filter(file => file.endsWith('.json') && !file.endsWith('.backup'))\r\n    .sort();\r\n\r\nlet allPassed = true;\r\n\r\nfor (const file of levelFiles) {\r\n    console.log(`\\nChecking ${file}...`);\r\n    const filePath = path.join(levelsDir, file);\r\n\r\n    try {\r\n        const data = JSON.parse(fs.readFileSync(filePath, 'utf8'));\r\n        const issues = [];\r\n\r\n        // Check format version\r\n        if (data.version === 2) {\r\n            console.log(`  Format: v2 (compressed)`);\r\n        } else {\r\n            console.log(`  Format: v1 (uncompressed)`);\r\n        }\r\n\r\n        // Check for layers\r\n        if (!data.layers) {\r\n            issues.push('Missing layers object');\r\n        }\r\n\r\n        // Check for suspicious defaults in sparse layers\r\n        if (data.version === 2 && data.settings && data.settings.defaults) {\r\n            const suspiciousDefaults = ['floater', 'dangler', 'wall', 'door', 'pillar'];\r\n            for (const layer of suspiciousDefaults) {\r\n                if (data.settings.defaults[layer]) {\r\n                    issues.push(`WARNING: ${layer} has default (should be sparse)`);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Count tiles per layer\r\n        let totalTiles = 0;\r\n        const layerCounts = {};\r\n\r\n        for (const [layerName, layerData] of Object.entries(data.layers || {})) {\r\n            if (Array.isArray(layerData)) {\r\n                layerCounts[layerName] = layerData.length;\r\n                totalTiles += layerData.length;\r\n            } else if (layerData.type === 'sparse' && layerData.overrides) {\r\n                layerCounts[layerName] = layerData.overrides.length;\r\n                totalTiles += layerData.overrides.length;\r\n            }\r\n        }\r\n\r\n        console.log(`  Total tiles: ${totalTiles}`);\r\n        console.log(`  Layers: ${Object.keys(layerCounts).length}`);\r\n\r\n        // Show layer breakdown\r\n        for (const [layer, count] of Object.entries(layerCounts)) {\r\n            if (count > 0) {\r\n                console.log(`    ${layer}: ${count} tiles`);\r\n            }\r\n        }\r\n\r\n        // Report issues\r\n        if (issues.length > 0) {\r\n            console.log(`  âš ï¸  ISSUES FOUND:`);\r\n            issues.forEach(issue => console.log(`     - ${issue}`));\r\n            allPassed = false;\r\n        } else {\r\n            console.log(`  âœ… No issues detected`);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.log(`  âŒ ERROR: ${error.message}`);\r\n        allPassed = false;\r\n    }\r\n}\r\n\r\nconsole.log('');\r\nconsole.log('='.repeat(60));\r\nif (allPassed) {\r\n    console.log('âœ… ALL LEVELS PASSED VERIFICATION');\r\n} else {\r\n    console.log('âš ï¸  SOME ISSUES DETECTED - Review above');\r\n}\r\nconsole.log('='.repeat(60));\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\animated_gauges.js",
      "originalSize": 14237,
      "condensedSize": 2568,
      "content": "// File: 424 lines condensed to 50 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE animated_gauges.js\n// Animated Health and Power Gauge System\n// Loads and animates sphere gauge images with dynamic clipping based on health/energy percentage\nclass AnimatedGauge {\n        // Options\n        // Animation state\n        // Gauge state\n        // Set canvas size\n        // Load frames\n        // Try to load frames numbered 001, 002, 003, etc.\n            // On first frame, determine naming pattern\n                // Try with underscore separator first (powergauge_001.png)\n                    // Try without underscore (healthgauge001.png)\n                        // Neither pattern worked - silently stop\n                // Use established naming pattern\n                    // Stop when we can't load the next frame - silently\n            // Set up error handler BEFORE setting src to catch the error early\n                // Silently reject without logging\n            // Set src after handlers are attached\n        // Update animation frame with ping-pong behavior (1,2,3,3,2,1)\n                // Reverse direction at boundaries\n        // Clear canvas\n        // Save context state\n        // Set global opacity for translucency\n        // Get current frame\n        // Calculate clipping region (bottom portion based on percentage)\n        // Draw the visible portion (bottom X% of the sphere)\n        // Use image's natural aspect ratio to prevent squishing\n        // First, create circular clipping mask to contain gauge within circle\n        // Second, clip to bottom portion based on percentage\n        // Calculate dimensions to maintain aspect ratio\n            // Image is wider - fit to height\n            // Image is taller or square - fit to width\n        // Apply vertical flip if enabled (for health gauge)\n        // Draw preview indicator for energy gauge (if enabled)\n            // Only draw preview if it's within the visible gauge area\n                // Create circular clipping mask for preview\n                // Draw preview highlight\n        // Restore context state\n        // Fallback rendering when no frames are loaded\n        // Draw a simple colored circle as fallback\n        // Background circle (dark)\n        // Border\n        // Fill (bottom portion)\n        // Preview for energy gauge\n// Gauge Manager - handles both health and power gauges\nclass GaugeManager {\n        // Create health gauge\n        // Create power gauge with preview enabled\n            // Set preview for next shot",
      "compressionRatio": 0.18037507901945635,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\asset_loaders.js",
      "originalSize": 28003,
      "condensedSize": 4140,
      "content": "// File: 608 lines condensed to 47 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE asset_loaders.js\n// update: Corrected skybox asset lookup to properly handle keys with file extensions, fixing a texture loading error.\n// update: The texture loader now properly encodes URIs to handle special characters (like spaces) in filenames, fixing multiple 404 errors.\n// fix: Fallback skybox path now uses consistent leading slash for compatibility with discovery paths.\n// update: Added new module and health pickup paths for preloading.\n// update: Corrected the path for the Gaffi Stick asset.\n// update: Fixed bug in getNpcsByCriteria where `subgroup: 'all'` was incorrectly excluding NPCs. It now correctly includes all NPCs matching the threat and macroCategory.\n// update: Ensured baseType, faction, and macroCategory are correctly cascaded from the NPC group onto individual NPC configs to fix random NPC spawning based on subgroup criteria.\n// update: Corrected Zapper weapon asset paths to include the 'gmelee_zapper' subdirectory during preloading, fixing the texture loading failure.\n// fix: Removed redundant loading of gmelee_zapper.png base file to fix a persistent 404 error and corrected the file name reference for Clones JSON loading to '2_clones.json'.\n// fix: Re-added the missing loadFactionAttitudes method to resolve the game-breaking initialization error.\n// fix: Added robust JSON parsing logic to loadNameData and loadCharacterData to prevent errors from embedded comments/invalid characters.\nclass AssetManager {\n        // This mapping logic translates a subgroup string into a check against an NPC's config.\n            // Check threat level and macro-category\n                // Check subgroup if specified\n        // Overhaul to load all character JSONs, same as the editor's asset manager\n                // FIX: Use robust comment stripping, removing lines starting with # or //.\n                // FIX: Log error clearly and correctly reference the file name as a JSON file.\n    // New method to populate the npcIcons map with config data for the game\n            // FIX: Use robust comment stripping, removing lines starting with # or //.\n            // FIX: The error is here, ensure the logging is clean.\n    // ADDED: Discover fixed pickup/module textures\n        // FIX: Use the new directory structure. Hilts are weapons, blades are not.\n        // This prevents scanning 'saberbladeunderlayer' and causing 404s.\n            // ADDED: Pickup textures\n            // Preload the new glow texture\n            // Preload the saber blade texture since it's not discovered as a weapon\n        // Preload all pamphlet textures\n        // ADDED: Zapper animation frames (explicitly construct the correct paths)\n        // FIX: Remove the redundant path loading, which causes the persistent 404\n        // Initialize the shared material now that the texture is loaded\n                // For NPCs with subdirectories (like clones), the skinName includes the subdirectory\n                // e.g., \"104th Wolfpack Battalion/Sinker (1) P1.png\" -> skinName is \"104th Wolfpack Battalion/Sinker (1) P1\"\n        // Debug: show sample clone entries\n                        // Load NPC skins immediately with their full key to avoid conflicts.\n                        // Note: random_static and animation types load dynamically, not here\n            // Note: random_static and animation types load dynamically in createSkybox, not here\n        // Check for common prefix in pickup/module paths to extract a clean key\n            // Check if path is already encoded (contains %XX patterns)\n            // If so, don't double-encode it\n            // FIX: Removed unnecessary console logging to prevent spam\n            // FIX: Removed unnecessary console logging to prevent spam\n                    // Folders can be used for either animation or random_static\n                    // Store both types with the same path - the usage context determines behavior\n        // Fallback: manually register known skybox files if discovery failed\n            // Pick a random image from the folder",
      "compressionRatio": 0.147841302717566,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\audio_system.js",
      "originalSize": 28258,
      "condensedSize": 2336,
      "content": "// File: 679 lines condensed to 38 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE audio_system.js\r\nclass AudioSystem {\r\n        // Saber hum tracking\r\n            // NOTE: Weapon-specific sounds. The key (e.g., 'ee3') can be derived from a weapon's filename\r\n            // (e.g., 'glong_ee3_mando' or 'long_ee3_mando') to play the correct sound for different visual assets.\r\n        // ADDED: Wookiee sounds\r\n             // ADDED: Pickup sound\r\n             // ADDED: Spawner explosion sound\r\n             // ADDED: Force power sounds\r\n             // ADDED: UI sounds\r\n             // ADDED: Out of ammo sound\r\n             // ADDED: DroidSlayer activation scream\r\n        // Find the category and track index for the given path\r\n        // If not found in library, play it directly\r\n        // Play music based on level settings\r\n        // musicSettings: { type: 'random' | 'category' | 'track', value?: string }\r\n            // Default behavior: play random non-lyrical category\r\n        // Fade out with the song title\r\n            // After fade out, set display to none so it doesn't hold space\r\n    // --- Sound Effect Methods ---\r\n    // --- Categorized Sound Methods ---\r\n            // console.warn(`Sound list not found or is empty: ${listName}`);\r\n                // Check for weapon-specific sound overrides first\r\n            // console.warn(`Sound list not found or is empty: ${listName}`);\r\n        // This sound is non-positional, so we can't use playSound directly as it uses static defs.\r\n        // We'll load it and play it as a simple THREE.Audio\r\n        // For now, just play a random sound from the maledeath category\r\n        // This is non-positional\r\n        // This sound is non-positional, so we can't use playSound directly as it uses static defs.\r\n        // We'll load it and play it as a simple THREE.Audio\r\n    // --- Saber Hum Looping System ---\r\n        // Check if this entity already has a hum\r\n            // Increment instance count but cap at 2 (third+ use same volume)\r\n                // Positional audio for NPCs\r\n                // Store reference to cleanup later\r\n                // Non-positional for player\r\n        // Cleanup positional audio object if present\r\n    // Update position for positional saber hums (called in game loop for NPCs)\r",
      "compressionRatio": 0.08266685540377947,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\character_config.js",
      "originalSize": 7084,
      "condensedSize": 7084,
      "content": "// BROWSERFIREFOXHIDE character_config.js\r\n// update: Added a 'perceptionRadius' stat to all NPC types to control their maximum vision range. Stormtroopers have been given a shorter radius as an example.\r\n\r\nwindow.CHARACTER_CONFIG = {\r\n  // --- ALIENS ---\r\n  humanoid: {\r\n    name: \"Default Humanoid\",\r\n    minecraftModel: \"humanoid\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n      meleeDamage: 5, collisionRadius: 0.5, weight: 80, aggro: 0.5, accuracy: 60\r\n    }\r\n  },\r\n  gamorrean: {\r\n    name: \"Gamorrean\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 1.3, scaleY: 0.85, scaleZ: 1.6,\r\n    stats: {\r\n        health: 50, speed: 0.0250, attackRange: 1.6, perceptionRadius: 20, attackCooldown: 3.0,\r\n        meleeDamage: 7, collisionRadius: 0.6, weight: 110, aggro: 0.7, accuracy: 65\r\n    }\r\n  },\r\n  gungan: {\r\n    name: \"Gungan\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 1.1, scaleY: 2.25, scaleZ: 1.1,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n      meleeDamage: 3, collisionRadius: 0.5, weight: 70, aggro: 0.3, accuracy: 60\r\n    }\r\n  },\r\n   wookiee: {\r\n    name: \"Wookiee\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 1.1, scaleY: 1.25, scaleZ: 1.1,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.8, perceptionRadius: 30, attackCooldown: 3.0,\r\n      meleeDamage: 8, collisionRadius: 0.6, weight: 120, aggro: 0.5, accuracy: 85\r\n    }\r\n  },\r\n  moncalamari: {\r\n    name: \"Mon Calamari\",\r\n    minecraftModel: \"humanoid\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n      meleeDamage: 4, collisionRadius: 0.5, weight: 75, aggro: 0.4, accuracy: 60\r\n    }\r\n  },\r\n  halfpint: {\r\n    name: \"Half-Pint\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 0.6, scaleY: 0.6, scaleZ: 0.7,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.2, perceptionRadius: 20, attackCooldown: 3.0,\r\n      meleeDamage: 2, collisionRadius: 0.3, weight: 30, aggro: 0.2, accuracy: 60\r\n    }\r\n  },\r\n  quarterpint: {\r\n    name: \"Quarter-Pint\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 0.3, scaleY: 0.3, scaleZ: 0.4,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 18, attackCooldown: 3.0,\r\n      meleeDamage: 1, collisionRadius: 0.2, weight: 10, aggro: 0.1, accuracy: 60\r\n    }\r\n  },\r\n  hutt: {\r\n    name: \"Hutt\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 2.5, scaleY: 1.5, scaleZ: 5.5,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 2.0, perceptionRadius: 22, attackCooldown: 3.0,\r\n      meleeDamage: 10, collisionRadius: 1.2, weight: 500, aggro: 0.6, accuracy: 60\r\n    }\r\n  },\r\n\r\n  // --- HUMANS & TROOPERS ---\r\n  civilians: {\r\n      name: \"Civilian\",\r\n      minecraftModel: \"humanoid\",\r\n      stats: {\r\n          health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n          meleeDamage: 4, collisionRadius: 0.5, weight: 85, aggro: 0.4, accuracy: 60\r\n      }\r\n  },\r\n  human_male: {\r\n      name: \"Human Male\",\r\n      minecraftModel: \"humanoid\",\r\n      stats: {\r\n          health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n          meleeDamage: 4, collisionRadius: 0.5, weight: 85, aggro: 0.4, accuracy: 60\r\n      }\r\n  },\r\n  human_female: {\r\n      name: \"Human Female\",\r\n      minecraftModel: \"humanoid\",\r\n      scaleX: 1, scaleY: 1, scaleZ: 1,\r\n      stats: {\r\n          health: 50, speed: 0.0250, attackRange: 1.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n          meleeDamage: 3, collisionRadius: 0.45, weight: 70, aggro: 0.4, accuracy: 60\r\n      }\r\n  },\r\n  clone: {\r\n    name: \"Clone Trooper\",\r\n    minecraftModel: \"humanoid\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 15.0, perceptionRadius: 30, attackCooldown: 3.0,\r\n      meleeDamage: 5, collisionRadius: 0.5, weight: 80, aggro: 0.5, accuracy: 70\r\n    }\r\n  },\r\n  mandalorian: {\r\n    name: \"Mandalorian\",\r\n    minecraftModel: \"humanoid\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 15.0, perceptionRadius: 35, attackCooldown: 3.0,\r\n      meleeDamage: 6, collisionRadius: 0.5, weight: 82, aggro: 0.7, accuracy: 85\r\n    }\r\n  },\r\n  stormtrooper: {\r\n    name: \"Stormtrooper\",\r\n    minecraftModel: \"humanoid\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 15.0, perceptionRadius: 15, attackCooldown: 3.0,\r\n      meleeDamage: 5, collisionRadius: 0.5, weight: 80, aggro: 0.6, accuracy: 40\r\n    }\r\n  },\r\n  darth: {\r\n    name: \"Sith Lord\",\r\n    minecraftModel: \"humanoid\",\r\n     stats: {\r\n      health: 100, speed: 0.0250, attackRange: 2.0, perceptionRadius: 35, attackCooldown: 3.0,\r\n      meleeDamage: 10, collisionRadius: 0.5, weight: 85, aggro: 0.8, accuracy: 95\r\n    }\r\n  },\r\n\r\n  // --- DROIDS ---\r\n  droid_humanoid: {\r\n    name: \"Humanoid Droid\",\r\n    minecraftModel: \"humanoid\",\r\n    scaleX: 0.8, scaleZ: 0.8,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 14.0, perceptionRadius: 28, attackCooldown: 3.0,\r\n      meleeDamage: 4, collisionRadius: 0.4, weight: 100, aggro: 0.5, accuracy: 80\r\n    }\r\n  },\r\n  r2d2: {\r\n    name: \"R2 Unit\",\r\n    minecraftModel: \"humanoid\", // Needs custom model\r\n    scale: 0.6,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 20, attackCooldown: 3.0,\r\n      meleeDamage: 2, collisionRadius: 0.4, weight: 90, aggro: 0.1, accuracy: 80\r\n    }\r\n  },\r\n  r5d4: {\r\n      name: \"R5 Unit\",\r\n      minecraftModel: \"humanoid\", // Needs custom model\r\n      scale: 0.6,\r\n      stats: { health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 20, meleeDamage: 2, attackCooldown: 3.0, weight: 90, aggro: 0.1, accuracy: 80 }\r\n  },\r\n  bb8: {\r\n    name: \"BB Unit\",\r\n    minecraftModel: \"slime\",\r\n    scale: 0.5,\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 22, attackCooldown: 3.0,\r\n      meleeDamage: 1, collisionRadius: 0.3, weight: 30, aggro: 0.1, accuracy: 80\r\n    }\r\n  },\r\n  gonk: {\r\n    name: \"Gonk Droid\",\r\n    minecraftModel: \"slime\",\r\n    scale: 0.8,\r\n    stats: { health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 15, meleeDamage: 1, attackCooldown: 3.0, weight: 150, aggro: 0.0, accuracy: 80 }\r\n  },\r\n  mousedroid: {\r\n      name: \"Mouse Droid\",\r\n      minecraftModel: \"slime\", \r\n      scale: 0.4,\r\n      stats: { health: 50, speed: 0.0250, attackRange: 1.0, perceptionRadius: 18, meleeDamage: 1, attackCooldown: 3.0, weight: 20, aggro: 0.1, accuracy: 80 }\r\n  },\r\n   probe: {\r\n      name: \"Probe Droid\",\r\n      minecraftModel: \"humanoid\", // Needs custom spider model\r\n      stats: { health: 50, speed: 0.0250, attackRange: 12.0, perceptionRadius: 40, attackCooldown: 3.0, weight: 50, aggro: 0.5, accuracy: 80 }\r\n  },\r\n  irongolem: {\r\n    name: \"Large Droid\",\r\n    minecraftModel: \"irongolem\",\r\n    stats: {\r\n      health: 50, speed: 0.0250, attackRange: 2.5, perceptionRadius: 25, attackCooldown: 3.0,\r\n      meleeDamage: 15, collisionRadius: 0.8, weight: 400, aggro: 0.8, accuracy: 80\r\n    }\r\n  },\r\n};",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\character_upgrades.js",
      "originalSize": 26319,
      "condensedSize": 3666,
      "content": "// File: 620 lines condensed to 63 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE character_upgrades.js\nclass CharacterUpgrades {\n        // Auto-unlock all Carry powers for testing\n        // Setup UI button handlers\n        // Wait for nodes AND game state to load, then unlock all carry powers\n                // Find and auto-purchase all carry nodes (including carry_uniques)\n                // Auto-unlock social training and pamphlet speed\n        // Close button handler\n        // Undo button handler\n        // Confirm button handler\n        // Remove all pending purchases and revert their effects\n                // Refund wire cost using actual cost calculation\n        // Confirm all pending purchases (they're already applied, just clear pending status)\n        // Revert the effects of a node (opposite of applyNodeEffects)\n        // Revert stat changes\n        // Revert weapon slots\n        // Note: Some effects like starting_weapon can't be easily reverted\n    // Calculate actual cost based on column position (2^column)\n                // Play node selected sound\n                // Play cannot select sound\n            // Play cannot select sound\n        // Check if any other purchased node depends on this one\n            // Play cannot deselect sound\n        // Play node deselected sound\n        // Cannot purchase nodes damaged by DroidSlayer\n                // STORAGE & WEAPONS\n                    // Add spare cores (extra lives)\n                    // Update the spare core display\n                    // Unlock vision of all ships behind player\n                    // Unlock vision of up to 8 ships ahead\n                    // Enable ally-based ship control bonus\n                // SLICING\n                    // Enable slicing ability\n                    // Add bonus to slicing skill (+20 per upgrade)\n                // GONK\n                // ... (rest of the cases from previous step)\n        // This is the inverse of applyNodeEffects\n                // STORAGE & WEAPONS\n                    // NOTE: For simplicity, we don't re-lock slots. Severing a chain is complex.\n                    // We could disable the slot, but that has its own UI/UX challenges.\n                    // For now, the wire is refunded, but the slot remains accessible if unlocked.\n                    // This is tricky. We can't easily know what the \"previous\" starting weapon was.\n                    // For now, we'll do nothing, the player just loses the benefit.\n                    // Similar to above, we don't know the previous value. Assume it reverts to a base.\n                    // Remove spare cores\n                        // Update the spare core display\n                // GONK\n                // ... (rest of the cases from previous step)\n        // Show close button\n        // DEBUG: Draw grid dots (extend to show full range including row 22)\n        // Draw lines first so they are behind nodes\n                // Fallback to colored box with text\n                // Add black text for white/light gray backgrounds\n            // Check if this node is damaged by DroidSlayer\n            // Add damaged state overlay\n                // Create overlay with DroidSlayer portrait and red X\n                // Add label below\n                // Build tooltip with icon if available\n                    // Show full-size icon, not squished, using object-fit to maintain aspect ratio\n                // Position tooltip above node if row >= 9, below if row < 9\n                    // Position above the cursor\n                    // Position below the cursor\n// Instantiate the upgrade system",
      "compressionRatio": 0.13929100649720735,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\conversation_controller.js",
      "originalSize": 21780,
      "condensedSize": 2605,
      "content": "// File: 486 lines condensed to 53 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE conversation_controller.js\r\nclass ConversationController {\r\n        // State Machine Variables\r\n    // === UPDATE LOOP (Called from Game.update) ===\r\n        // 1. Distance Check (Abort if too far)\r\n                 // If they run away during a tense moment, trigger bad outcome\r\n        // 2. Sequence Logic (Timers for reading text)\r\n        // 3. Choice Timer (Q/E Input Timeout)\r\n        // Initialize Game State\r\n        // Set NPC State\r\n        // Set Ally State\r\n        // Physical Orientation\r\n        // Calculate Initial Tension based on Faction Relationship\r\n        // Relationship: 0 (Friendly) to 100 (Hostile)\r\n        // Desired Tension: +50 (Friendly) to -50 (Hostile)\r\n        // Formula: (50 - RelationshipDistance) * 2\r\n        // UI Setup\r\n        // Start Sequence: Step 1 - Appraisal\r\n        // Pick Descriptor based on 1-100 Relationship Scale\r\n        // Show Text (Slot 0)\r\n        // Highlight Ally\r\n        // 1. Guard Defense Roll (Insight/Suspicion)\r\n        // Simulates the guard \"checking\" the player. Moves gauge towards Red.\r\n        // Apply negative shift\r\n        // Update UI\r\n        // Select Phrase (m1 if tension is bad, i1 if neutral)\r\n        // Show Text (Slot 1)\r\n        // 2. Ally Attack Roll (Charm/Lie)\r\n        // Simulates ally trying to recover the gauge. Moves gauge towards Green.\r\n        // Weighted selection based on stats\r\n        // Apply positive shift\r\n        // Update UI\r\n        // Select Phrase based on Style (Charm->Diplomatic, Lie->Bluff)\r\n        // Show Text (Slot 2)\r\n            // --- GOOD OUTCOME ---\r\n            // Show Text (Slot 3)\r\n            // Slight relationship improvement\r\n            // --- BAD OUTCOME ---\r\n        // 30% chance of \"Han Shot First\" instant combat, or if faction isn't authoritative (like wild animals/aliens)\r\n            // Quip + Shoot\r\n            // Show Text (Slot 3 - Final action)\r\n                // Instant Hit Logic\r\n            // Choice (Q/E)\r\n            // Bribe calc: based on how bad the tension is\r\n                     // One last roll\r\n            // Shift faction base. Negative relChange = Closer (Better). Positive = Further (Worse).\r\n        // Keep gauge up for a moment to show result\r\n            // Relax attitude check for Replies/Quips\r\n                // Topic Strictness\r\n                // Style Matching\r\n        // Fallback if no specific phrase found\r\n             // Try generic fallback\r\n         // Trigger Audio based on slot/tone\r",
      "compressionRatio": 0.11960514233241507,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\conversation_logger.js",
      "originalSize": 5438,
      "condensedSize": 5438,
      "content": "// BROWSERFIREFOXHIDE conversation_logger.js\r\n\r\nclass ConversationLogger {\r\n    constructor() {\r\n        this.logStyle = 'background: #111; color: #aaeebb;';\r\n        this.headerStyle = 'background: #111; color: #aaffaa; font-weight: bold; font-size: 1.1em;';\r\n        this.factionStyle = 'background: #111; color: #88ddff;';\r\n        this.errorStyle = 'background: #111; color: #ff8888; font-weight: bold;';\r\n    }\r\n\r\n    start(initiator, target, attitude) {\r\n        console.groupCollapsed(`%cConversation Started: ${initiator.name} & ${target.name}`, this.headerStyle);\r\n        console.log(`%cInitiator: ${initiator.name} (Faction: ${initiator.faction}, Health: ${initiator.health}/${initiator.maxHealth})`, initiator.isAlly ? this.factionStyle : this.logStyle);\r\n        console.log(`%cTarget: ${target.name} (Faction: ${target.isAlly ? target.originalFaction : target.faction}, Health: ${target.health}/${target.maxHealth})`, target.isAlly ? this.factionStyle : this.logStyle);\r\n        console.log(`%cInitial Attitude: ${attitude}`, this.logStyle);\r\n        console.groupEnd();\r\n    }\r\n\r\n    phrase(speaker, phrase, reason) {\r\n        console.groupCollapsed(`%cPhrase Chosen: ${speaker.name}`, this.logStyle);\r\n        console.log(`%cText: \"${phrase.text}\"`, this.logStyle);\r\n        console.log(`%cType: ${phrase.type}, Attitude: ${phrase.attitude}, Language: ${phrase.language}, Topic: ${phrase.topic || 'none'}`, this.logStyle);\r\n        console.log(`%cReason: ${reason}`, this.logStyle);\r\n        console.groupEnd();\r\n    }\r\n\r\n    noPhraseFound(speaker, type, attitude, topic) {\r\n        console.groupCollapsed(`%cNo Phrase Found for ${speaker.name}`, this.errorStyle);\r\n        console.log(`%cType: ${type}`, this.logStyle);\r\n        console.log(`%cAttitude: ${attitude}`, this.logStyle);\r\n        console.log(`%cTopic Received: ${topic}`, this.logStyle);\r\n        console.log(`%cSpeaker Faction: ${speaker.isAlly ? speaker.originalFaction : speaker.faction}`, this.logStyle);\r\n        console.log(`%cSpeaker Language: ${speaker.config.language || \"language_basic\"}`, this.logStyle);\r\n        console.groupEnd();\r\n    }\r\n\r\n    interrupted(npc1, npc2) {\r\n        console.groupCollapsed('%cConversation Interrupted', this.errorStyle);\r\n        if (window.game.state.isPaused) console.log('%cReason: Game is paused.', this.errorStyle);\r\n        if (npc1) console.log(`%c${npc1.name} state: ${npc1.currentState}, isDead: ${npc1.isDead}`, this.logStyle);\r\n        if (npc2) console.log(`%c${npc2.name} state: ${npc2.currentState}, isDead: ${npc2.isDead}`, this.logStyle);\r\n        console.groupEnd();\r\n    }\r\n\r\n    outcome(outcome, value, initiator, target) {\r\n        console.groupCollapsed(`%cConversation Outcome: ${outcome}`, this.factionStyle);\r\n        switch (outcome) {\r\n            case 'relation_change':\r\n                console.log(`%cFaction relationship between ${initiator.faction} and ${target.isAlly ? target.originalFaction : target.faction} changed by ${value}.`, this.factionStyle);\r\n                break;\r\n            case 'push_faction_topic':\r\n                console.log(`%c${initiator.faction} and ${target.isAlly ? target.originalFaction : target.faction} relationship with ${value.target_faction} changed by ${value.change}.`, this.factionStyle);\r\n                break;\r\n            case 'combat':\r\n                console.log(`%c${initiator.name} is now hostile to ${target.name}.`, this.errorStyle);\r\n                break;\r\n            case 'end_dialogue':\r\n                console.log(`%cConversation ended peacefully.`, this.factionStyle);\r\n                break;\r\n            default:\r\n                console.log(`%cOutcome: ${outcome}, Value: ${JSON.stringify(value)}`, this.factionStyle);\r\n        }\r\n        console.groupEnd();\r\n    }\r\n\r\n    socialCheck(details) {\r\n        console.groupCollapsed('%cSocial Check Details', this.factionStyle);\r\n        console.log(`%cAttacker: ${details.initiator.name} (${details.offense_label}: ${details.attack_stat} + ${details.attacker_roll.toFixed(0)} = ${details.attacker_total.toFixed(0)})`, this.logStyle);\r\n        console.log(`%cDefender: ${details.target.name} (${details.defense_label}: ${details.defender_stat} + ${details.defender_roll.toFixed(0)} = ${details.defender_total.toFixed(0)})`, this.logStyle);\r\n        console.log(`%cDifferential: ${details.differential !== undefined ? details.differential.toFixed(0) : 'N/A'} -> Outcome: ${details.outcome_tier}`, this.factionStyle);\r\n\r\n        if (details.outcome_tier === 'h4') {\r\n            console.log(`%cPermanent Effect: ${details.target_faction_name} faction shifted 1 point towards 'gonk'.`, this.factionStyle);\r\n            console.log(`%cStatus Effect: ${details.target.name} is now a 'friend'.`, this.factionStyle);\r\n        }\r\n        if (details.actualShift !== undefined && details.actualShift !== 0) {\r\n            const shiftText = details.actualShift > 0 ? `+${details.actualShift}` : `${details.actualShift}`;\r\n            const targetFactionDisplayName = details.target_faction_name.charAt(0).toUpperCase() + details.target_faction_name.slice(1); // Capitalize first letter\r\n            console.log(`%c${targetFactionDisplayName} Friendship ${shiftText}`, this.factionStyle);\r\n        }\r\n        console.groupEnd();\r\n    }\r\n\r\n    end() {\r\n        console.log('%c--- Conversation Ended ---', this.headerStyle);\r\n    }\r\n}\r\n\r\nwindow.conversationLogger = new ConversationLogger();",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\conversation_ui_manager.js",
      "originalSize": 24438,
      "condensedSize": 1399,
      "content": "// File: 637 lines condensed to 31 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE conversation_ui_manager.js\r\nclass ConversationUIManager {\r\n        // 1. Main Container (Text Stack)\r\n        // Positioned Bottom-Left, above the Ally HUD\r\n        // 2. Initialize 4 Slots\r\n        // Start in Peek Mode\r\n        // Wrapper Style\r\n        // Box Style\r\n        // IMAGE PATH: Relative to web root\r\n            // POSITION FIX: Moved to right of Ally HUD (Assuming 4 allies x ~110px = 440px)\r\n            // Background: Image + Fallback Color\r\n        // Needle\r\n            // Align with Gauge\r\n        // Get values from sliders if they exist, otherwise use defaults\r\n    // === STATE & VISIBILITY ===\r\n        // Full hide logic (used if conversation aborts completely)\r\n        // Revert to Peek\r\n        // Ensure container exists but is empty\r\n        // Slide Up\r\n        // Glow Effect\r\n        // STACKING LOGIC\r\n        // 3 (Newest) -> 2 (Prev) -> 1 (Old) -> 0 (Ancient)\r\n                // CURRENT (Brightest)\r\n                // PREVIOUS (75% Opacity)\r\n                // OLD (50% Opacity)\r\n                // ANCIENT (25% Opacity)\r\n        // Set Content\r\n        // Appraisal Styling\r\n        // 3D Pointers logic\r\n        // Smooth Curve or straight line? Straight line for now\r\n// // window.conversationUIManager = new ConversationUIManager();",
      "compressionRatio": 0.057246910549144776,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\droidslayer_system.js",
      "originalSize": 34047,
      "condensedSize": 7186,
      "content": "// File: 920 lines condensed to 142 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE droidslayer_system.js\r\n// Manages the DroidSlayer nemesis system - promotion, abilities, persistence, and interactions\r\nclass DroidSlayerSystem {\r\n        // Variant types with their properties\r\n        // Eligibility tracking\r\n        // Check for DroidSlayer promotion conditions\r\n        // Update active DroidSlayer\r\n        // Cheat mode: instant promotion on next damage\r\n            // Find any NPC that's being damaged\r\n            // This will be triggered from the damage handler\r\n        // Check if player is \"doing too well\"\r\n        // Find eligible NPCs\r\n        // Weight the candidates\r\n        // Roll for promotion (10% chance per check when doing too well)\r\n        // Must be in combat\r\n        // Must have humanoid 3D mesh (not a krayt dragon or cow)\r\n        // Must not be hostileAll\r\n        // Must have at least 60% HP\r\n        // Must have been in combat for at least 30 seconds\r\n        // Must have a weapon\r\n        // Must have dealt damage at least 3 times (we'll track this with a new property)\r\n        // Check for recent ally kills by this NPC\r\n        // Check for witnessing player kills of their faction\r\n        // Survived long time against player\r\n        // Elite or boss type\r\n        // Closest to player\r\n        // Has dealt most damage to player\r\n        // Choose random variant\r\n        // Store original stats\r\n        // Apply transformation\r\n        // Show transformation sequence\r\n        // Damage a random node\r\n        // Set HP based on encounter count\r\n            // First encounter: invincible\r\n            // Second+ encounter: 3000 HP\r\n        // Make DroidSlayer never recruitable and always hostile\r\n        // Set perfect accuracy\r\n        // Scale up by 30%\r\n        // Perception radius to maximum\r\n        // Base speed increase for all DroidSlayers\r\n        // Apply variant-specific modifications\r\n        // Second+ encounter: equip red saber\r\n        // Update name\r\n        // Update nameplate\r\n            // Remove old nameSprite\r\n                // Dispose of old sprite\r\n            // Create new red nameSprite\r\n        // Change weapon to red saber\r\n        // Update weapon data\r\n        // Load red saber texture and update weapon mesh\r\n        // Enable bolt reflection based on encounter count\r\n        // Pause briefly with screen shake\r\n        // Play DroidSlayer activation scream\r\n        // Show conversation-style announcement\r\n        // Create red glow effect\r\n        // Fade out current music and start Tyranitar Orchestral\r\n                // Fade current track\r\n                        // Play Tyranitar track (use relative path)\r\n        // After roar (4 seconds), play weapon charge sound (3 seconds)\r\n        // Fire burst after roar + charge (7 seconds total)\r\n        // Spawn minions after burst\r\n        // Set ally target priority after everything\r\n            // Always prioritize first ally if available\r\n            // Hide conversation UI\r\n        // Create a pulsing red light\r\n        // Animate the light\r\n        // Fire 12 shots in a 120-degree arc\r\n            // Enhanced bolts (50% bigger, 20% brighter, 25% faster)\r\n        // Play weapon sound\r\n        // Get medium-power NPCs of the same faction (Threat 2)\r\n        // macroCategory is capitalized version of faction\r\n            // Pick random minion from available\r\n            // Spawn position around the DroidSlayer\r\n            // TODO: Actually spawn the NPC using the game's spawn system\r\n            // This would require accessing the level manager's spawn logic\r\n        // Find unpurchased nodes\r\n        // Pick a random one\r\n        // Check for flee condition (use dynamic threshold)\r\n        // If already fleeing, force movement toward exit\r\n                // Move at maximum speed toward exit\r\n        // Determine target: prioritize first ally if available\r\n            // Update target if not already set\r\n        // Aggressive advancement: constantly move toward target\r\n            // Force DroidSlayer to always advance toward target\r\n                // Determine speed based on weapon type and distance\r\n                    // Melee weapon: advance FAST\r\n                    // Shooting at target or close range: advance slowly\r\n                    // Closing distance: advance at normal speed\r\n                // Override NPC velocity to force advance\r\n        // Check for stuck behind obstacles (missed hits without dealing damage)\r\n            // Enable no-clip mode to phase through obstacles\r\n        // Handle no-clip timer\r\n        // Set fleeing flag to prevent re-triggering\r\n        // Increment encounter count\r\n        // Choose a flee target level at least 4 ships away\r\n        // Show \"I'll be back!\" message immediately\r\n        // Find nearest door or spawner\r\n            // Path to the exit\r\n            // When reaching exit, disappear\r\n            // Also set a timeout - if not reached exit in 15 seconds, force escape\r\n            // No exit found, just disappear after showing message\r\n        // Hide conversation UI after 8 seconds\r\n        // Select a level at least 4 ships away from current level\r\n        // Choose random direction: forward or backward\r\n        // Check doors\r\n                // Door has meshGroup with position\r\n        // Check spawners\r\n        // Fallback: if no exit found, create a random position away from player\r\n        // Remove from scene\r\n        // Clear active DroidSlayer reference\r\n        // DroidSlayer persists via encounterCount - will reappear stronger in another level\r\n        // Teleport to far side of door\r\n        // Open the door\r\n        // TODO: Find the actual door entity and call its open method\r\n        // Charge back toward player\r\n        // Shadow variant teleports randomly around the battlefield\r\n        // Make sure it's valid ground\r\n        // Visual effect\r\n        // TODO: Add particle effect\r\n        // Cheat mode: instant promotion\r\n        // Track damage dealt by this NPC\r\n        // Apply variant damage reduction\r\n        // Track hits/misses for pathing detection\r\n        // This would be called when the DroidSlayer fires but doesn't hit\r\n        // Reset miss counter on successful hit\r\n        // Thief variant steals wire\r\n            // Show popup (max once per 10 seconds)\r\n                // TODO: Show UI popup \"Wire Supply Damaged by DroidSlayer\"\r\n    // Called when character sheet is opened after DroidSlayer spawns\r\n        // This would integrate with character_upgrades.js to show the damaged node\r\n        // For now, just log it\r\n        // TODO: Add visual overlay on the character sheet showing the damaged node\r\n    // Check if a node is damaged\r\n    // Repair the damaged node (called from end-of-level perk selection)\r\n    // Persistence methods\r\n        // TODO: Recreate the DroidSlayer in the current level or mark for spawning\r\n// Enhanced BlasterBolt for DroidSlayer\r\nclass DroidSlayerBolt extends BlasterBolt {\r\n        // Scale up the bolt\r\n        // Increase brightness\r\n        // Increase speed\r\n// Initialize global system\r",
      "compressionRatio": 0.21106118013334507,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\editor.js",
      "originalSize": 99206,
      "condensedSize": 4922,
      "content": "// File: 2102 lines condensed to 80 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE editor.js\n// update: Removed the fetch call for the deprecated `level_templatesdotjson` to prevent console warnings on startup.\n// update: The editor's `placeItem` function now correctly reads the `soundSet` property from the asset manager and saves it to the NPC's data in the level file.\n// update: Corrected name generation logic to prioritize macroCategory and handle case differences.\n// update: Removed name generation call from placeItem. Editor now uses placeholders.\nclass LevelEditor {\n        // Room tool state\n        // this.nameData is now managed by EditorAssetManager\n        // Preload enemy spawner icons for all types and levels\n    // This function remains in the editor UI for placeholder generation\n        // Prioritize macroCategory for name type\n        // Mapping for Name Lists (same as in npc_behavior.js)\n        // Special case for Wookiee name placeholders\n        // Return placeholder string\n        // If placing a random NPC, the brush is already the itemData\n        // Handle random furniture placement\n                // Handle random_npc brush type\n            // Log furniture placement with selection counter\n        // Clone surrounding walls/overlays\n            // Handle room tool selection completion\n        // Handle room tool selection dragging\n        // Draw room selection rectangle\n        // Draw pending room bounds (if panel is open)\n                // Add label for furniture assets\n            // Try to load the actual spawner image\n                // Draw the actual spawner graphic\n                // Rotate based on facing direction (the arrow in the PNG indicates direction)\n                // Draw the image centered and at grid size (matches wall height)\n                // Fallback: Draw colored rectangle with indicators\n                // Color based on attitude\n                // Draw rounded rectangle with curved appearance\n                // Main body\n                // Draw rotation indicator\n                // Draw threat indicator text\n        // Tier 1: Always check the active layer first. If something is there, select it.\n        // Tier 2: If the active layer is empty at this spot, find all items and prioritize interactive ones.\n        // Return the important item if found, otherwise return the topmost item.\n                    // Explicitly filter out any tile that uses the default texture for that layer.\n    /**\n     * Decompresses level data from v2 compressed format to v1 legacy format\n     * Same as levelManager.js decompression\n     */\n        // Auto-detect format version\n            // Legacy format - return as-is\n        // Convert defaults (these are ONLY for layers with actual defaults)\n        // Expand layers - ONLY expand overrides (no default fill)\n                    // Preserve all properties\n                    // Set defaults for required fields\n                // Non-sparse layers (npcs, furniture, etc.) pass through\n            // Decompress if needed (auto-detects v2 compressed format)\n        // Helper to get random texture from themed folder\n        // Get textures from themed folders (style/theme structure)\n        // Floors, ceilings, doors, AND walls ARE organized by style/theme\n        // Ceiling sides ARE organized by style/theme\n        // REQUIRE themed textures - NO FALLBACK\n        // Get ceiling side texture path with fallback\n            // Fallback to global default if themed version doesn't exist\n        // Get elevation side texture path with fallback\n            // Fallback to global default\n            // 1. Place floors\n                    // Don't overwrite existing floor tiles\n                    // Handle elevation if specified (don't overwrite existing)\n                    // Handle water if specified (don't overwrite existing)\n                    // Place ceilings (don't overwrite existing)\n            // 2. Place walls around the room perimeter (don't overwrite existing)\n            // Top wall (horizontal, along y1-1)\n            // Bottom wall (horizontal, along y2)\n            // Left wall (vertical, along x1-1)\n            // Right wall (vertical, along x2)\n            // 3. Place doors at x=10 intervals on top AND bottom walls (avoiding level edges)\n                // Top wall (y1-1) - only if not at y=0 level edge\n                // Bottom wall (y2) - only if not at maximum y level edge\n            // 4. Place NPCs based on threat budget\n                    // Pick a random threat level\n                        // Find random position within room, at least 1 unit away from walls\n                        // Don't place NPC if one already exists there\n        // Re-randomize all textures within the room bounds\n            // Shuffle floors\n            // Shuffle walls\n                        // Reroll the texture",
      "compressionRatio": 0.049613934641049934,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\editor_ui_and_assets.js",
      "originalSize": 119575,
      "condensedSize": 7075,
      "content": "// File: 2230 lines condensed to 111 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE editor_ui_and_assets.js\n// update: The asset manager now correctly reads and stores the `soundSet` property from charactersdotjson, fixing the NPC hurt sound data pipeline.\n// update: Rewrote the skybox palette UI to use a clearer \"None/Static/Animated\" selection method.\n// fix: Skybox discovery now stores full paths for static files, fixing 404 errors in editor palette previews.\n// fix: Skybox folders now display as folder icons instead of attempting to load them as images.\n// fix: Skybox key extraction now properly saves just the filename to level JSON for game compatibility.\n// fix: Furniture discovery now auto-scans models/block/ folder instead of relying on manual furniture_config.json.\nclass EditorAssetManager {\n            // Get files from current directory\n            // Recursively scan subdirectories\n            // Provide fallback defaults\n        // Load config first\n                // Fetch as text first to strip out comments (lines starting with #)\n                // Attempt to fix unterminated strings, a common manual JSON editing error.\n                // Add the main character groups, skipping special keys\n        // Load name data here to make it globally available\n            // The JSON file has a _comment key, which should be removed.\n        // Load NPC weapon data\n                // Store full paths for static files so they can be previewed\n                // Store folder names (without trailing slash) for animated/random folders\n            // Layers that have style/theme subdirectories need recursive scanning\n        // FIX: Scan all subdirectories within NPConlyweapons to correctly discover all weapon assets.\n        // Auto-discover furniture models from models/block/ folder\n                // Load all furniture icons in parallel - local server can handle it\n                    // Check for override first\n                    // Try standard patterns\n                    // Fallback to placeholder\n        // Discover music categories and tracks\n                        // --- Start of Data Consolidation ---\n                        // Combine global, base type, and individual texture properties\n                            // Ensure critical properties are set\n                        // --- End of Data Consolidation ---\n        // This mapping logic translates a subgroup string into a check against an NPC's config.\n            // Check threat level and macro-category\n                // Check subgroup if specified\nclass EditorUI {\n        // This is a global reference for the asset manager to call\n        // Handle random NPC placeholders\n            // Default name generation fix\n            // FIX: Prioritize macroCategory, as baseType can sometimes be the same string (e.g. \"clone\")\n            // and overwrite the intended category. This is the root cause of the editor naming bug.\n            // Generate inputs for all properties, starting with common ones.\n            // Hide the weapon group for now, it will be populated below\n            // Populate default weapon display\n            // Populate override weapon dropdown\n            // Add all NPC weapons to the dropdown\n            // Set current selection\n                // Check if the current weapon is one of the available paths\n                    // If the weapon is set but not in the list (e.g., a custom weapon or old path),\n                    // try to match by filename. If still not found, default to 'none'.\n            // Filter out properties we don't want to show in the editor, including the 'weapon' property now handled by the dedicated fields.\n            // Generate inputs for all other properties\n        // If not an NPC, hide the weapon group\n        // Handle dock properties\n        // Handle spawn point properties\n                        // Only save the property if it's not empty or is a number\n                // Handle the new weapon override dropdown\n        // Hide the weapon group when the panel is hidden\n        // Add \"Random Furniture\" option at the top\n        // Define 5 spawn types with their defaults per level (1-5)\n        // Create level selector\n        // Add level button click handlers\n                // Update ALL spawn type icons to match the new level\n                // Re-select the active spawn type with new level defaults\n        // Create spawn type items\n            // Create icon image - use the actual spawner graphic\n            // Level indicator\n                // Update icon to match selected level (redundant but ensures consistency)\n                // For folders (animated/random skyboxes), show folder icon with name\n                // Remove active class from all items in this palette\n                // Update the editor's default texture object\n                // For skybox, extract just the filename for the key\n                // Trigger a state change and re-render\n        // Add a \"None\" option\n        // Add items for each texture\n                // Check if this is a folder (for skybox animated/random types)\n        // Set the initial active item\n        // Keep dropdowns for layers that still use them\n        // Use new palette UI for other defaults\n        // Special handling for skybox which has static and animated types\n        // Populate music settings\n        // Populate category dropdown\n        // Populate track dropdown (all tracks from all categories)\n        // Handle type switching\n        // Initialize display\n        // Load existing music settings if present\n            // Remove music setting (use default random behavior)\n        // Update music settings UI\n                    // Add an explicit 'none' entry. The game's createSkybox function\n                    // will see the null key and correctly remove the skybox.\n                    // Extract just the filename (without path) for the level JSON key\n                    // The game's assetManager.skyboxSets uses base names as keys\n        // Helper to find matching option (handles both full paths and filenames)\n            // Try direct match first\n            // Try matching by filename (option value ends with the key)\n        // Set initial state\n        // Populate wall2 and wall3 dropdowns\n            // Default texture mappings for each style\n                // Put style default first if it exists\n                // Auto-select the \"auto\" option so it uses style default\n                // Put style default first if it exists\n                // Auto-select the \"auto\" option so it uses style default\n        // Initialize dropdowns with current style\n            // Update dropdowns when style changes\n        // Handle faction change to populate subgroups\n                    // Find all subgroups for this faction\n        // Handle generate button\n        // Handle cancel button\n        // Handle shuffle button\n        // Initialize panel if first time\n        // Auto-select wall2/wall3 based on style if set to auto",
      "compressionRatio": 0.05916788626385114,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\endOfLevelManager.js",
      "originalSize": 8035,
      "condensedSize": 8035,
      "content": "// BROWSERFIREFOXHIDE endOfLevelManager.js\n// Manages the end-of-level summary screen, stats display, and perk selection.\n\nclass EndOfLevelManager {\n    constructor() {\n        this.container = document.getElementById('end-of-level-container');\n        this.statsContainer = document.getElementById('eol-stats-container');\n        this.perksContainer = document.getElementById('eol-perks-container');\n        this.allyContainer = document.getElementById('eol-ally-container');\n        this.continueButton = document.getElementById('eol-continue-button');\n\n        this.perks = [];\n        this.resolvePromise = null;\n\n        this.continueButton.addEventListener('click', () => this.hide());\n    }\n\n    async loadPerks() {\n        if (this.perks.length > 0) return;\n        try {\n            const response = await fetch('data/end_of_level_perks.json');\n            const data = await response.json();\n            this.perks = data.perks;\n        } catch (error) {\n            console.error(\"Failed to load end_of_level_perks.json:\", error);\n        }\n    }\n\n    show(stats) {\n        return new Promise(async (resolve) => {\n            this.resolvePromise = resolve;\n            \n            // In the future, we will replace these placeholders with real stats\n            const placeholderStats = {\n                foesDefeated: Math.floor(Math.random() * 20),\n                spawnersSliced: Math.floor(Math.random() * 3),\n                alliesMade: Math.floor(Math.random() * 2),\n                friendsMade: Math.floor(Math.random() * 5),\n                factionChanges: [{faction: 'Rebels', change: '+5 Friendship'}, {faction: 'Imperials', change: '+9 Conflict'}],\n                damageTaken: Math.floor(Math.random() * 100),\n                powerUsed: Math.floor(Math.random() * 500),\n                timeTaken: `${Math.floor(Math.random() * 10)}:${Math.floor(Math.random()*60).toString().padStart(2,'0')}`,\n                wireBonus: Math.random() > 0.5 ? 50 : 0,\n            };\n\n            this.populateStats(placeholderStats);\n            this.populateAllies();\n            await this.loadPerks();\n            this.populatePerks();\n\n            this.container.style.display = 'flex';\n        });\n    }\n\n    hide() {\n        this.container.style.display = 'none';\n        if (this.resolvePromise) {\n            this.resolvePromise();\n            this.resolvePromise = null;\n        }\n    }\n\n    populateStats(stats) {\n        this.statsContainer.innerHTML = `\n            <h2>Level Complete</h2>\n            <p>Foes Defeated: ${stats.foesDefeated}</p>\n            <p>Spawners Sliced: ${stats.spawnersSliced}</p>\n            <p>Allies Made: ${stats.alliesMade}</p>\n            <p>Friends Made: ${stats.friendsMade}</p>\n            <p>Damage Taken: ${stats.damageTaken}</p>\n            <p>Power Used: ${stats.powerUsed}</p>\n            <p>Time Taken: ${stats.timeTaken}</p>\n            <p>Speed Bonus: ${stats.wireBonus} wire</p>\n            <hr>\n            <p>Faction Relationship Changes:</p>\n            ${stats.factionChanges.map(c => `<span>${c.faction}: ${c.change}</span>`).join('<br>')}\n            <hr>\n            <p><em>Collect Faction Award TBD</em></p>\n        `;\n    }\n\n    populateAllies() {\n        this.allyContainer.innerHTML = '<h3>Party Management</h3>';\n        if (window.game && window.game.state.allies.length > 0) {\n            window.game.state.allies.forEach(ally => {\n                const allyDiv = document.createElement('div');\n                allyDiv.className = 'eol-ally';\n                allyDiv.innerHTML = `\n                    <span>${ally.npc.name} (Health: ${ally.npc.health.toFixed(0)}/${ally.npc.maxHealth})</span>\n                    <button data-ally-id=\"${ally.npc.mesh.group.uuid}\">Dismiss</button>\n                `;\n                this.allyContainer.appendChild(allyDiv);\n            });\n        } else {\n            this.allyContainer.innerHTML += '<p>No active allies.</p>';\n        }\n    }\n\n    populatePerks() {\n        this.perksContainer.innerHTML = '<h3>Choose a Perk</h3>';\n        let availablePerks = [...this.perks];\n        const chosenPerks = [];\n\n        // Check if DroidSlayer has damaged a node - if so, always include repair perk\n        const hasDamagedNode = window.droidSlayerSystem && window.droidSlayerSystem.damagedNode;\n        if (hasDamagedNode) {\n            const repairPerk = availablePerks.find(p => p.id === 'repair_damaged_node');\n            if (repairPerk) {\n                chosenPerks.push(repairPerk);\n                availablePerks = availablePerks.filter(p => p.id !== 'repair_damaged_node');\n            }\n        } else {\n            // Remove repair perk from available pool if no damaged node\n            availablePerks = availablePerks.filter(p => p.id !== 'repair_damaged_node');\n        }\n\n        // Select random perks to fill remaining slots (total 2 perks)\n        const remainingSlots = 2 - chosenPerks.length;\n        for (let i = 0; i < remainingSlots && availablePerks.length > 0; i++) {\n            const randIndex = Math.floor(Math.random() * availablePerks.length);\n            chosenPerks.push(availablePerks.splice(randIndex, 1)[0]);\n        }\n\n        chosenPerks.forEach(perk => {\n            const perkDiv = document.createElement('div');\n            perkDiv.className = 'eol-perk';\n            perkDiv.innerHTML = `\n                <h4>${perk.title}</h4>\n                <p>${perk.description}</p>\n            `;\n\n            // Add click listener to apply perk\n            perkDiv.addEventListener('click', () => {\n                this.applyPerk(perk);\n            });\n\n            this.perksContainer.appendChild(perkDiv);\n        });\n    }\n\n    applyPerk(perk) {\n        console.log(`Applying perk: ${perk.id}`);\n\n        switch (perk.id) {\n            case 'repair_damaged_node':\n                if (window.droidSlayerSystem) {\n                    window.droidSlayerSystem.repairNode();\n                    alert('Node repaired! You can now purchase it again.');\n                }\n                break;\n\n            case 'heal_self_for_wire':\n                // Calculate cost and apply heal\n                const healthDeficit = window.game.state.playerStats.max_health - window.game.state.health;\n                const percentDeficit = (healthDeficit / window.game.state.playerStats.max_health) * 100;\n                const cost = Math.ceil(percentDeficit / 2);\n\n                if (window.game.state.wire >= cost) {\n                    window.game.state.wire -= cost;\n                    window.game.state.health = window.game.state.playerStats.max_health;\n                    alert(`Healed to full! Cost: ${cost} wire.`);\n                } else {\n                    alert(`Not enough wire! Need ${cost}, have ${window.game.state.wire}.`);\n                    return; // Don't close screen\n                }\n                break;\n\n            case 'heal_top_allies':\n                // Heal two most injured allies\n                const allies = window.game.state.allies\n                    .filter(a => !a.isDeadAlly && a.npc && !a.npc.isDead)\n                    .sort((a, b) => {\n                        const aHealthPercent = a.npc.health / a.npc.maxHealth;\n                        const bHealthPercent = b.npc.health / b.npc.maxHealth;\n                        return aHealthPercent - bHealthPercent;\n                    });\n\n                for (let i = 0; i < Math.min(2, allies.length); i++) {\n                    allies[i].npc.health = allies[i].npc.maxHealth;\n                }\n                alert(`Healed ${Math.min(2, allies.length)} allies to full health!`);\n                break;\n\n            case 'temp_speed_boost':\n                // Apply temporary speed boost\n                // TODO: Implement temporary buff system\n                alert('Speed boost applied for 3 ships!');\n                break;\n\n            default:\n                console.warn(`Unknown perk: ${perk.id}`);\n        }\n\n        // Close the end-of-level screen after applying perk\n        this.hide();\n    }\n}\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\enemy_spawn_point.js",
      "originalSize": 37083,
      "condensedSize": 6363,
      "content": "// File: 861 lines condensed to 103 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE enemy_spawn_point.js\nclass EnemySpawnPoint {\n        // Mesh components\n        // Textures (will be loaded)\n        // Cache the initial faction so it doesn't change when relationships shift\n        // Log spawner creation\n        // Create a curved mesh that is CONCAVE (inward, not outward)\n        // Wall segment size (standard grid unit) - matches standard wall height\n        // Create curved geometry using a subdivided plane with vertex displacement\n        // Apply CONCAVE curve - parabolic curve going INWARD (negative Z)\n            // Normalized position from -1 to 1\n            // INVERTED parabolic: maximum depth at center (0,0), zero at edges (Â±1)\n            // Negative value makes it concave (inward)\n        // Create material with placeholder texture\n        // Use FrontSide only so it's only visible from the spawner side, not through walls\n        // Create crack overlay mesh (same geometry, transparent)\n        // Faction overlay removed - faction indicator is handled by the door textures internally\n        // Apply rotation based on facing direction\n        // Position the group at grid position with bottom touching ground\n        // The mesh is centered at origin, so move Y up by half height\n        // position.y from level is at ground level (y=0 for floor)\n        // Move to the OPPOSITE edge so the concave dent goes INTO the next grid square\n        // The spawner sits on the \"top\" side of the square (in map view) with dent going up\n        // Load door animation textures\n        // Load closed door texture\n        // Load door opening frames (1-21)\n        // Load crack textures (1-6)\n        // Update active threat count by checking which spawned NPCs are still alive\n        // Update door animation\n        // Check if we should spawn - based on ACTIVE threat, not total lifetime threat\n        // Update crack overlay based on damage\n        // Remove dead NPCs from tracking and recalculate active threat\n            // Check if NPC still exists in game and is alive\n        // Remove dead NPCs from tracking\n        // Calculate crack level (0-6, where 0 = no cracks)\n        // At 1/7 damage = level 1, at 6/7 damage = level 6\n        // Play explosion sound\n        // Create explosion effect\n        // Replace with broken texture immediately (1 frame after explosion starts)\n        // Dispose of main mesh resources but keep broken mesh visible permanently\n            // Dispose of original spawner resources (but NOT the broken mesh)\n            // Dispose original textures\n            // NOTE: Keep brokenMesh and brokenTexture - they remain visible as debris\n        // Hide the curved mesh and crack overlay\n        // Load and display the broken spawner texture with same CONCAVE geometry\n            // Create concave geometry for broken texture (same as main mesh)\n            // Add to group (inherits group's position and rotation)\n        // Load explosion frames\n            // Create billboard sprite for explosion - 20% larger than before\n            // Make it always face the camera\n            // Animate through frames\n                    // Keep facing camera\n        // Calculate what to spawn based on ACTIVE threat budget (not lifetime total)\n        // Determine threat for this spawn wave (threat_per_minute is per minute, convert to per spawn)\n        // Select NPCs to spawn\n        // Don't add to activeThreat yet - will be added when NPCs actually spawn\n        // Reset spawn timer\n        // Start door opening animation\n        // Determine faction based on attitude\n        // Build criteria for NPC selection\n        // Fill up the threat budget\n            // Pick a random threat level that fits\n        // If we already cached the faction, use it (prevents faction switching when relationships change)\n        // If faction is explicitly set, use it\n                // Find most hostile faction (highest relationship score)\n                // Find most friendly faction (lowest relationship score)\n                // TODO: Use ship's primary faction when implemented\n                // TODO: Use ship's secondary faction when implemented\n                // Random faction\n        // Cache the selected faction\n        // Map faction keys to macro categories\n        // Determine the faction based on spawner attitude and return its color\n        // Fallback colors based on attitude\n        // Play door open sound slightly before animation starts\n                // Opening animation\n                // Spawn NPCs when door is fully open (around frame 10-15)\n                // Closing animation (reverse)\n                // Play close sound at start of closing\n                // Animation complete, return to closed\n        // Calculate spawn position - as close to the center-back of the spawner as possible\n        // The spawner is positioned at the BACK edge of its grid square (negative Z offset)\n        // So NPCs should spawn at the CENTER of that same grid square (no offset)\n        // This makes them emerge from the door itself\n        // Check if NPC exists in asset manager\n            // Find similar keys for debugging\n        // CRITICAL: Preload the texture if not already loaded\n        // Use the FULL key for texture lookup - textures are stored with full path keys\n            // Get the full path from skinPathMap\n                    // Load texture with the FULL key as the second argument for consistent lookup\n                    // Verify the texture was loaded with the correct key\n                // Debug: Show available keys in skinPathMap\n        // Create NPC item data similar to level loading\n        // Generate name for the NPC\n        // Create the NPC through the level renderer\n        // Use levelRenderer to create the NPC\n                // After NPC is created, apply forced aggro if needed\n                    // Get the most recently added NPC (should be ours)\n                        // Track this NPC for active threat calculation\n                        // Force aggro on player\n                    // Track non-enemy NPCs too for active threat\n// Manager class to handle all spawn points in a level\nclass EnemySpawnPointManager {\n        // Update all spawn points, remove destroyed ones",
      "compressionRatio": 0.17158805921850984,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\environment_and_physics.js",
      "originalSize": 80929,
      "condensedSize": 4460,
      "content": "// File: 1431 lines condensed to 76 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE environment_and_physics.js\n// update: Corrected TypeError by changing playerSphere.distanceTo(pickup.mesh.position) to playerSphere.center.distanceTo(pickup.mesh.position) as THREE.Sphere has no direct distanceTo method.\n// update: The `createSkybox` function now explicitly checks for a null or empty key, ensuring the \"None\" option in the editor correctly removes the skybox.\n// update: Replaced performance-intensive PointLights on blaster bolts with billboarded glow sprites for significant optimization in large battles.\n// --- OBB UTILITY CLASS (EMBEDDED TO FIX CRASH) ---\n    class OBB {\n// --- END OF EMBEDDED OBB CLASS ---\n// --- CONFIGURATION LOADING ---\nasync function loadPhysicsConfig() {\n    console.log('Physics config loaded');\n    }\n    return PHYSICS_CONFIG;\n}\nasync function loadRenderingConfig() {\n    console.log('Rendering config loaded');\n    }\n    return RENDERING_CONFIG;\n}\n// --- BLASTER BOLT GLOBALS (OPTIMIZATION) ---\n// --- COLLISION CONSTANTS (loaded from config) ---\nclass LevelRenderer {\n        // Clone the material to avoid modifying the original in the asset manager\n        // Ensure texture repeats instead of stretching\n        // Apply small offsets to prevent Z-fighting\n        // Create base layers from defaults\n        // Process sparse tile data on top of defaults\n            // Set home spawn point if this is level 1 (or current home level)\n    // This function remains in the editor UI for placeholder generation\n        // Prioritize macroCategory for name type\n        // Mapping for Name Lists (same as in npc_behavior.js)\n        // Return placeholder string\n        // Initialize furniture tracking array if not exists\n                // Calculate bounding box to align bottom to ground\n                // Store metadata for culling/LOD\n                // Add visible model to the scene\n                // Create a simplified physics object for each element\n                        // Store reference to parent furniture\n            // Pass ground-level position; spawner mesh will adjust Y internally\n            // Add the mesh to the scene\n        // Explicitly handle \"None\" selection\n            // Fallback to a space-like dark blue color instead of null\n        // Auto-detect folder types if no explicit type was given\n            // If it's a folder, default to animation (numbered frames)\n            // Static skybox\n                // Prioritize the instance-specific weapon property from the level data.\n                // Fallback to the default_weapon from the character config (e.g., 1_aliens.json).\nclass Door {\nclass Dock extends Door {\nclass PhysicsSystem {\n            // For OBB, we create a box and apply the mesh's world matrix to it.\n                // Check if any parent object corresponds to an active wall collider\n            // ADDED: Ledge detection logic for NPCs\n            // --- Ground/Ceiling Collision for Pamphlets ---\n            // --- Wall Collision ---\n            // --- Bolt Reflection Check (NPCs) ---\n            // Check if any NPC with saber can reflect this bolt\n                        // Bolt was reflected, mark for removal\n            // --- Bolt Reflection Check (Player) ---\n            // Check if player can reflect incoming bolts\n                    // Bolt was reflected, mark for removal\n            // --- Entity Collision ---\n                // --- Friendly Fire Checks ---\n                    // Broadphase: Check against the NPC's single bounding sphere first.\n                        // Narrowphase: If broadphase passes, check individual hitboxes.\n            // --- Enemy Spawn Point Collision ---\n                    // Create a bounding sphere for the spawn point using actual mesh position (at edge, not grid center)\n        // ADDED: Pickup collision check (Fixes TypeError by using .center)\n            // FIX: Use playerSphere.center.distanceTo(pickup.mesh.position)\n                    // Player is completely inside the box, find the smallest escape route.\n                // If we are pushing the entity UP, it's a ground collision.\n        // Check for terminal interaction first (slicing system)\n        // Limit active ragdolls - remove oldest if at limit\n                // Fade out\n                // Physics\n                // Ground collision\n                // Also remove from old ragdolls array",
      "compressionRatio": 0.055110034721793176,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\faction_avatar_manager.js",
      "originalSize": 16100,
      "condensedSize": 2133,
      "content": "// File: 339 lines condensed to 28 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE faction_avatar_manager.js\r\n// update: Integrated the Mandalorian faction into the avatar system.\r\n// update: Implemented the 'hidden until encountered' logic based on player stats to hide faction avatars until discovered.\r\n// update: Implemented dynamic pixel offset positioning based on relationship score (1px per 10 points from 4px base).\r\n// update: Removed excessive directory listing console logs.\r\nclass FactionAvatarManager {\r\n        // Define the 3x3 grid order\r\n        // Create avatar elements in the DOM based on the fixed grid order\r\n            // If it's the Gonk slot, use the existing animated image element directly.\r\n                // Get the relocated animated element from main.js and put it inside the box.\r\n                     // Fallback image if JS doesn't move the animated element yet.\r\n            // Populate the factionAvatars array with references\r\n    // NEW: Function to calculate and apply the pixel offset based on relationship score\r\n        // Offset per 10 points of relationship distance (0-100 score)\r\n        // Determine which grid position this faction is at to calculate vector from center\r\n        // Calculate the vector component for X\r\n        // Calculate the vector component for Y\r\n        // Corner logic: corners move 1px in BOTH directions per 10 points.\r\n        // Axial logic: center row/col move 1px in ONE direction per 10 points.\r\n        // The above calculations already implement this. If col is 1 (center) xOffset is 0. If col is 0 or 2, xOffset is non-zero. Same for Y.\r\n        // Update border style dynamically (new)\r\n            // Handle visibility based on encountered flag\r\n            // Update glow effect based on relationship trend\r\n            // Skip animation for Gonk slot (already handled by main.js)\r\n            // Check if it's time to start an animation\r\n                // Special logic for idle states\r\n            // Process the animation frame\r\n                        // Animation finished, go back to base and wait\r",
      "compressionRatio": 0.13248447204968944,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\faction_manager.js",
      "originalSize": 16023,
      "condensedSize": 1977,
      "content": "// File: 347 lines condensed to 27 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE faction_manager.js\r\nclass FactionManager {\r\n        // New ally pull strength model (in \"points\" or grid units)\r\n        // Ensure pushForces are symmetrical and handle missing entries\r\n                // Ensure B has A's push force if A defines it and B does not\r\n                // Ensure A has B's push force if B defines it and A does not\r\n                // Score is now directly proportional to distance. Low score = friendly.\r\n        // Cap deltaTime to prevent physics explosion when tab is inactive\r\n        // This part is now just for the UI simulation sliders\r\n        // Re-add processing for active allies in the party\r\n        // Process real in-game ally recruitment events\r\n        // --- Process Kill Events ---\r\n            // Apply repulsion impulse to the victim faction's current position\r\n        // --- Calculate Net Forces ---\r\n        // --- Mutual Push Forces (calculated once per pair) ---\r\n                    // Apply push force to the faction's current position/velocity\r\n        // --- Home Pull & Alliance Pull Calculation ---\r\n            // ALWAYS apply \"rubber band\" force towards home. This ensures factions return.\r\n                // Simple linear pull force based on distance and elasticity\r\n            // Apply alliance pull force towards the player\r\n                // Add a \"dead zone\" of 10 units around the player\r\n        // --- Apply Forces and Update Positions ---\r\n            // Fallback if the data isn't loaded, assuming higher score is more hostile\r\n        // Sort attitudes by threshold descending to check from highest to lowest\r\n        // Default fallback to the attitude with the lowest threshold\r\n        // This function is deprecated and now a no-op. All relationship changes are physics-based.\r\n        // NOTE: The visual shift will occur on the next physics step due to home pull force.\r",
      "compressionRatio": 0.12338513387006178,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\furniture.js",
      "originalSize": 13309,
      "condensedSize": 2119,
      "content": "// File: 301 lines condensed to 30 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE furniture.js\n// fix: Rewritten to auto-discover models from models/block/ folder and resolve parent chain for geometry+textures.\nclass FurnitureLoader {\n            // Fetch list of block JSONs (these define textures and parent references)\n        // Normalize name (remove underscores to match, handle holo_table -> holotable)\n        // Try exact match first, then normalized match\n            // Try to find by normalized name\n            // Load block JSON (has texture mappings)\n            // Extract texture mappings from block JSON\n                        // Convert \"chronokillers_star_wars:blocks/crate\" to actual path\n            // Resolve parent to get custom model with geometry\n                // \"chronokillers_star_wars:custom/crate\" -> \"models/custom/crate.json\"\n                // If no parent, the block JSON might have geometry directly\n            // Load custom model (has geometry)\n            // Preload all textures\n            // Create 3D model from geometry + textures\n        // Build materials from texture mappings\n            // Auto-correct inverted from/to coordinates\n            // Safety check for zero-size elements\n            // THREE.js r128 BoxGeometry face order: +X, -X, +Y, -Y, +Z, -Z\n            // Minecraft face names map: east=+X, west=-X, up=+Y, down=-Y, south=+Z, north=-Z\n            // Get UV attribute from BufferGeometry (24 vertices: 4 per face Ã— 6 faces)\n                            // BufferGeometry stores 4 vertices per face in order:\n                            // Vertex 0 (bottom-left), Vertex 1 (bottom-right), Vertex 2 (top-left), Vertex 3 (top-right)\n                            // Face vertex indices: faceIdx * 4 + (0,1,2,3)\n                            // Set UVs for the 4 vertices of this face\n                            // Minecraft UV: [u0, v0, u1, v1] where v is top-down (flip Y)\n    // Helper to get all discovered model names (for editor UI)\n    // Get the model's geometry data (for physics)\n        // Normalize name",
      "compressionRatio": 0.15921556841235254,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\game_and_character_config.js",
      "originalSize": 2462,
      "condensedSize": 2462,
      "content": "// BROWSERFIREFOXHIDE game_and_character_config.js\r\n// update: Halved the collision radius for the player and all NPC types to allow for closer movement.\r\n\r\nconst GAME_GLOBAL_CONSTANTS = {\r\n  PLAYER: {\r\n    MAX_HEALTH: 100,\r\n    HEIGHT: 1.02,\r\n    COLLISION_RADIUS: 0.2,\r\n    CLIMB_HEIGHT: 0.88,\r\n    JUMP_STRENGTH: 0.0374\r\n  },\r\n  MOVEMENT: {\r\n    SPEED: 0.0462, \r\n    SPRINT_MULTIPLIER: 3, \r\n    FRICTION: 0.85,\r\n    BOB_SPEED: 8,\r\n    BOB_AMOUNT: 0.02\r\n  },\r\n  WEAPONS: {\r\n    PAMPHLET_SPEED: 0.246, \r\n    BLASTER_BOLT_SPEED: 0.14,\r\n    BLASTER_BOLT_OPACITY: 0.85,\r\n    BLASTER_BOLT_RADIUS: 0.03,\r\n    PAMPHLET_LIFESPAN: 480,\r\n    PAMPHLET_SIZE_MULTIPLIER: 0.7,\r\n    BLASTER_GLOW_SIZE: 2.3,\r\n    BLASTER_GLOW_OPACITY: 0.15,\r\n    // ADDED: Player bolt origin offsets\r\n    BOLT_ORIGIN_X: 0.154,\r\n    BOLT_ORIGIN_Y: -0.13,\r\n    BOLT_ORIGIN_Z: 0.578,\r\n    DROPPED_WEAPON_SCALE_FACTOR: 0.7, // 30% reduction in size\r\n    DEFAULT_DROPPED_OFFSETS: { // Default offsets for dropped weapons if not specified in weapon config\r\n      planes: {\r\n        dist: 0.0001, // Very small distance to make them appear almost as one\r\n        yaw: 0,\r\n        pitch: 0\r\n      }\r\n    }\r\n  },\r\n  WEAPON_RANGES: {\r\n    pistol: 12,\r\n    rifle: 18,\r\n    long: 25,\r\n    melee: 1.5,\r\n    saber: 2.0\r\n  },\r\n  ENVIRONMENT: {\r\n    WALL_HEIGHT: 1.0,\r\n    DOOR_OPEN_TIME: 5000,\r\n    WALL_BARRIER: 0.6\r\n  },\r\n  ELEVATION: {\r\n    STEP_HEIGHT: 0.22,\r\n    PLAYER_GRAVITY: 0.0016,\r\n    NPC_GRAVITY: 0.0243\r\n  },\r\n  GRID: {\r\n    SIZE: 1\r\n  },\r\n  ALLY_RING: {\r\n      OPACITY: 0.94,\r\n      DIAMETER_MULTIPLIER: 0.44,\r\n      BASE_HEIGHT: 0.033\r\n  },\r\n  DROPPED_WEAPON_RING: {\r\n      OPACITY: 0.7,\r\n      DIAMETER: 0.5\r\n  },\r\n  FACTIONS: {\r\n    PHYSICS_SPEED: 3,\r\n    ALLIANCE_PULL: 0.13,\r\n    KILL_PUSH: 5,\r\n    DAMPING_FACTOR: 0.95,\r\n    MIN_FORCE_THRESHOLD: 0.008,\r\n    FRIENDLY_THRESHOLD: 20,\r\n    HOSTILE_THRESHOLD: 80,\r\n    HOME_PULL_STRENGTH: 0.05,\r\n    ALLIANCE_PULL_MULTIPLIER: 1\r\n  },\r\n  FACTION_HUD: {\r\n      SCALE: 1.0,\r\n      OFFSET_X: 0,\r\n      OFFSET_Y: 0,\r\n      LINE_WIDTH: 2\r\n  }\r\n};\r\n\r\nconst CHARACTER_CONFIG = {}; // This is now obsolete and loaded from JSON files. Kept as an empty object to prevent errors in any lingering references.\r\n\r\nGAME_GLOBAL_CONSTANTS.FACTION_COLORS = {\r\n    rebels: '#d94242',\r\n    aliens: '#008000',\r\n    clones: '#ff8c00',\r\n    imperials: '#444444',\r\n    droids: '#0066cc',\r\n    mandalorians: '#FFC72C',\r\n    sith: '#990000',\r\n    takers: '#C0C0C0'\r\n};",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\Gonkjedi_and_saber_effects.js",
      "originalSize": 8707,
      "condensedSize": 8707,
      "content": "// BROWSERFIREFOXHIDE Gonkjedi_and_saber_effects.js\r\n// Player (Gonk) Jedi powers and saber effects\r\n\r\nclass GonkJediEffects {\r\n    constructor() {\r\n        this.boltReflectionEnabled = false; // Requires node unlock\r\n        this.boltReflectionChance = 0.0; // Base chance, increased by nodes\r\n        this.reflectionPerfectAimEnabled = false; // Returns bolt to sender\r\n        this.forceHealEnabled = false;\r\n        this.mindTrickEnabled = false;\r\n    }\r\n\r\n    // Enable bolt reflection (called from character upgrade node)\r\n    unlockBoltReflection(baseChance = 0.3) {\r\n        this.boltReflectionEnabled = true;\r\n        this.boltReflectionChance = baseChance;\r\n        console.log(`Gonk unlocked Bolt Reflection at ${baseChance * 100}% chance`);\r\n    }\r\n\r\n    // Upgrade bolt reflection chance\r\n    upgradeBoltReflection(bonusChance) {\r\n        this.boltReflectionChance = Math.min(1.0, this.boltReflectionChance + bonusChance);\r\n        console.log(`Gonk Bolt Reflection upgraded to ${this.boltReflectionChance * 100}%`);\r\n    }\r\n\r\n    // Enable perfect aim for reflections\r\n    unlockPerfectReflection() {\r\n        this.reflectionPerfectAimEnabled = true;\r\n        console.log('Gonk unlocked Perfect Reflection');\r\n    }\r\n\r\n    // Check if player can reflect incoming bolt\r\n    canReflectBolt(projectile) {\r\n        if (!this.boltReflectionEnabled) return false;\r\n        if (!window.game || !window.game.state) return false;\r\n\r\n        // Must have saber equipped\r\n        const activeSaber = window.playerWeaponSystem &&\r\n            window.playerWeaponSystem.activeWeapon &&\r\n            window.playerWeaponSystem.activeWeapon.config.category === 'saberhiltoverlayer';\r\n\r\n        if (!activeSaber) return false;\r\n\r\n        // Can only reflect certain weapon types\r\n        if (projectile.ownerType === 'player') return false; // Can't reflect own shots\r\n        if (projectile.isMelee || projectile.isSaber || projectile.isUnique) return false;\r\n\r\n        // Check if we're facing the bolt (need to be looking roughly toward it)\r\n        const camera = window.game.camera;\r\n        const playerPos = physics.playerCollider.position;\r\n        const boltPos = projectile.mesh.position;\r\n\r\n        const toBolt = new THREE.Vector3().subVectors(boltPos, playerPos).normalize();\r\n        const cameraDir = new THREE.Vector3();\r\n        camera.getWorldDirection(cameraDir);\r\n\r\n        const dot = cameraDir.dot(toBolt);\r\n        if (dot < 0) return false; // Bolt is behind us\r\n\r\n        // Roll for reflection\r\n        return Math.random() < this.boltReflectionChance;\r\n    }\r\n\r\n    // Reflect a bolt\r\n    reflectBolt(projectile) {\r\n        if (!this.canReflectBolt(projectile)) return false;\r\n\r\n        console.log('Gonk reflected a blaster bolt!');\r\n\r\n        const playerPos = physics.playerCollider.position.clone();\r\n        playerPos.y += 0.5; // Saber height\r\n\r\n        let direction;\r\n\r\n        if (this.reflectionPerfectAimEnabled && projectile.owner) {\r\n            // Perfect aim: return to sender\r\n            const shooterPos = projectile.owner.mesh\r\n                ? projectile.owner.mesh.group.position\r\n                : projectile.owner.position;\r\n\r\n            direction = new THREE.Vector3().subVectors(shooterPos, playerPos).normalize();\r\n        } else {\r\n            // Imperfect aim: general direction but with spread\r\n            const camera = window.game.camera;\r\n            direction = new THREE.Vector3();\r\n            camera.getWorldDirection(direction);\r\n\r\n            // Add some random spread\r\n            const spread = 0.2 * (1 - this.boltReflectionChance); // Less spread at higher skill\r\n            direction.x += (Math.random() - 0.5) * spread;\r\n            direction.y += (Math.random() - 0.5) * spread;\r\n            direction.z += (Math.random() - 0.5) * spread;\r\n            direction.normalize();\r\n        }\r\n\r\n        // Create reflected bolt\r\n        const reflectedBolt = new BlasterBolt(playerPos, direction, {\r\n            owner: physics.playerEntity,\r\n            ownerType: 'player_reflected',\r\n            damage: projectile.damage || 10\r\n        });\r\n\r\n        // Make it visually distinct\r\n        if (reflectedBolt.mesh && reflectedBolt.mesh.material) {\r\n            reflectedBolt.mesh.material.color.set(0x00ff00); // Green for player reflections\r\n            reflectedBolt.mesh.material.emissive.set(0x00ff00);\r\n        }\r\n\r\n        window.game.entities.projectiles.push(reflectedBolt);\r\n\r\n        // Play deflection sound (folder-based random selection)\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playSoundFromList('saberdeflect', 0.8);\r\n        }\r\n\r\n        // Visual flash\r\n        this.createReflectionFlash(playerPos);\r\n\r\n        return true;\r\n    }\r\n\r\n    createReflectionFlash(position) {\r\n        // Create flash effect\r\n        const geometry = new THREE.SphereGeometry(0.3, 8, 8);\r\n        const material = new THREE.MeshBasicMaterial({\r\n            color: 0x00ff00,\r\n            transparent: true,\r\n            opacity: 1.0\r\n        });\r\n        const flash = new THREE.Mesh(geometry, material);\r\n        flash.position.copy(position);\r\n        window.game.scene.add(flash);\r\n\r\n        // Fade out\r\n        let opacity = 1.0;\r\n        const fadeInterval = setInterval(() => {\r\n            opacity -= 0.1;\r\n            if (opacity <= 0) {\r\n                clearInterval(fadeInterval);\r\n                window.game.scene.remove(flash);\r\n                flash.geometry.dispose();\r\n                flash.material.dispose();\r\n            } else {\r\n                flash.material.opacity = opacity;\r\n            }\r\n        }, 30);\r\n    }\r\n\r\n    // Check bolt reflection during game loop\r\n    checkPlayerBoltReflection(projectile) {\r\n        // Only check for enemy projectiles\r\n        if (projectile.ownerType === 'player' || projectile.ownerType === 'ally') return false;\r\n\r\n        // Check distance to player\r\n        const dist = projectile.mesh.position.distanceTo(physics.playerCollider.position);\r\n        if (dist > 2.5) return false;\r\n\r\n        // Attempt reflection\r\n        if (this.reflectBolt(projectile)) {\r\n            projectile.reflected = true;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // Force Heal (activated via keybind or menu)\r\n    useForceHeal() {\r\n        if (!this.forceHealEnabled) return false;\r\n\r\n        const energyCost = 100;\r\n        if (window.game.state.energy < energyCost) {\r\n            console.log('Not enough energy for Force Heal');\r\n            return false;\r\n        }\r\n\r\n        // Consume energy\r\n        window.game.state.energy -= energyCost;\r\n\r\n        // Heal player\r\n        const healAmount = 50;\r\n        window.game.state.health = Math.min(\r\n            window.game.state.playerStats.max_health,\r\n            window.game.state.health + healAmount\r\n        );\r\n\r\n        console.log(`Force Heal restored ${healAmount} HP`);\r\n\r\n        // Visual/audio feedback\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playSound('forceheal', 1.0);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // Mind Trick (activated via keybind, affects targeted NPC)\r\n    useMindTrick(targetNPC) {\r\n        if (!this.mindTrickEnabled) return false;\r\n\r\n        const energyCost = 75;\r\n        if (window.game.state.energy < energyCost) {\r\n            console.log('Not enough energy for Mind Trick');\r\n            return false;\r\n        }\r\n\r\n        if (!targetNPC || targetNPC.isDead) return false;\r\n\r\n        // Consume energy\r\n        window.game.state.energy -= energyCost;\r\n\r\n        // Apply mind trick effect (confuse, ignore player temporarily)\r\n        targetNPC.mindTricked = true;\r\n        targetNPC.mindTrickDuration = 10.0; // seconds\r\n\r\n        console.log(`Mind Trick used on ${targetNPC.name}`);\r\n\r\n        // Visual/audio feedback\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/mindtrick.wav', targetNPC.mesh.group.position, 1.0);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    // Update function (called from game loop)\r\n    update(deltaTime) {\r\n        // Update mind trick durations\r\n        if (window.game && window.game.entities) {\r\n            window.game.entities.npcs.forEach(npc => {\r\n                if (npc.mindTricked) {\r\n                    npc.mindTrickDuration -= deltaTime;\r\n                    if (npc.mindTrickDuration <= 0) {\r\n                        npc.mindTricked = false;\r\n                        console.log(`Mind Trick wore off on ${npc.name}`);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize global Gonk Jedi effects system\r\nwindow.gonkJediEffects = new GonkJediEffects();\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\gonk_base_stats.json",
      "originalSize": 1186,
      "condensedSize": 1186,
      "content": "{\r\n    \"gonk_player\": {\r\n        \"threat\": 200,\r\n        \"max_health\": 200,\r\n        \"melee_damage\": 200,\r\n        \"attack_cooldown\": 0.1,\r\n        \"attack_range\": 200,\r\n        \"accuracy\": 200,\r\n        \"perception_radius\": 200,\r\n        \"aggro\": 0,\r\n        \"speed\": 0.0462,\r\n        \"collision_radius\": 0.5,\r\n        \"weight\": 200,\r\n        \"soundSet\": null,\r\n        \"weight_lift\": 200,\r\n        \"technical_understanding\": 200,\r\n        \"force_sensitivity\": 200,\r\n        \"special_moves\": null,\r\n        \"jump_strength\": 0.0374,\r\n        \"lie_attack\": 200,\r\n        \"lie_defense\": 200,\r\n        \"charm_attack\": 200,\r\n        \"charm_defense\": 200,\r\n        \"base_energy\": 150,\r\n        \"max_energy\": 150,\r\n        \"pamphlet_start_ammo\": 100,\r\n        \"pamphlet_max_ammo\": 100,\r\n        \"default_weapon\": \"rifle_dc15a.png\",\r\n        \"encountered_player_droid\": true,\r\n        \"encountered_rebels\": true,\r\n        \"encountered_droids\": true,\r\n        \"encountered_clones\": false,\r\n        \"encountered_imperials\": false,\r\n        \"encountered_aliens\": false,\r\n        \"encountered_mandalorians\": false,\r\n        \"encountered_takers\": false,\r\n        \"encountered_sith\": false\r\n    }\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\gonk_models.js",
      "originalSize": 27595,
      "condensedSize": 2182,
      "content": "// File: 621 lines condensed to 31 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE gonk_models.js\r\n// update: DRAMATIC PERFORMANCE REWRITE.\r\n// 1. Replaced per-face material creation with a single shared material per skin, massively reducing draw calls.\r\n// 2. Implemented direct UV mapping on geometries instead of texture cloning and offsetting, reducing memory and improving performance.\r\n// 3. Cached materials to prevent re-creation.\r\n// update: Added support for external model definitions (Iron Golem, Snow Golem, Pig, Creeper, Slime).\r\nclass GonkModelSystem {\r\n  // Register an external model definition\r\n    // Also add to the models registry for compatibility\r\n  // Initialize and register all available external models\r\n    // Check for each external model and register if available\r\n      // External models (irongolem, snowgolem, pig, creeper, slime) are registered dynamically\r\n    // Use full skin texture path (including subdirectories like \"104th Wolfpack Battalion/Sinker (1) P1\")\r\n    // Check if this is an external model type\r\n    // Use external model's texture size if available, otherwise detect from skin\r\n    // External models typically don't have overlay layers (only humanoids do)\r\n    // Build all parts defined in the model\r\n    // Sort to ensure parents are built before children\r\n          // Use external model's UV map if available\r\n          // Check if part should be transparent (e.g., slime outer layer)\r\n              // Create transparent material for this specific part\r\n          // Position mesh within its group based on pivot point\r\n              // External models define explicit pivot points - offset mesh so pivot is at group origin\r\n              // Humanoid models: pivot at top for limbs\r\n              // Humanoid models: pivot at bottom for head\r\n          // Apply any initial rotation defined in the part\r\n    // Calculate ground offset\r\n  // Sort parts so parents are built before children\r\n    // Check if external model has custom animation handler\r\n                // After the animation is done, we can consider the animation \"finished\"\r\n                // and it can be stopped.\r",
      "compressionRatio": 0.0790722957057438,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\levelManager.js",
      "originalSize": 9884,
      "condensedSize": 9884,
      "content": "class LevelManager {\n    constructor() {\n        this.currentLevel = 0;\n        this.nameData = null;\n    }\n\n    /**\n     * Decompresses level data from v2 compressed format to v1 legacy format\n     * Automatically detects format and decompresses if needed\n     */\n    decompressLevel(levelData) {\n        // Auto-detect format version\n        if (levelData.version !== 2) {\n            // Legacy format - return as-is\n            return levelData;\n        }\n\n        console.log('[LevelManager] Decompressing level format v2...');\n\n        const decompressed = {\n            settings: {\n                width: levelData.settings.width,\n                height: levelData.settings.height,\n                defaults: {}\n            },\n            layers: {}\n        };\n\n        // Convert defaults (these are ONLY for layers with actual defaults)\n        for (const [layerName, defaultDef] of Object.entries(levelData.settings.defaults || {})) {\n            decompressed.settings.defaults[layerName] = {\n                key: levelData.settings.textureRegistry[defaultDef.textureId],\n                size: defaultDef.size || 1,\n                properties: defaultDef.properties || {}\n            };\n        }\n\n        // Expand layers - ONLY expand overrides (no default fill)\n        for (const [layerName, layerData_inner] of Object.entries(levelData.layers)) {\n            if (layerData_inner.type === \"sparse\") {\n                decompressed.layers[layerName] = layerData_inner.overrides.map(([pos, item]) => {\n                    const expanded = {\n                        key: levelData.settings.textureRegistry[item.textureId]\n                    };\n\n                    // Preserve all properties\n                    if (item.size !== undefined) expanded.size = item.size;\n                    if (item.rotation !== undefined) expanded.rotation = item.rotation;\n                    if (item.properties) expanded.properties = item.properties;\n                    if (item.type) expanded.type = item.type;\n\n                    // Set defaults for required fields\n                    if (expanded.size === undefined) expanded.size = 1;\n                    if (expanded.rotation === undefined) expanded.rotation = 0;\n                    if (expanded.properties === undefined) expanded.properties = {};\n                    if (expanded.type === undefined) expanded.type = 'texture';\n\n                    return [pos, expanded];\n                });\n            } else {\n                // Non-sparse layers (npcs, furniture, etc.) pass through\n                decompressed.layers[layerName] = layerData_inner;\n            }\n        }\n\n        console.log('[LevelManager] Decompression complete');\n        return decompressed;\n    }\n\n    async loadLevel(levelId) {\n        const playtestDataString = localStorage.getItem('gonk_level_to_play');\n        const isPlaytest = !!playtestDataString;\n        \n        // Ensure cheats state is initialized before accessing it\n        const forceShowSummary = window.game && window.game.state && window.game.state.cheats ? window.game.state.cheats.showEndOfLevelSummary : false;\n\n        // Show summary if it's not the very first level load, and it's either not a playtest or the cheat is enabled.\n        if (this.currentLevel > 0 && (!isPlaytest || forceShowSummary)) {\n            if (window.endOfLevelManager) {\n                // NOTE: A real stats object will be created and passed here in the future.\n                await window.endOfLevelManager.show({});\n            }\n        }\n\n        if(window.loadingScreenManager) window.loadingScreenManager.show();\n        this.pendingMusicSettings = null; // Will be set after level data loads\n        this.levelDataParsed = false; // Reset flag for new level load\n        try {\n            // Shift ship control for the level we're leaving (not level 1, the home base)\n            if (this.currentLevel && this.currentLevel !== 1 && window.mapScreen) {\n                const previousLevel = this.currentLevel;\n                window.mapScreen.shiftShipControl(previousLevel);\n            }\n\n            if (window.game) {\n                if (window.game.npcs) {\n                    for (const npc of window.game.npcs) {\n                        npc.hasSpoken = false;\n                    }\n                }\n                if (window.game.state && window.game.state.allies) {\n                    for (const ally of window.game.state.allies) {\n                        if (ally.npc) {\n                            ally.npc.hasSpoken = false;\n                        }\n                    }\n                }\n            }\n            this.currentLevel = levelId;\n            let levelData;\n\n            if(window.loadingScreenManager) window.loadingScreenManager.updateStatus(`Loading Level ${levelId} Data...`);\n            let rawText;\n            if (playtestDataString) {\n                rawText = playtestDataString;\n            } else {\n                const response = await fetch(`data/levels/level_${levelId}.json`);\n                if (!response.ok) throw new Error(`Level file not found for level_${levelId}.json`);\n                rawText = await response.text();\n            }\n            const cleanText = rawText.split('\\n').filter(line => !line.trim().startsWith('//') && !line.trim().startsWith('#')).join('\\n');\n            levelData = JSON.parse(cleanText);\n\n            // Decompress if needed (auto-detects v2 compressed format)\n            levelData = this.decompressLevel(levelData);\n\n            // Store level music settings for audio system to use\n            if (levelData.settings && levelData.settings.defaults && levelData.settings.defaults.music) {\n                this.pendingMusicSettings = levelData.settings.defaults.music;\n                console.log('[LevelManager] Found music settings:', this.pendingMusicSettings);\n            } else {\n                console.log('[LevelManager] No music settings in level data');\n            }\n            this.levelDataParsed = true; // Signal that level data has been parsed\n\n            if (!this.nameData) {\n                const nameDataResponse = await fetch('data/npc_names.json');\n                if (!nameDataResponse.ok) throw new Error('Failed to load npc_names.json');\n                this.nameData = await nameDataResponse.json();\n            }\n\n            if (levelData.layers.npcs) {\n                const npcLayerMap = new Map(levelData.layers.npcs);\n\n                const randomNpcItems = [];\n                npcLayerMap.forEach((item, key) => {\n                    if (item.type === 'random_npc') {\n                        randomNpcItems.push({ key, item });\n                    }\n                });\n\n                for (const { key, item } of randomNpcItems) {\n                    const criteria = {\n                        threat: item.properties.threat,\n                        macroCategory: item.properties.macroCategory,\n                        subgroup: item.properties.subgroup\n                    };\n                    const possibleNpcs = assetManager.getNpcsByCriteria(criteria);\n\n                    if (possibleNpcs.length > 0) {\n                        const chosenNpcKey = possibleNpcs[Math.floor(Math.random() * possibleNpcs.length)];\n                        const chosenNpcItem = { ...item, type: 'npc', key: chosenNpcKey };\n                        npcLayerMap.set(key, chosenNpcItem);\n                    } else {\n                        console.warn(`No NPCs found for random placement criteria:`, criteria);\n                        npcLayerMap.delete(key);\n                    }\n                }\n\n                npcLayerMap.forEach((item, key) => {\n                    if (item.type !== 'npc') return;\n\n                    const skinName = item.key;\n                    const npcConfig = assetManager.npcIcons.get(skinName)?.config;\n\n                    if (!npcConfig) {\n                        console.warn(`Cannot assign name: No config found for NPC skin '${skinName}'.`);\n                        return;\n                    }\n\n                    const subgroup = item.properties.subgroup || npcConfig.groupKey;\n\n                    const npcForNaming = {\n                        name: item.properties.name,\n                        subgroup: subgroup,\n                        faction: npcConfig.faction\n                    };\n\n                    item.properties.name = generateNpcName(npcForNaming, this.nameData);\n                });\n\n\n                levelData.layers.npcs = Array.from(npcLayerMap.entries());\n            }\n\n            await assetManager.loadLevelAssets(levelData);\n            if(window.loadingScreenManager) window.loadingScreenManager.updateStatus('Preloading Weapon Models...');\n            await weaponIcons.preloadWeapons(levelData);\n\n            if(window.loadingScreenManager) window.loadingScreenManager.updateStatus('Building Level Geometry...');\n            levelRenderer.buildLevelFromData(levelData);\n            if (levelData.layers.assets) {\n                levelRenderer.buildFurniture(levelData.layers.assets);\n            }\n            if (levelData.layers.enemy_spawn_points) {\n                levelRenderer.buildEnemySpawnPoints(levelData.layers.enemy_spawn_points);\n            }\n            if (levelData.layers.npcs) {\n                await levelRenderer.createNPCs(levelData.layers.npcs);\n            }\n\n            if (window.game) {\n                game.respawnAllies();\n            }\n\n        } catch (error) {\n            console.error(`Failed to load or build level ${levelId}:`, error);\n            levelRenderer.createFallbackFloor();\n        } finally {\n            if (playtestDataString) {\n                localStorage.removeItem('gonk_level_to_play');\n            }\n            if(window.loadingScreenManager) window.loadingScreenManager.finishLoading();\n        }\n    }\n}\n\nwindow.levelManager = new LevelManager();",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\loadingScreenManager.js",
      "originalSize": 13024,
      "condensedSize": 1013,
      "content": "// File: 308 lines condensed to 13 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE loadingScreenManager.js\r\n// update: This class was extracted from main.js to resolve a module conflict.\r\n// update: Reverted trivia feedback popup to its original centered position to fix UI glitch.\r\n// update: Halved the trivia screen's post-answer delay for a faster transition back to the game.\r\n// update: Removed redundant instantiation line. Instantiation now happens in index.html's initGame function.\r\nclass LoadingScreenManager {\r\n        // Defer music playback to allow level data to load first\r\n        // Music will be started when pendingMusicSettings is available\r\n        // Start music once level data is loaded (levelDataParsed flag is set)\r\n            // Stop any currently playing music first\r\n            // Check if level has specific music settings\r\n                // Level is loaded but no music settings defined - play random\r\n// Instantiation moved to index.html",
      "compressionRatio": 0.07777948402948404,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\main.js",
      "originalSize": 56593,
      "condensedSize": 4390,
      "content": "// File: 1224 lines condensed to 76 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE main.js\r\n// update: Added Q/E input handling for Conversation Choices in InputHandler.\r\n// update: Added conversationController.update() to Game.update loop for live timeouts/distance checks.\r\n// === INPUT HANDLER ===\r\nclass InputHandler {\r\n    // Check if character sheet or map screen is open\r\n    // Don't handle weapon scroll if pointer isn't locked or if any menu is open\r\n    // CONVERSATION CHOICE HANDLING (Q / E)\r\n            // Play random gonk sound on jump\r\nclass Pickup {\r\n            // Play module acquired sound\r\n// === GAME ENGINE CORE ===\r\nclass Game {\r\n    // HUD will be shown after level loads (moved to avoid showing before trivia)\r\n    // Initialize enemy spawn point manager\r\n      // Track damage for DroidSlayer system\r\n        // Track kills for DroidSlayer system\r\n    // Check if player has spare cores\r\n        // Consume a spare core and respawn at entry point of current level\r\n        // Update spare core display\r\n        // No spare cores - respawn at home spawn and reset run progress\r\n        // Clear destroyed ships (run reset)\r\n        // Load home level if we're not already there\r\n    // Perform the respawn\r\n      // Update encountered flag upon recruiting\r\n      // Dispose of the ring immediately\r\n      // Keep the ally in the array, but mark it as dead.\r\n      // The updateHUD will handle displaying the grave marker.\r\n      // This function is now only called when an ally is truly removed, not just dead.\r\n      // For example, when a level is cleared and new allies are added.\r\n        // Hide upgrade UI buttons\r\n        // Play character sheet close sound\r\n        // Close map screen if it's open (mutually exclusive)\r\n        // Play character sheet open sound\r\n    // Modules\r\n    // Stats\r\n            // Skip NPC-only stats and encountered flags\r\n    // Wire\r\n      // Debugging HUD visibility during conversations\r\n      // Update DroidSlayer system\r\n      // Furniture culling/LOD\r\n              // Disable associated physics when not visible\r\n          // Update Conversation Logic (Live timers and choices)\r\n          // Energy Regeneration\r\n          // Update enemy spawn points\r\n          // Update slicing system\r\n          // Update dropped weapons\r\n          // Only check for new conversations when the game is not paused.\r\n      // Update Hologonk Avatar\r\n      // End Hologonk Update\r\n      // Update Health and Power Gauges (Animated)\r\n          // Update health gauge\r\n          // Update power gauge with next shot cost preview\r\n              // Get energy cost from weapon config (default to 0 if not specified)\r\n                  // Display grave marker\r\n                  // Existing logic for live allies\r\n                  // Apply conversation movement effects\r\n                      // All non-speaking allies shift down when a conversation is active\r\n        // Potential initiators are non-allies who are idle and haven't spoken.\r\n        // Allies who are available to talk.\r\n                // FIX: Prevent allies from talking to NPCs of their own original faction.\r\n                // The initiator is a non-ally, the target (ally) is the one with an originalFaction.\r\n                    // The NPC initiates the conversation with the player's ally.\r\n                    // The non-ally NPC initiates the conversation with the player's ally.\r\n                    // Update encountered flag for the initiator's faction since they talked to us\r\n            // F-menu nodes are always visible for debugging\r\n            // This is the core logic to display the nodes in the F-Menu, it must NOT be hidden by isEncountered.\r\n                // The lines should only be drawn if both nodes are positioned.\r\n                // For dead allies, we don't remove them from the state.allies array,\r\n                // but we ensure their NPC mesh and ring are removed from the scene.\r\n                // Reset 'hasSpoken' status for the new level.\r\n                // For live allies, reset hasSpoken and remove ring if it exists\r\n    // The rest of the clearScene function remains mostly the same,\r\n    // but we need to be careful about removing NPCs from entities.npcs.\r\n    // Live allies should be kept, dead ones should be removed from entities.npcs.\r\n    // Clear enemy spawn points\r",
      "compressionRatio": 0.07757143109571855,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\map_screen.js",
      "originalSize": 19628,
      "condensedSize": 4001,
      "content": "// File: 512 lines condensed to 75 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE map_screen.js\r\nclass MapScreen {\r\n        // Layout constants\r\n        // Ship destruction tracking (for entire run)\r\n        // Bind methods\r\n        // Level 1 (no L/R)\r\n        // Levels 2-49 (L and R variants)\r\n        // Default to Imperials (60%) vs Rebels (40%) at war for ships without level files\r\n        // Level 50 (no L/R)\r\n            // Load h1 (happy) icon\r\n            // Find first file in h1 directory (lowest number)\r\n            // For now, construct expected path - we'll need to make this more dynamic\r\n            // Placeholder - we'll load these dynamically\r\n            // Close character sheet if it's open (mutually exclusive)\r\n        // Calculate total width of ship chain\r\n        // Use actual game faction colors from GAME_GLOBAL_CONSTANTS\r\n        // Parse ship label to get numeric level\r\n        // Get player stats for vision upgrades\r\n        // Current ship always visible with details\r\n        // Ships behind (Neighborhood Watch unlocks this)\r\n        // Ships ahead (default: +1, Spy Network: up to +8)\r\n        // Show all ship images/boxes, but without faction details text\r\n        // User can see all ships on map, just doesn't know faction info without upgrades\r\n        // Clear canvas\r\n        // Get current level\r\n        // Calculate starting positions\r\n        // Draw L row (2L-49L) - starts where Ship 1 position + half spacing would be\r\n        // Position Ship 1 in center, calculate where 2L/2R start\r\n        // Draw L row (2L-49L)\r\n        // Store position for Ship 50\r\n        // Draw R row (2R-49R) - aligned with L row\r\n        // Draw connection lines between L and R ships (doors)\r\n        // Draw Ship 1 in center with connecting lines to 2L and 2R\r\n            // Draw connecting lines first (behind ship)\r\n            // Line from Ship 1 to 2L\r\n            // Line from Ship 1 to 2R\r\n            // Draw Ship 1\r\n        // Draw Ship 50 in center with connecting lines from 49L and 49R\r\n            // Draw connecting lines first (behind ship)\r\n            // Line from 49L to Ship 50\r\n            // Line from 49R to Ship 50\r\n            // Draw Ship 50\r\n        // Draw title\r\n        // Draw base ship rectangle (dark gray background)\r\n        // Draw faction control overlays (split by control_percentage)\r\n        // Dominant faction overlay (left side)\r\n        // Secondary faction overlay (right side)\r\n        // Draw vertical divider line at split point\r\n        // Highlight current ship\r\n        // Draw X over destroyed ships\r\n        // Draw ship label (black text on light ships, white on dark)\r\n        // Draw faction details if visible\r\n        // Roll 3d6 (3-18)\r\n        // Convert roll to percentage shift: 3 = -3%, 18 = +15%\r\n        // Linear mapping: shift = -3 + ((roll - 3) / 15) * 18\r\n        // Determine which faction has worse relationship with player\r\n        // Higher score = worse relationship (more hostile)\r\n        // Apply shift toward the hostile faction\r\n            // Dominant faction is hostile, so they gain control\r\n            // Secondary faction is hostile, so dominant faction loses control\r\n        // Clamp between 10% and 90%\r\n        // Check if we need to apply Prophets bonus\r\n            // Count allies of the friendly faction\r\n            // Apply bonus toward friendly faction\r\n        // Re-render map if it's visible\r\n        // Count NPCs in player's ally list that belong to the specified faction\r\n        // Stack vertically: Dominant faction (top), relationship symbol (middle, large), secondary faction (bottom)\r\n        // Draw dominant faction name (capitalized) in its color\r\n        // Draw relationship symbol (larger, more visible)\r\n        // Draw secondary faction name (capitalized) in its color\r\n// Initialize map screen\r\n// Will be initialized after game loads\r\nfunction initMapScreen() {\r\n    window.mapScreen = new MapScreen();\n}\r",
      "compressionRatio": 0.20384145098838394,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\NPCjedi_and_saber_effects.js",
      "originalSize": 6043,
      "condensedSize": 6043,
      "content": "// BROWSERFIREFOXHIDE NPCjedi_and_saber_effects.js\r\n// Master controller for all NPC Jedi powers and saber effects\r\n\r\nclass NPCJediEffects {\r\n    constructor() {\r\n        this.boltReflectionEnabled = true;\r\n    }\r\n\r\n    // Check if an NPC can reflect blaster bolts\r\n    canReflectBolt(npc, projectile) {\r\n        // Must have bolt reflection enabled\r\n        if (!npc.boltReflectionChance || npc.boltReflectionChance <= 0) return false;\r\n\r\n        // Can only reflect certain weapon types\r\n        const reflectableTypes = ['pistol', 'rifle', 'longarm'];\r\n        if (!projectile.ownerType || projectile.ownerType === 'player') {\r\n            // Check if it's a reflectable weapon\r\n            // For now, assume all player bolts except special ones are reflectable\r\n            if (projectile.isUnique || projectile.isMelee || projectile.isSaber) return false;\r\n        }\r\n\r\n        // Roll for reflection chance\r\n        return Math.random() < npc.boltReflectionChance;\r\n    }\r\n\r\n    // Reflect a blaster bolt back at the attacker\r\n    reflectBolt(npc, projectile) {\r\n        if (!this.canReflectBolt(npc, projectile)) return false;\r\n\r\n        console.log(`${npc.name} reflected a blaster bolt!`);\r\n\r\n        // Get reflection direction (back toward shooter)\r\n        const shooter = projectile.owner;\r\n        if (!shooter) return false;\r\n\r\n        const shooterPos = shooter.isPlayer\r\n            ? physics.playerCollider.position\r\n            : shooter.mesh.group.position;\r\n\r\n        const npcPos = npc.mesh.group.position.clone();\r\n        npcPos.y += 1.0; // Saber height\r\n\r\n        // Calculate direction back to shooter\r\n        const direction = new THREE.Vector3().subVectors(shooterPos, npcPos).normalize();\r\n\r\n        // Create reflected bolt\r\n        const reflectedBolt = new BlasterBolt(npcPos, direction, {\r\n            owner: npc,\r\n            ownerType: 'npc_reflected',\r\n            damage: projectile.damage || 10\r\n        });\r\n\r\n        // Visual effect: make it slightly different color\r\n        if (reflectedBolt.mesh && reflectedBolt.mesh.material) {\r\n            reflectedBolt.mesh.material.color.set(0xff00ff); // Purple for reflected bolts\r\n            reflectedBolt.mesh.material.emissive.set(0xff00ff);\r\n        }\r\n\r\n        window.game.entities.projectiles.push(reflectedBolt);\r\n\r\n        // Play deflection sound (folder-based random selection)\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSoundFromList('saberdeflect', npcPos, 0.8);\r\n        }\r\n\r\n        // Visual flash at reflection point\r\n        this.createReflectionFlash(npcPos);\r\n\r\n        // Destroy the original bolt\r\n        return true;\r\n    }\r\n\r\n    createReflectionFlash(position) {\r\n        // Create a brief flash effect at the reflection point\r\n        const geometry = new THREE.SphereGeometry(0.3, 8, 8);\r\n        const material = new THREE.MeshBasicMaterial({\r\n            color: 0x00ffff,\r\n            transparent: true,\r\n            opacity: 1.0\r\n        });\r\n        const flash = new THREE.Mesh(geometry, material);\r\n        flash.position.copy(position);\r\n        window.game.scene.add(flash);\r\n\r\n        // Fade out and remove\r\n        let opacity = 1.0;\r\n        const fadeInterval = setInterval(() => {\r\n            opacity -= 0.1;\r\n            if (opacity <= 0) {\r\n                clearInterval(fadeInterval);\r\n                window.game.scene.remove(flash);\r\n                flash.geometry.dispose();\r\n                flash.material.dispose();\r\n            } else {\r\n                flash.material.opacity = opacity;\r\n            }\r\n        }, 30);\r\n    }\r\n\r\n    // Check if a bolt should be reflected during collision detection\r\n    checkBoltReflection(projectile, npc) {\r\n        // Only check if NPC has reflection ability\r\n        if (!npc.boltReflectionChance) return false;\r\n\r\n        // Check if projectile is close enough to be reflected (within weapon range)\r\n        const dist = projectile.mesh.position.distanceTo(npc.mesh.group.position);\r\n        if (dist > 2.5) return false;\r\n\r\n        // Attempt reflection\r\n        if (this.reflectBolt(npc, projectile)) {\r\n            // Mark projectile for removal\r\n            projectile.reflected = true;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // Force powers placeholder methods (for future implementation)\r\n\r\n    forceHeal(npc, target, amount) {\r\n        // TODO: Implement force heal\r\n        console.log(`${npc.name} uses Force Heal on ${target.name}`);\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/forceheal.wav', npc.mesh.group.position, 1.0);\r\n        }\r\n    }\r\n\r\n    forcePush(npc, targets) {\r\n        // TODO: Implement force push for NPCs\r\n        console.log(`${npc.name} uses Force Push`);\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/forcepush.wav', npc.mesh.group.position, 1.0);\r\n        }\r\n    }\r\n\r\n    mindTrick(npc, target) {\r\n        // TODO: Implement mind trick\r\n        console.log(`${npc.name} uses Mind Trick on ${target.name}`);\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/mindtrick.wav', npc.mesh.group.position, 1.0);\r\n        }\r\n    }\r\n\r\n    forceChoke(npc, target) {\r\n        // TODO: Implement force choke\r\n        console.log(`${npc.name} uses Force Choke on ${target.name}`);\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/forcechoke.wav', npc.mesh.group.position, 1.0);\r\n        }\r\n    }\r\n\r\n    forceLightning(npc, target) {\r\n        // TODO: Implement force lightning\r\n        console.log(`${npc.name} uses Force Lightning on ${target.name}`);\r\n        if (window.audioSystem) {\r\n            window.audioSystem.playPositionalSound('/data/sounds/force/forcelightning.wav', npc.mesh.group.position, 1.0);\r\n        }\r\n    }\r\n}\r\n\r\n// Initialize global NPC Jedi effects system\r\nwindow.npcJediEffects = new NPCJediEffects();\r\n",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\npc_behavior.js",
      "originalSize": 49062,
      "condensedSize": 4784,
      "content": "// File: 1101 lines condensed to 74 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE npc_behavior.js\n// update: Corrected name generation logic in processName to accurately map faction/baseType to the correct name lists (e.g., 'imperialF' -> 'stormtrooperF', 'cloneF') as defined in npc_names.json, fixing console warnings.\n// update: Added batched nameplate updates for performance optimization\nclass NPC {\n        // DroidSlayer system flags\n        // All stats are now read directly from the unified config\n            // console.warn(`Weapon data for \"${cleanWeaponName}\" not found.`);\n        // Merge defaults and specific stats. Specific stats take precedence.\n        // NEW: Conversion progress bar\n        // Intercept placeholder names and correct them to match keys in npc_names.json\n            // FIX: Map faction/macroCategory to correct name list key\n            // Re-map column keys to match list names in npc_names.json\n            // Override for Rebels (which can be human_male/female)\n            // Apply name key map for other macroCategories\n            // Prioritize baseType for specific races like Wookiees\n                // Determine if a space is needed based on the name category key\n        // Post-recruitment friendly fire grace period\n        // --- ALLY FRIENDLY FIRE PREVENTION ---\n        // If this NPC is an ally, check if the attacker is also friendly.\n        // DroidSlayer damage reduction\n        // Check for cheat-triggered DroidSlayer promotion\n        // If this NPC is an ally and was attacked, have other allies aggro the attacker\n            // --- Fleeing Logic Overhaul ---\n            // If already in combat, ignore flee logic.\n                // Do nothing, continue attacking.\n            // If hit while fleeing, immediately turn to fight.\n            // If this is the first time making a flee decision...\n        // DroidSlayer, allies, and dead NPCs cannot be converted\n        // Update and show the conversion bar\n        // DroidSlayer can never be recruited\n            // Play Wookiee conversion sound\n        // Absolute prohibition: Never aggro a friendly target.\n        // 1. Use weapon-specific range multiplier if available\n        // 2. Fallback to category-based range\n        // 3. Absolute fallback for melee or un-categorized weapons\n        // Fallback for ranged weapons not in the WEAPON_RANGES config.\n        // Batched nameplate updates for performance\n                // Check reveal conditions (only if not already revealed)\n                    // Condition 1: Collision/near touch\n                    // Condition 2: Damaged\n                    // Condition 3: In conversation or has spoken\n                    // Condition 4: Hit by pamphlet\n                // Only show nameplate if revealed\n                    // Standard distance-based visibility/fade\n                    // FIX: Separate the look-at target from the line-of-sight target.\n                    // The body should only rotate on the Y-axis to prevent tilting.\n                 // Placeholder for future logic\n                // Possible flags could be set here for random events like conversations,\n                // turning hostile, etc. after the investigation movement is complete.\n                        // Ally is at its follow position, now perform idle actions\n                    // Transition to CONVERSING state\n                // ... rest of IDLING logic ...\n                // Make them face each other\n                // Calculate desired distance (collision radiuses almost touching)\n                    // Move towards each other\n                    // Stop moving once close enough\n        // If already in combat or fleeing, don't proactively search for new targets\n            // But check if current target is dead or out of sight\n            // NEW: Check if current target has become friendly\n        // Priority 5: Attack Hostiles & Priority 7: Defend Allies\n        // Priority 11: Investigate Player\n        // Priority 13: Idle (Default)\n                // Absolute rule: Never target same faction, even if aggro. Allies should not fight allies.\n    // --- NEW: Conversation Highlight ---\n    // --- END NEW ---\n        // Use a small threshold to account for floating point inaccuracies\n        // Only set animation if not in a special attack animation\n        // Use weapon-specific cooldown if available\n        // Prevent NPCs with no weapon from attacking\n        // FIX: Add a crucial range check for melee attacks.\n            // Use weapon damage if available, otherwise fallback to NPC's base melee damage\n        // --- Accuracy Calculation (incorporates weapon stats) ---\n        // DroidSlayer variant modifiers\n        // Track DroidSlayer attack",
      "compressionRatio": 0.09750927397986221,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\npc_behavior_death.js",
      "originalSize": 8312,
      "condensedSize": 8312,
      "content": "// BROWSERFIREFOXHIDE npc_behavior_death.js\r\nfunction handleNpcDeath(npc, killer = null) {\r\n    console.log(`handleNpcDeath called for ${npc.name} (ID: ${npc.mesh.group.uuid}) at ${performance.now()}`);\r\n    if (npc.isDead) return;\r\n    npc.isDead = true;\r\n    npc.currentState = 'DEAD';\r\n    npc.movementCollider.velocity.set(0, 0, 0);\r\n    // window.setGonkAnimation(npc.mesh, 'death'); // Removed explicit death animation\r\n    physics.createRagdoll(npc.mesh); // Apply ragdoll immediately\r\n    game.scene.remove(npc.mesh.group); // Remove the original mesh immediately\r\n\r\n    if (npc.isAlly && killer) {\r\n        let closestTarget = null;\r\n        let minDistance = Infinity;\r\n\r\n        // Find the player\r\n        const player = window.physics.playerCollider;\r\n        const distanceToPlayer = npc.mesh.group.position.distanceTo(player.position);\r\n        if (distanceToPlayer < minDistance) {\r\n            minDistance = distanceToPlayer;\r\n            closestTarget = window.game.playerEntity;\r\n        }\r\n\r\n        // Find the closest ally\r\n        for (const ally of window.game.state.allies) {\r\n            if (ally.npc && !ally.npc.isDead && ally.npc !== npc) {\r\n                const distanceToAlly = npc.mesh.group.position.distanceTo(ally.npc.mesh.group.position);\r\n                if (distanceToAlly < minDistance) {\r\n                    minDistance = distanceToAlly;\r\n                    closestTarget = ally.npc;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (closestTarget) {\r\n            killer.aggro(closestTarget);\r\n        }\r\n    }\r\n\r\n    // --- Drop Pickups ---\r\n    const dropPosition = npc.mesh.group.position.clone();\r\n    dropPosition.y = physics.getGroundHeight(dropPosition.x, dropPosition.z) + (GAME_GLOBAL_CONSTANTS.ENVIRONMENT.WALL_HEIGHT * 0.2);\r\n\r\n    const threat = npc.config.threat || 1;\r\n    let noDropChance;\r\n    if (threat >= 5) {\r\n        noDropChance = 0;\r\n    } else {\r\n        noDropChance = 0.9 - (threat - 1) * 0.2;\r\n    }\r\n\r\n    if (Math.random() >= noDropChance) {\r\n        const allWeaponData = window.assetManager.weaponData;\r\n        let droppableWeapons = [];\r\n        let randomWeaponTotalWeight = 0;\r\n        if (allWeaponData) {\r\n            for (const weaponKey in allWeaponData) {\r\n                if (weaponKey.startsWith('_')) continue;\r\n                const weapon = allWeaponData[weaponKey];\r\n                const dropFactionsRaw = weapon['drop_faction[4\t]'] || weapon['drop_faction[2\t]'] || weapon['drop_faction[3\t]'] || weapon.drop_faction;\r\n                if (dropFactionsRaw) {\r\n                    const factions = String(dropFactionsRaw).split('\t').map(f => f.trim().toLowerCase());\r\n                    if (factions.includes(npc.faction.toLowerCase())) {\r\n                        const dropWeight = weapon.drop_weight || 0;\r\n                        if (dropWeight > 0) {\r\n                            droppableWeapons.push({ key: weaponKey, weight: dropWeight });\r\n                            randomWeaponTotalWeight += dropWeight;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const hasEquippedWeapon = npc.itemData.properties.weapon && npc.itemData.properties.weapon !== 'none';\r\n        const equippedWeaponWeight = hasEquippedWeapon ? 250 : 0;\r\n        const healthWeight = 20;\r\n        const wireWeight = 20;\r\n        const moduleWeight = 10;\r\n\r\n        const totalWeight = randomWeaponTotalWeight + equippedWeaponWeight + healthWeight + wireWeight + moduleWeight;\r\n        if (totalWeight > 0) {\r\n            let roll = Math.random() * totalWeight;\r\n            const originalRoll = roll;\r\n\r\n            // Check for equipped weapon drop\r\n            if (hasEquippedWeapon) {\r\n                roll -= equippedWeaponWeight;\r\n                if (roll <= 0) {\r\n                    const weaponKey = npc.itemData.properties.weapon.split('/').pop().replace('.png', '');\r\n                    console.log(`Roll ${originalRoll.toFixed(2)} of ${totalWeight.toFixed(2)}: Item dropped ${weaponKey}.png`);\r\n                    const weaponData = allWeaponData[weaponKey]; // Get weapon data to retrieve drop_weight\r\n                    const equippedWeaponDropWeight = weaponData?.drop_weight || 0;\r\n                    window.game.entities.droppedWeapons.push(new WeaponPickup(weaponKey, dropPosition.clone(), equippedWeaponDropWeight));\r\n                    return; // Return after dropping one item.\r\n                }\r\n            }\r\n\r\n            // Check for health pickup\r\n            roll -= healthWeight;\r\n            if (roll <= 0) {\r\n                console.log(`Roll ${originalRoll.toFixed(2)} of ${totalWeight.toFixed(2)}: Item dropped healthsmall.png`);\r\n                game.entities.pickups.push(new Pickup('health', 'healthsmall.png', dropPosition.clone()));\r\n                return;\r\n            }\r\n\r\n            // Check for wire pickup\r\n            roll -= wireWeight;\r\n            if (roll <= 0) {\r\n                console.log(`Roll ${originalRoll.toFixed(2)} of ${totalWeight.toFixed(2)}: Item dropped wiresmall.png`);\r\n                game.entities.pickups.push(new Pickup('wire', 'wiresmall.png', dropPosition.clone()));\r\n                return;\r\n            }\r\n\r\n            // Check for module pickup\r\n            roll -= moduleWeight;\r\n            if (roll <= 0) {\r\n                const moduleOptions = [\r\n                    'force_mindtrick', 'force_shield', 'melee_damageup',\r\n                    'move_jump', 'move_speed', 'ranged_firerateup',\r\n                    'toughness_armorup', 'toughness_healthup'\r\n                ];\r\n                const randomModule = moduleOptions[Math.floor(Math.random() * moduleOptions.length)];\r\n                console.log(`Roll ${originalRoll.toFixed(2)} of ${totalWeight.toFixed(2)}: Item dropped ${randomModule}.png`);\r\n                game.entities.pickups.push(new Pickup('module', randomModule, dropPosition.clone()));\r\n                return;\r\n            }\r\n\r\n            // Check for random weapon drop\r\n            if (droppableWeapons.length > 0) {\r\n                for (const weapon of droppableWeapons) {\r\n                    roll -= weapon.weight;\r\n                    if (roll <= 0) {\r\n                        console.log(`Roll ${originalRoll.toFixed(2)} of ${totalWeight.toFixed(2)}: Item dropped ${weapon.key}.png`);\r\n                        window.game.entities.droppedWeapons.push(new WeaponPickup(weapon.key, dropPosition.clone(), weapon.weight));\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    // --- End Weapon Drop ---\r\n\r\n\r\n    if (npc.config.baseType === 'gamorrean' && window.audioSystem) {\r\n        audioSystem.playPositionalSoundFromList('gamorreandeath', npc.mesh.group.position, 0.9);\r\n    } else if (npc.config.baseType === 'wookiee' && window.audioSystem) {\r\n        audioSystem.playPositionalSoundFromList('wookdeath', npc.mesh.group.position, 0.9);\r\n    } else if (window.audioSystem) {\r\n        const maleTypes = ['human_male', 'humanoid', 'clone', 'mandalorian', 'stormtrooper', 'darth', 'taker'];\r\n        const soundSet = npc.itemData.properties?.soundSet;\r\n\r\n        if (soundSet === 'female') {\r\n            audioSystem.playPositionalSoundFromList('femaledeath', npc.mesh.group.position, 0.9);\r\n        } else if (maleTypes.includes(npc.config.baseType) && soundSet !== 'female') {\r\n            audioSystem.playMaleDeathSound(npc.mesh.group.position, 0.9);\r\n        }\r\n    }\r\n\r\n    if (killer && window.game.factionManager) {\r\n        const killerFaction = (killer === physics.playerEntity || killer.isPlayer) ? 'player_droid' : killer.faction;\r\n        if(killerFaction === 'player_droid') game.handlePlayerKill(npc);\r\n\r\n        // Call the faction manager to apply an impulse to the victim's faction position\r\n        window.game.factionManager.applyKillRepulsion(killerFaction, npc.faction);\r\n\r\n        // If killed by player or an ally, trigger the sad animation for the victim's faction\r\n        if ((killerFaction === 'player_droid' || killer.isAlly) && window.factionAvatarManager) {\r\n            window.factionAvatarManager.triggerSpecialAnimation(npc.faction, 's1');\r\n        }\r\n    }\r\n\r\n    if (npc.isAlly) game.handleAllyDeath(npc); // Handle ally death immediately after mesh removal\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\player_gear.js",
      "originalSize": 42124,
      "condensedSize": 5151,
      "content": "// File: 995 lines condensed to 72 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE player_gear.js\r\n// update: Forced a camera matrix update before firing weapons to ensure projectile origin and melee hit detection use the correct, up-to-date player position, fixing spawn/hit registration errors.\r\n// update: Replaced performance-intensive PointLights on blaster bolts with billboarded glow sprites for significant optimization in large battles.\r\n// update: Changed BlasterBolt material from MeshBasicMaterial to MeshStandardMaterial to allow it to receive lighting and emissive properties, making it glow correctly.\r\n// rewrite: Refactored PlayerWeaponSystem to manage an array of weapons and allow cycling. MeleeWeapon class is now generic for all player melee weapons.\r\n// update: Corrected the path for the Gaffi Stick asset to fix 404 error.\r\n// rewrite: Implemented sprite-based frame animation for the Zapper, extended weapon slots, and added logic for starting gear including the 4-slot module.\r\n// fix: Corrected Zapper path construction in _generateWeaponConfigs to eliminate duplication and ensure the correct key is used, solving the persistent 404 error.\r\n// fix: Ensured only the Zapper loads multiple frames; all other weapons load only their base image for the 'idle' state, fixing massive 404 floods.\r\n// fix: Implemented robust hit detection in PlayerWeaponSystem.performMeleeHitDetection for melee/saber weapons.\r\nclass BlasterBolt {\r\n        // PERFORMANCE FIX: Use a shared glow sprite instead of a PointLight\r\n        // The collider sphere remains for hit detection\r\nclass PamphletProjectile {\r\nclass MeleeWeapon {\r\n        // For layered weapons like sabers\r\n        // This is a placeholder mesh, its texture will be set on loadTextures\r\n        // Hide until loaded and active\r\n        // Zapper specific animation properties\r\n        // Determine which frames to load: all defined frames if Zapper, only 'idle' otherwise\r\n            // frames[key] contains the path relative to /data/gonkonlyweapons/, e.g., 'melee/gmelee_zapper/gmelee_zapper_a'\r\n        // --- SABER BLADE LOADING ---\r\n        // Apply the specific transform values when the weapon is made active.\r\n        // Play saber ignite sound on switch\r\n        // Play saber deactivate sound on switch\r\n            // General ranged/pistol fire sound placeholder\r\n        // Light pops immediately\r\n        // Handle light fading independent of attack state\r\n        // Update blade emissive color from UI controls\r\n            // Placeholder: Assume this color is controlled by UI or logic\r\n        // --- Zapper Animation Logic (Attack/Extension/Retraction) ---\r\nclass RangedWeapon extends MeleeWeapon {\r\n        // Overwrite base position with ranged default\r\n        // Check for energy instead of ammo\r\n            // Play out of ammo sound\r\n        // Consume energy\r\n        // Fire the blaster bolt\r\n        // Light pops immediately\r\n        // Offset the bolt to appear to come from the weapon, not the player's face.\r\n    // Ranged weapons have their own simple recoil animation.\r\n        // Call parent update for bobbing and light fading\r\n            // A simple parabola: moves back and then returns to start.\r\nclass SaberWeapon extends MeleeWeapon {\r\n        // Attack animation properties\r\n        // Store the starting position/rotation for the attack animation\r\n        // Store the current position and rotation to animate from\r\nclass PlayerWeaponSystem {\r\n      // Each category slot is now an array to hold multiple weapons\r\n      // Defines how many weapons can be in each slot\r\n        // Set initial active weapon if available\r\n    // _generateWeaponConfigs and _loadAndInstantiateWeapons remain the same...\r\n        // Unlock and equip starting gear with your default weapons\r\n        // Set capacity for each slot\r\n        // Add zapper to melee slot (index 0)\r\n        // Add Relby pistol to pistol slot (index 1)\r\n        // Add EE-3 Boba rifle to rifle slot (index 2)\r\n        // Add F-11D Phasma longarm to longarm slot (index 3)\r\n        // Add E-Web to unique slot (index 4)\r\n        // Add Luke's saber to saber slot (index 5)\r\n        // Clear the slot and add the new starting weapon at the front.\r\n        // For simplicity, we replace the entire slot content with the new starting weapon\r\n        // If this is the active slot, update the active weapon\r\n            // Drop the oldest weapon (the one at the front of the array)\r\n        // Add the new weapon to the end of the array for this slot\r\n        // If the new weapon is for the currently active slot, make it active\r\n        // A slot is considered \"filled\" if it has at least one weapon in its array.\r\n        // The active weapon is the last one in the slot's array (most recently picked up)\r\n    // performMeleeHitDetection, handlePrimaryAttack, handleSecondaryAttack, handleForcePush remain the same...\r\n        // Also check for enemy spawn point hits\r\n                // Use the actual mesh position (which is at the edge), not grid position\r\n            // Play out of ammo sound\r\n            // Play out of ammo sound\r",
      "compressionRatio": 0.12228183458361029,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\skybox_animator.js",
      "originalSize": 1804,
      "condensedSize": 1804,
      "content": "// BROWSERFIREFOXHIDE skybox_animator.js\r\n// new file: Manages the playback of pre-loaded animated skybox textures.\r\nclass SkyboxAnimator {\r\n    constructor(textureArray, framesPerSecond = 24) {\r\n        this.textures = textureArray;\r\n        this.pmremGenerator = null;\r\n        this.envMaps = [];\r\n        this.isInitialized = false;\r\n\r\n        this.fps = framesPerSecond;\r\n        this.frameDuration = 1.0 / this.fps;\r\n        this.currentIndex = 0;\r\n        this.elapsedTime = 0;\r\n    }\r\n\r\n    async initialize(renderer) {\r\n        if (this.isInitialized || this.textures.length === 0) return;\r\n        this.pmremGenerator = new THREE.PMREMGenerator(renderer);\r\n        this.pmremGenerator.compileEquirectangularShader();\r\n\r\n        for (const texture of this.textures) {\r\n            texture.mapping = THREE.EquirectangularReflectionMapping;\r\n            texture.encoding = THREE.sRGBEncoding;\r\n            const envMap = this.pmremGenerator.fromEquirectangular(texture);\r\n            this.envMaps.push(envMap.texture);\r\n            texture.dispose(); \r\n        }\r\n\r\n        this.textures = [];\r\n        this.pmremGenerator.dispose();\r\n        this.pmremGenerator = null;\r\n        this.isInitialized = true;\r\n    }\r\n\r\n    update(deltaTime) {\r\n        if (!this.isInitialized || this.envMaps.length === 0) return;\r\n        this.elapsedTime += deltaTime;\r\n        if (this.elapsedTime >= this.frameDuration) {\r\n            this.elapsedTime -= this.frameDuration;\r\n            this.currentIndex = (this.currentIndex + 1) % this.envMaps.length;\r\n            if (game && game.scene) game.scene.background = this.envMaps[this.currentIndex];\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        this.envMaps.forEach(map => map.dispose());\r\n        this.envMaps = [];\r\n        this.isInitialized = false;\r\n    }\r\n}",
      "compressionRatio": 1,
      "extractionMethod": "no_compression"
    },
    {
      "path": "e:\\gonk\\slicing_system.js",
      "originalSize": 17445,
      "condensedSize": 2519,
      "content": "// File: 489 lines condensed to 48 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE slicing_system.js\n// Slicing system for hacking enemy spawn points to summon allies or trigger security alerts\nclass SlicingSystem {\n        // Create \"Press E to Slice\" prompt (LARGE, center of screen)\n        // Create result message UI\n    // Calculate difficulty: 30 * spawner_grade + 45\n    // Spawner grade is based on total_max_threat divided by 10 (threat 10 = grade 1, 20 = grade 2, etc.)\n    // Or we can use max_individual_threat as the grade indicator\n        // Use max_individual_threat as the \"grade\" (1-5 typically)\n        // Check all spawn points\n            // Must be close to the right side of the spawner (within 3 units)\n        // Roll 1d100\n        // Mark as sliced so it can't be sliced again\n        // Find most friendly faction (lowest relationship score)\n        // Calculate total threat to summon\n        // Base: 2 threat (two threat 1 NPCs)\n        // Every 10 points above difficulty adds 1 to total threat\n        // Determine if this is a critical success (exceeds max summon potential)\n        // Distribute threat across 2 NPCs\n        // Spawn the allies\n        // Show result message\n        // Play success sound\n        // Find most hostile faction (highest relationship score)\n        // Spawn a threat 3 enemy\n        // Show failure message\n        // Play failure/alarm sound\n        // Spawn first NPC\n        // Spawn second NPC with slight delay\n        // Find an NPC of the right faction and threat\n        // Ensure texture is loaded\n        // Spawn position near the spawner\n        // Offset slightly to spread NPCs out\n        // Get NPC config for name generation\n        // Generate name\n        // Create the NPC\n                            // Make them \"friends\" - like pamphlet converted but not full allies\n                            // They fight with player but don't follow to other levels\n                            // Apply green nametag (similar to converted NPCs)\n                            // Normal ally behavior - friendly to player\n                        // Enemy - aggro on player immediately\n        // Hide after 3 seconds\n    // Called when player takes slicing skill node\n    // Called for each upgrade node taken (adds +20 to bonus)\n    // Handle E key press\n    // Reset for new level\n// Initialize slicing system when game loads\n            // Hook into input handler for E key\n            // Debug commands",
      "compressionRatio": 0.14439667526511896,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\tab_controls.js",
      "originalSize": 91510,
      "condensedSize": 3034,
      "content": "// File: 1275 lines condensed to 66 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE tab_controls.js\n// update: Re-implemented the logic for the player and NPC weapon sliders to correctly modify weapon transforms and pamphlet sizes in real-time.\n// update: Faction physics reset button now correctly reads default values from GAME_GLOBAL_CONSTANTS.\nclass TabControls {\n        // ADDED: Helper for player's blaster bolt origin\n        // Faction HUD in Label Tab\n        // Labels & Rings\n        // --- The rest of the event listeners ---\n        // Position\n        // Rotation (convert radians to degrees for UI)\n        // Scale\n        // Pamphlet\n        // Bolt Origin\n        // The UI shows positive-right, but the code uses negative-right, so we invert it for the slider.\n        // Manually trigger the update function to refresh all the text labels next to the sliders\n        // Nameplates\n        // Rings\n        // Dropped Weapon Rings\n        // Faction HUD\n    // ... (The rest of the functions from the original file are below)\n        // Apply changes to existing blaster bolts in real-time\n        // ... implementation from original file ...\n        // ... implementation from original file ...\n        // ... implementation from original file ...\n        // ... implementation from original file ...\n        // ... implementation from original file ...\n        // FIX: Load the current player weapon's transform into the UI sliders.\n        // FIX: Update the basePosition vector, not the mesh's position directly.\n        // FIX: Invert the X-axis value to match user expectation (positive = right).\n        // ADDED: Update bolt origin helper position in real-time\n        // Update UI labels\n        // ... implementation from original file ...\n        // Body adjustments\n        // Left Arm adjustments\n        // Right Arm adjustments\n        // Update value spans\n// Body\n// Y-Rotation: ${bodyRotY.toFixed(0)}\n// Y-Position (Offset): ${bodyPosY.toFixed(1)}\n// Instance Scale: ${bodyScale.toFixed(2)}\n// Left Arm\n// Arm Length: ${lArmScaleY.toFixed(2)}\n// Rot X: ${lArmRotX.toFixed(0)}\n// Rot Y: ${lArmRotY.toFixed(0)}\n// Rot Z: ${lArmRotZ.toFixed(0)}\n// Right Arm\n// Arm Length: ${rArmScaleY.toFixed(2)}\n// Rot X: ${rArmRotX.toFixed(0)}\n// Rot Y: ${rArmRotY.toFixed(0)}\n// Rot Z: ${rArmRotZ.toFixed(0)}\n        // Labels\n        // Rings\n                // FIX: Changed npc.config.stats.collisionRadius to npc.config.collision_radius\n        // Dropped Weapon Rings\n        // ... this is an old function, will be replaced by snapshotVisuals ...\n        // ... implementation from original file ...\n            // Update value displays for conversation UI\n        // Health/Energy Gauges\n        // Health/Energy Overlay\n            // Calculate actual size: 100% = 1100px (baseline), 200% = 2200px, etc.\n        // Health Sphere (Red)\n        // Power Sphere (Blue)\n        // Ally Boxes\n        // Weapon Display\n        // Ammo Display\n        // Conversation UI",
      "compressionRatio": 0.03315484646486723,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\tab_faction_controls.js",
      "originalSize": 20865,
      "condensedSize": 222,
      "content": "// File: 289 lines condensed to 3 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE tab_faction_controls.js\r\nclass TabFactionControls {\r\n            // Symmetrical update for strength\r",
      "compressionRatio": 0.010639827462257369,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\weapon_icons.js",
      "originalSize": 18457,
      "condensedSize": 2685,
      "content": "// File: 416 lines condensed to 26 lines\n// Extraction: Function signatures, imports, exports, types\n// BROWSERFIREFOXHIDE weapon_icons.js\r\n// update: Fixed a critical bug where an NPC's weapon mesh was not being correctly assigned to the NPC instance, causing ranged units to default to melee attacks. Both attach and remove functions now correctly modify the primary NPC object.\r\n// update: Added a clear() method and improved disposal logic to prevent memory leaks during level transitions.\r\n// update: Modified getCategoryFromName to correctly parse player weapon keys (starting with 'g') and map them to the correct inventory categories (pistol, rifle, longarm, etc.), fixing the slot assignment error.\r\n// fix: Corrected the category mapping for NPC saber weapons (those not starting with 'g') to search the expected 'saber' folder, resolving 404 errors for NPC sabers used in character JSONs.\r\n// fix: Corrected typo 'persistentAllyWehes' to 'persistentAllyWeapons' in the clear method, resolving the game-breaking ReferenceError.\r\nclass WeaponIconSystem {\r\n        // This is called when a level changes to clean up weapon meshes of non-persistent NPCs.\r\n                 // The weapon mesh is removed from the scene when its parent NPC group is removed.\r\n                 // We just need to dispose of its geometry and materials here.\r\n            // FIX: If the path is just a filename, construct the full path.\r\n            // This handles cases where level data might store only the weapon name.\r\n            // Fallback material (magenta for missing texture)\r\n        // Map prefixes to folder/inventory category keys. Player weapon names start with 'g'.\r\n        // Handle names that start with 'g' (player weapons) by stripping the 'g' prefix\r\n            // Note: 'saberhilt' is player, 'saber' is often NPC\r\n            // FIX: If it's an NPC weapon and the name starts with 'saber', assume the folder name is simply 'saber'\r\n            // Handle the zapper\r\n        // Apply pose data for pickup (can be different from character attachment)\r\n            // For pickups, we might want a more generic upright pose or a slightly rotated one\r\n            // For now, let's use a simplified version of the attached pose\r\n            // FIX: Construct the correct path for NPC weapons using their resolved category.\r\n                // Zapper is a special case, located in the player weapon directory.\r\n                // We hardcode the path to the 'a' frame, as the NPC weapon system currently treats it as static.\r\n            // This part is for NPC weapon glows, which still use lights for now.\r\n                // Update the new glow sprite instead of the old light\r",
      "compressionRatio": 0.14547326217695183,
      "extractionMethod": "js_structure_extraction"
    },
    {
      "path": "e:\\gonk\\weapon_pickup_manager.js",
      "originalSize": 12923,
      "condensedSize": 877,
      "content": "// File: 348 lines condensed to 12 lines\n// Extraction: Function signatures, imports, exports, types\nclass WeaponPickupManager {\n        // A proper WeaponPickup object has a 'weaponKey' string.\n        // If not, it might be a raw weapon object that was dropped.\n            // Player weapons have a 'g' prefix in their key, we want the base name for lookup.\n        // Or it might be a WeaponPickup where weaponKey was incorrectly assigned a weapon object.\n            // join all parts after the first one, capitalize each\n        // Example: an ewok cannot use an eweb cannon\n        // Use playerStats from game.state, assuming it's initialized\n        // This path needs to be correct for the NPC to find the weapon asset\n        // You'll need a way to update the UI for this. Let's assume a function exists.\nclass WeaponPickup {\n        // Add a ring instead of a light",
      "compressionRatio": 0.06786349918749517,
      "extractionMethod": "js_structure_extraction"
    }
  ]
}